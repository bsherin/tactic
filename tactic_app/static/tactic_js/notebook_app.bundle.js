!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=17)}([function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return c})),s.d(t,"c",(function(){return i}));var o=window.ReactBootstrap;class n extends React.Component{constructor(e){super(e),doBinding(this);let t=this.props.default_value;for(var s=1;this.name_exists(t);)s+=1,t=this.props.default_value+String(s);this.state={show:!1,current_value:t,checkbox_states:{},warning_text:""}}_changeHandler(e){this.setState({current_value:e.target.value})}_checkbox_change_handler(e){e.target.checked;let t=Object.assign({},this.state.checkbox_states);t[e.target.id]=e.target.checked,this.setState({checkbox_states:t})}componentDidMount(){if(this.setState({show:!0}),null!=this.props.checkboxes&&0!=this.props.checkboxes.length){let e={};for(let t of this.props.checkboxes)e[t.id]=!1;this.setState({checkbox_states:e})}}name_exists(e){return this.props.existing_names.indexOf(e)>-1}_submitHandler(e){let t;""==this.state.current_value?(t="An empty name is not allowed here.",this.setState({warning_text:t})):this.name_exists(this.state.current_value)?(t="That name already exists",this.setState({warning_text:t})):(this.setState({show:!1}),this.props.handleSubmit(this.state.current_value,this.state.checkbox_states),this.props.handleClose())}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){let e=[];if(null!=this.props.checkboxes&&0!=this.props.checkboxes.length)for(let t of this.props.checkboxes){let s=React.createElement(o.Form.Check,{type:"checkbox",label:t.checktext,id:t.checkname,key:t.checkname,onChange:this._checkbox_change_handler});e.push(s)}return React.createElement(o.Modal,{show:this.state.show},React.createElement(o.Modal.Header,{closeButton:!0},React.createElement(o.Modal.Title,null,this.props.title)),React.createElement(o.Modal.Body,null,React.createElement(o.Form.Group,{onSubmit:this._submitHandler},React.createElement(o.Form.Label,null,this.props.field_title),React.createElement(o.Form,null,React.createElement(o.Form.Control,{type:"text",onChange:this._changeHandler,value:this.state.current_value}))),0!=e.length&&e),React.createElement(o.Modal.Footer,null,React.createElement(o.Form.Text,{className:"text-muted"},this.state.warning_text),React.createElement(o.Button,{variant:"secondary",onClick:this._cancelHandler},"Cancel"),React.createElement(o.Button,{variant:"primary",onClick:this._submitHandler},"Submit")))}}function a(e,t,s,o,a,r=null){void 0===a&&(a=[]);let i=document.querySelector("#modal-area");ReactDOM.render(React.createElement(n,{handleSubmit:s,handleClose:function(){ReactDOM.unmountComponentAtNode(i)},title:e,field_title:t,default_value:o,checkboxes:r,existing_names:a}),i)}n.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,field_title:PropTypes.string,default_value:PropTypes.string,existing_names:PropTypes.array,checkboxes:PropTypes.array},n.defaultProps={existing_names:[],default_value:"",checkboxes:null};class r extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1,value:null}}componentDidMount(){this.setState({show:!0,value:this.props.option_list[0]})}_handleChange(e){this.setState({value:e.target.value})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(this.state.value),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(o.Modal,{show:this.state.show},React.createElement(o.Modal.Header,{closeButton:!0},React.createElement(o.Modal.Title,null,this.props.title)),React.createElement(o.Modal.Body,null,React.createElement(o.Form.Group,null,React.createElement(o.Form.Label,null,"Select Label"),React.createElement(o.Form.Control,{as:"select",onChange:this._handleChange,value:this.state.value},this.props.option_list.map((e,t)=>React.createElement("option",{key:t},e))))),React.createElement(o.Modal.Footer,null,React.createElement(o.Button,{variant:"secondary",onClick:this._cancelHandler},"Cancel"),React.createElement(o.Button,{variant:"primary",onClick:this._submitHandler},"Submit")))}}function i(e,t,s,o,n,a){let i=document.querySelector("#modal-area");ReactDOM.render(React.createElement(r,{handleSubmit:n,handleClose:function(){ReactDOM.unmountComponentAtNode(i)},title:e,select_label:t,submit_text:o,option_list:a,cancel_text:s}),i)}r.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,select_label:PropTypes.string,option_list:PropTypes.array,submit_text:PropTypes.string,cancel_text:PropTypes.string};class l extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1}}componentDidMount(){this.setState({show:!0})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(o.Modal,{show:this.state.show},React.createElement(o.Modal.Header,{closeButton:!0},React.createElement(o.Modal.Title,null,this.props.title)),React.createElement(o.Modal.Body,null,React.createElement("p",null,this.props.text_body)),React.createElement(o.Modal.Footer,null,React.createElement(o.Button,{variant:"secondary",onClick:this._cancelHandler},"Cancel"),React.createElement(o.Button,{variant:"primary",onClick:this._submitHandler},"Submit")))}}function c(e,t,s,o,n){let a=document.querySelector("#modal-area");ReactDOM.render(React.createElement(l,{handleSubmit:n,handleClose:function(){ReactDOM.unmountComponentAtNode(a)},title:e,text_body:t,submit_text:o,cancel_text:s}),a)}confirmDialog.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,text_body:PropTypes.string,submit_text:PropTypes.string,cancel_text:PropTypes.string}},function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"d",(function(){return h})),s.d(t,"a",(function(){return n}));var o=window.ReactBootstrap;class n extends React.Component{render(){return React.createElement("button",{type:"button",style:this.props.style,className:this.props.butclass,onMouseDown:e=>{e.preventDefault()},onClick:this.props.handleClick},React.createElement("span",{className:this.props.icon_class}),this.props.extra_glyph_text&&React.createElement("span",{className:"extra-glyph-text"},this.props.extra_glyph_text))}}n.propTypes={butclass:PropTypes.string,icon_class:PropTypes.string,extra_glyph_text:PropTypes.string,style:PropTypes.object,handleClick:PropTypes.func},n.defaultProps={style:{},extra_glyph_text:null};(class extends React.Component{constructor(e){super(e),doBinding(this),this.state={xpos:0,ypos:0,initial_x:null,initial_y:null,active:!1}}_dragStart(e){this.setState({initial_x:e.clientX,initial_y:e.clientY,active:!0})}_drag(e){if(this.state.active){let t=e.clientX-this.state.initial_x,s=e.clientY-this.state.initial_y;this.setState({xpos:t,ypos:s})}}_dragEnd(e){this.setState({active:!1,xpos:0,ypos:0})}render(){let e={fontSize:25};return this.state.active&&(e.transform="translate3d("+this.state.xpos+"px, "+this.state.ypos+"px, 0)"),React.createElement("span",{style:e,onMouseDown:this._dragStart,onMouseMove:this._drag,onMouseUp:this._dragEnd,className:"fal fa-caret-right"})}}).propTypes={handleDrag:PropTypes.func};class a extends React.Component{render(){let e=this.props.show?"form-group m-1":"form-group m-1 d-none";return React.createElement(o.Form.Group,{bsPrefix:e},React.createElement(o.Form.Label,{bsPrefix:"form-label m-1"},this.props.label),React.createElement(o.Form.Control,{as:"input",onChange:this.props.onChange,value:this.props.the_value}))}}function r(e){return React.createElement(o.Form.Group,{bsPrefix:"form-group m-1"},React.createElement(o.Form.Label,{bsPrefix:"form-label m-1"},e.label),React.createElement(i,{option_list:e.option_list,onChange:e.onChange,the_value:e.the_value}))}a.propTypes={show:PropTypes.bool,label:PropTypes.string,onChange:PropTypes.func,the_value:PropTypes.string},a.defaultProps={show:!0};class i extends React.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(e.target.value)}render(){let e={marginBottom:5,width:"auto"};null!=this.props.height&&(e.height=this.props.height),null!=this.props.maxWidth&&(e.maxWidth=this.props.maxWidth),null!=this.props.fontSize&&(e.fontSize=this.props.fontSize);let t=this.props.option_list.map((e,t)=>React.createElement("option",{key:t},e));return React.createElement(o.Form.Control,{as:"select",style:e,onChange:this.handleChange,value:this.props.value},t)}}i.propTypes={option_list:PropTypes.array,onChange:PropTypes.func,value:PropTypes.string,height:PropTypes.number,maxWidth:PropTypes.number,fontSize:PropTypes.number},i.defaultProps={height:null,maxWidth:null,fontSize:null};(class extends React.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.handleChange(e.target.value)}render(){let e=this.props.option_list.map((e,t)=>React.createElement("option",{key:t},e));return React.createElement("select",{style:{marginBottom:5,width:"auto"},className:"form-control",onChange:this.handleChange,value:this.props.value},e)}}).propTypes={option_list:PropTypes.array,handleChange:PropTypes.func,value:PropTypes.string};class l extends React.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.td_ref=React.createRef()}handleChange(e){let t=this.td_ref.current.innerHTML.trim();this.props.handleCellChange(this.props.theRow,this.props.theCol,t)}render(){return React.createElement("td",{contentEditable:this.props.content_editable,onBlur:this.handleChange,ref:this.td_ref,suppressContentEditableWarning:!0},this.props.children)}}l.propTypes={content_editable:PropTypes.bool,handleCellChange:PropTypes.func,theRow:PropTypes.number,theColumn:PropTypes.string};class c extends React.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.handleRowClick(this.props.row_index)}render(){let e=this.props.columns.map((e,t)=>React.createElement(l,{key:t,content_editable:this.props.content_editable,theRow:this.props.row_index,theCol:e,handleCellChange:this.props.handleCellChange},this.props.data_dict[e]));e.push(React.createElement("td",{key:"999"},React.createElement("span",{className:"ui-icon ui-icon-arrowthick-2-n-s"})));let t=this.props.active?"selector-button active":"selector-button";return React.createElement("tr",{className:t,id:this.props.row_index,onClick:this.handleClick},e)}}c.propTypes={columns:PropTypes.array,row_index:PropTypes.number,data_dict:PropTypes.object,active:PropTypes.bool,handleRowClick:PropTypes.func,content_editable:PropTypes.bool,handleCellChange:PropTypes.func},c.defaultProps={content_editable:!1};class p extends React.Component{render(){let e=this.props.columns.map((e,t)=>React.createElement("th",{key:t},e));return e.push(React.createElement("th",{key:"999"}," ")),React.createElement("thead",null,React.createElement("tr",{className:"selector-button",key:"header"},e))}}p.propTypes={columns:PropTypes.array};class h extends React.Component{constructor(e){super(e),this.tbody_ref=React.createRef(),this.update_option_order=this.update_option_order.bind(this),this.handleCellChange=this.handleCellChange.bind(this)}componentDidMount(){$(this.tbody_ref.current).sortable({handle:".ui-icon",update:this.update_option_order})}handleCellChange(e,t,s){let o=this.props.data_array;o[e][t]=s,this.props.handleChange(o)}update_option_order(e,t){let s=$(this.tbody_ref.current).sortable("toArray"),o=s.indexOf(String(this.props.active_row)),n=s.map((e,t)=>this.props.data_array[parseInt(e)]);this.props.handleChange(n),this.props.handleActiveRowChange(o)}render(){let e=this.props.data_array.map((e,t)=>React.createElement(c,{columns:this.props.columns,data_dict:e,key:e[this.props.columns[0]],row_index:t,active:t==this.props.active_row,handleRowClick:this.props.handleActiveRowChange,content_editable:this.props.content_editable,handleCellChange:this.handleCellChange}));return React.createElement("table",{className:"tile-table table sortable table-striped table-bordered table-sm"},React.createElement(p,{columns:this.props.columns}),React.createElement("tbody",{ref:this.tbody_ref},e))}}h.propTypes={columns:PropTypes.array,data_array:PropTypes.array,active_row:PropTypes.number,handleActiveRowChange:PropTypes.func,handleChange:PropTypes.func,content_editable:PropTypes.bool},h.defaultProps={content_editable:!1}},,,function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));class o{constructor(e,t){this.name_space=e,this.recInterval=null,this.retry_interval=t,this.connectme(),this.initialize_socket_stuff(),this.watchForDisconnect()}connectme(){use_ssl?this.socket=io.connect(`https://${document.domain}:${location.port}/${this.name_space}`):this.socket=io.connect(`http://${document.domain}:${location.port}/${this.name_space}`)}initialize_socket_stuff(){}watchForDisconnect(){let e=this;this.socket.on("disconnect",(function(){doFlash({message:"lost server connection"}),e.socket.close(),e.recInterval=setInterval((function(){e.attemptReconnect()}),e.retry_interval)}))}attemptReconnect(){this.socket.connected?(clearInterval(this.recInterval),this.initialize_socket_stuff(),this.watchForDisconnect(),doFlash({message:"reconnected to server"})):this.connectme()}}},function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var o=window.ReactBootstrap;let n=$SCRIPT_ROOT+"/library",a=$SCRIPT_ROOT+"/repository",r=$SCRIPT_ROOT+"/account_info",i=$SCRIPT_ROOT+"/login";class l extends React.Component{handle_signout(){doSignOut(window.page_id)}render(){let e=React.createElement(React.Fragment,null,React.createElement(o.Nav.Item,null,React.createElement(o.Nav.Link,{href:n},"My Resources")),React.createElement(o.Nav.Item,null,React.createElement(o.Nav.Link,{href:a},"Repository")),React.createElement(o.Nav.Item,null,React.createElement(o.Nav.Link,{href:r},this.props.user_name)),React.createElement(o.Nav.Item,null,React.createElement(o.Nav.Link,{onClick:this.handle_signout},"Logout"))),t=(React.createElement(o.Nav.Item,null,React.createElement(o.Nav.Link,{href:i},"Login")),null==this.props.menus?"justify-content-end":"justify-content-between");return React.createElement(o.Navbar,{bg:"light",expand:"lg",variant:"light"},React.createElement(o.Navbar.Brand,{href:"/"},React.createElement("img",{className:"mr-2",src:window.tactic_img_url,alt:"",width:"32 ",height:"32"}),"Tactic"),React.createElement(o.Navbar.Collapse,{id:"collapse-area",className:t},null!=this.props.menus&&React.createElement(o.Nav,{id:"menu-area"},this.props.menus),React.createElement(o.Nav,null,React.createElement(o.Nav.Link,{href:"http://tactic.readthedocs.io/en/latest/index.html"},"Docs"),this.props.is_authenticated&&e)))}}function c(){let e=document.querySelector("#navbar-root");ReactDOM.render(React.createElement(l,{is_authenticated:window.is_authenticated,user_name:window.username}),e)}l.propTypes={is_authenticated:PropTypes.bool,img_url:PropTypes.string,user_name:PropTypes.string,menus:PropTypes.object},l.defaultProps={menus:null}},,function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));class o extends React.Component{constructor(e){super(e),this.code_container_ref=React.createRef(),this.handleChange=this.handleChange.bind(this),this.mousetrap=new Mousetrap,this.create_api()}createCMArea(e,t=1){let s=CodeMirror(e,{lineNumbers:!0,matchBrackets:!0,highlightSelectionMatches:!0,autoCloseBrackets:!0,indentUnit:4,mode:this.props.mode,readOnly:this.props.readOnly});1!=t&&s.setOption("firstLineNumber",t);let o=Object.assign(this.props.extraKeys,{Tab:function(e){let t=new Array(5).join(" ");e.replaceSelection(t)},"Ctrl-Space":"autocomplete"});return s.setOption("extraKeys",o),s.setSize(null,"100%"),s.on("change",this.handleChange),s}handleChange(e,t){this.props.handleChange(e.getDoc().getValue())}componentDidMount(){this.cmobject=this.createCMArea(this.code_container_ref.current,this.props.first_line_number),this.cmobject.setValue(this.props.code_content),this.create_keymap(),null!=this.props.setCMObject&&this.props.setCMObject(this.cmobject)}componentDidUpdate(){this.props.sync_to_prop&&this.cmobject.setValue(this.props.code_content),1!=this.props.first_line_number&&this.cmobject.setOption("firstLineNumber",this.props.first_line_number),this.cmobject.refresh()}searchCM(){CodeMirror.commands.find(this.cmobject)}clearSelections(){CodeMirror.commands.clearSearch(this.cmobject),CodeMirror.commands.singleSelection(this.cmobject)}create_api(){let e=this;postAjax("get_api_dict",{},(function(t){e.api_dict_by_category=t.api_dict_by_category,e.api_dict_by_name=t.api_dict_by_name,e.ordered_api_categories=t.ordered_api_categories,e.api_list=[];for(let t of e.ordered_api_categories)for(let s of e.api_dict_by_category[t])e.api_list.push(s.name);CodeMirror.commands.autocomplete=function(t){t.showHint({hint:CodeMirror.hint.anyword,api_list:e.api_list,extra_autocomplete_list:e.extra_autocomplete_list})}}))}create_keymap(){let e=this;CodeMirror.keyMap.default.Esc=function(){e.clearSelections()};let t=CodeMirror.keyMap.default.hasOwnProperty("Cmd-S");this.mousetrap.bind(["escape"],(function(t){e.clearSelections(),t.preventDefault()})),t?(CodeMirror.keyMap.default["Cmd-S"]=function(){e.props.saveMe()},this.mousetrap.bind(["command+l"],(function(e){e.preventDefault()})),this.mousetrap.bind(["command+f"],(function(t){e.searchCM(),t.preventDefault()}))):(CodeMirror.keyMap.default["Ctrl-S"]=function(){e.props.saveMe()},this.mousetrap.bind(["ctrl+l"],(function(e){e.preventDefault()})),this.mousetrap.bind(["ctrl+f"],(function(t){e.searchCM(),t.preventDefault()})))}render(){let e={height:this.props.code_container_height,width:"100%"};return React.createElement("div",{id:"code-container",style:e,ref:this.code_container_ref})}}o.propTypes={handleChange:PropTypes.func,code_content:PropTypes.string,sync_to_prop:PropTypes.bool,mode:PropTypes.string,saveMe:PropTypes.func,readOnly:PropTypes.bool,first_line_number:PropTypes.number,extraKeys:PropTypes.object,setCMObject:PropTypes.func,code_container_height:PropTypes.oneOfType([PropTypes.string,PropTypes.number])},o.defaultProps={first_line_number:1,code_container_height:"100%",sync_to_prop:!1,mode:"python",readOnly:!1,extraKeys:{},setCMObject:null}},,,,,function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e};class n extends React.Component{constructor(e){super(e),doBinding(this),this.state={mounted:!1},this.container_ref=null==this.props.container_ref?React.createRef():this.props.container_ref}get sorter_exists(){return $(this.container_ref.current).hasClass("ui-sortable")}componentDidMount(){this.setState({mounted:!0}),this.createSorter()}componentDidUpdate(){!this.sorter_exists&&this.container_ref.current&&this.createSorter()}createSorter(){let e=this;$(this.container_ref.current).sortable({handle:this.props.handle,tolerance:"pointer",revert:"invalid",forceHelperSize:!0,stop:function(){const t=$(e.container_ref.current).sortable("toArray");e.props.resortFunction(t)}})}render(){let e=this.props.ElementComponent;return React.createElement("div",{id:this.props.id,style:this.props.style,ref:this.container_ref},this.props.item_list.length>0&&this.props.item_list.map((t,s)=>React.createElement(e,o({key:t[this.props.key_field_name]},this.props,t))))}}n.propTypes={id:PropTypes.string,handle:PropTypes.string,key_field_name:PropTypes.string,ElementComponent:PropTypes.func,item_list:PropTypes.array,style:PropTypes.object,container_ref:PropTypes.object,resortFunction:PropTypes.func},n.defaultProps={container_ref:null}},function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return a}));var o=s(0),n=window.ReactBootstrap;class a extends React.Component{constructor(e){super(e),doBinding(this)}_filter_on_match_list(e){return!this.props.hidden_items.includes(e)}render(){let e=Object.keys(this.props.option_dict).filter(this._filter_on_match_list).map((e,t)=>React.createElement(n.Dropdown.Item,{disabled:this.props.disable_all||this.props.disabled_items.includes(e),onClick:this.props.option_dict[e],key:e},e));return React.createElement(n.Dropdown,null,React.createElement(n.Dropdown.Toggle,{id:this.props.menu_name,variant:"secondary",size:"sm"},this.props.menu_name),React.createElement(n.Dropdown.Menu,null,e))}}a.propTypes={menu_name:PropTypes.string,option_dict:PropTypes.object,disabled_items:PropTypes.array,disable_all:PropTypes.bool,hidden_items:PropTypes.array},a.defaultProps={disabled_items:[],disable_all:!1,hidden_items:[]};class r extends React.Component{constructor(e){super(e),doBinding(this)}_saveProjectAs(){startSpinner();let e=this;function t(t){const s={project_name:t,main_id:window.main_id,doc_type:"table",purgetiles:!0};s.interface_state=e.props.interface_state,s.purgetiles=!0,postWithCallback(window.main_id,"save_new_project",s,(function(e){if(e.success){window.is_project=!0,window._project_name=t,document.title=t,clearStatusMessage(),e.alert_type="alert-success",e.timeout=2e3,postWithCallback("host","refresh_project_selector_list",{user_id:window.user_id}),doFlashStopSpinner(e)}else clearStatusMessage(),e.message=e.message,e["alert-type"]="alert-warning",doFlashStopSpinner(e)}))}postWithCallback("host","get_project_names",{user_id:window.user_id},(function(e){Object(o.b)("Save Project As","New Project Name",t,"NewProject",e.project_names)}))}_saveProject(){const e={main_id:window.main_id};e.interface_state=this.props.interface_state,startSpinner(),postWithCallback(window.main_id,"update_project",e,(function(e){startSpinner(),e.success?(e.alert_type="alert-success",e.timeout=2e3):e.alert_type="alert-warning";clearStatusMessage(),doFlashStopSpinner(e)}))}_exportAsJupyter(){startSpinner();let e=this;function t(t){var s=[];for(let t of e.props.console_items){let e={};e.source=t.console_text,e.cell_type="code"==t.type?"code":"markdown","code"==t.type&&(e.outputs=[]),s.push(e)}const o={project_name:t,main_id:window.main_id,cell_list:s};postWithCallback(window.main_id,"export_to_jupyter_notebook",o,(function(e){clearStatusMessage(),e.success?(e.alert_type="alert-success",e.timeout=2e3):e["alert-type"]="alert-warning";doFlashStopSpinner(e)}))}postWithCallback("host","get_project_names",{user_id:user_id},(function(e){Object(o.b)("Export Notebook in Jupyter Format","New Project Name",t,"NewJupyter",e.project_names,void 0)}))}_exportDataTable(){Object(o.b)("Export Data","New Collection Name",(function(e){const t={export_name:e,main_id:window.main_id,user_id:window.user_id};$.ajax({url:$SCRIPT_ROOT+"/export_data",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json"})}))}_consoleToNotebook(){const e={main_id:window.main_id,console_items:this.props.console_items,user_id:window.user_id};postWithCallback(window.main_id,"console_to_notebook",e)}get option_dict(){return{"Save As...":this._saveProjectAs,Save:this._saveProject,"Export as Jupyter Notebook":this._exportAsJupyter,"Open Console as Notebook":this._consoleToNotebook,"Export Table as Collection":this._exportDataTable,"change collection":this.props.changeCollection}}render(){return React.createElement(a,{menu_name:"Project",option_dict:this.option_dict,disabled_items:this.props.disabled_items,disable_all:!1,hidden_items:this.props.hidden_items})}}r.propTypes={console_items:PropTypes.array,interface_state:PropTypes.object,changeCollection:PropTypes.func,disabled_items:PropTypes.array,hidden_items:PropTypes.array};class i extends React.Component{constructor(e){super(e),doBinding(this)}_shift_column_left(){let e=this.props.table_spec.column_names.indexOf(this.props.selected_column);if(0==e)return;let t=this.props.table_spec.column_names[e-1];this._moveColumn(this.props.selected_column,t)}_shift_column_right(){let e=this.props.table_spec.column_names.indexOf(this.props.selected_column);if(e==this.props.table_spec.column_names.length-1)return;let t=this.props.table_spec.column_names[e+2];this._moveColumn(this.props.selected_column,t)}get option_dict(){return{"Shift Left":this._shift_column_left,"Shift Right":this._shift_column_right,Hide:this.props.hideColumn,"Hide in All Docs":this.props.hideInAll,"Unhide All":this.props.unhideAllColumns,"Add Column":this.props.addColumn,"Add Column In All Docs":this.props.addColumnInAll}}render(){return React.createElement(a,{menu_name:"Column",option_dict:this.option_dict,disabled_items:[],disable_all:this.props.disable_all,hidden_items:[]})}}i.propTypes={moveColumn:PropTypes.func,table_spec:PropTypes.object,selected_column:PropTypes.string,hideColumn:PropTypes.func,hideInAll:PropTypes.func,unhideAllColumns:PropTypes.func,addColumn:PropTypes.func,addColumnInAll:PropTypes.func,disable_all:PropTypes.bool}},function(e,t,s){"use strict";var o=s(1),n=s(7),a=s(12);class r extends React.Component{constructor(e){super(e),doBinding(this),this.mousetrap=null}componentDidMount(){this.initializeMousetrap()}initializeMousetrap(){this.mousetrap=new Mousetrap(this.props.target_ref.current);for(let e of this.props.bindings)this.mousetrap.bind(e[0],e[1])}componentDidUpdate(){!this.mousetrap&&this.props.target_ref.current?this.initializeMousetrap():this.props.target_ref.current||(this.mousetrap=null)}render(){return React.createElement("div",null)}}r.propTypes={target_ref:PropTypes.object,bindings:PropTypes.array},s.d(t,"a",(function(){return c}));var i=react_contenteditable.default,l=window.ReactBootstrap;class c extends React.Component{constructor(e){super(e),doBinding(this),this.header_ref=React.createRef(),this.body_ref=React.createRef(),this.state={console_item_with_focus:null,console_error_log_text:"",show_console_error_log:!1},this.pseudo_tile_id=null}componentDidMount(){this.setState({mounted:!0}),this.props.tsocket.socket.off("console-message"),this.props.tsocket.socket.on("console-message",this._handleConsoleMessage)}_createTextEntry(e,t){return{unique_id:e,type:"text",am_shrunk:!1,summary_text:t,console_text:"",show_markdown:!1}}addConsoleText(e){postWithCallback("host","print_text_area_to_console",{console_text:e,user_id:window.user_id,main_id:window.main_id},(function(e){e.success||doFlash(e)}))}_addBlankText(){this.addConsoleText("")}_addBlankCode(e){this._addCodeArea(""),e.preventDefault()}_addCodeArea(e){postWithCallback("host","print_code_area_to_console",{console_text:e,user_id:window.user_id,main_id:window.main_id},(function(e){e.success||doFlash(e)}))}_resetConsole(){let e=[];for(let t of this.props.console_items)if("code"!=t.type)e.push(t);else{let s=Object.assign({},t);s.output_text="",e.push(s)}this.props.setMainStateValue("console_items",e),postWithCallback(window.main_id,"clear_console_namespace",{})}_clearConsole(){this.props.setMainStateValue("console_items",new_console_items)}_toggleConsoleLog(){let e=this;this.state.show_console_error_log?this.setState({show_console_error_log:!1}):null==e.pseudo_tile_id?postWithCallback(window.main_id,"get_pseudo_tile_id",{},(function(t){e.pseudo_tile_id=t.pseudo_tile_id,null==e.pseudo_tile_id?e.setState({console_error_log_text:"pseudo-tile is initializing..."},()=>{this.setState({show_console_error_log:!0})}):postWithCallback("host","get_container_log",{container_id:e.pseudo_tile_id},(function(t){let s=t.log_text;""==s&&(s="Got empty result. The pseudo-tile is probably starting up."),e.setState({console_error_log_text:s},()=>{e.setState({show_console_error_log:!0})})}))})):postWithCallback("host","get_container_log",{container_id:e.pseudo_tile_id},(function(t){e.setState({console_error_log_text:t.log_text},()=>{e.setState({show_console_error_log:!0})})}))}_toggleMainLog(){let e=this;this.state.show_console_error_log?this.setState({show_console_error_log:!1}):postWithCallback("host","get_container_log",{container_id:window.main_id},(function(t){e.setState({console_error_log_text:t.log_text},()=>{e.setState({show_console_error_log:!0})})}))}_setFocusedItem(e){this.setState({console_item_with_focus:e})}_zoomConsole(){this.props.setMainStateValue("console_is_zoomed",!0)}_unzoomConsole(){this.props.setMainStateValue("console_is_zoomed",!1)}_expandConsole(){this.props.setMainStateValue("console_is_shrunk",!1)}_shrinkConsole(){this.props.setMainStateValue("console_is_shrunk",!0)}_toggleExports(){this.props.setMainStateValue("show_exports_pane",!this.props.show_exports_pane)}_setConsoleItemValue(e,t,s){let o=this.get_console_item_entry(e);o[t]=s,this.replace_console_item_entry(e,o)}replace_console_item_entry(e,t){let s=[...this.props.console_items],o=this._consoleItemIndex(e);s.splice(o,1,t),this.props.setMainStateValue("console_items",s)}get_console_item_entry(e){return Object.assign({},this.props.console_items[this._consoleItemIndex(e)])}_consoleItemIndex(e){let t=0;for(let s of this.props.console_items){if(s.unique_id==e)return t;++t}return-1}_resortConsoleItems(e){let t=[];for(let s of e){let e=this.get_console_item_entry(s);t.push(e)}this.props.setMainStateValue("console_items",t)}_goToNextCell(e){let t=this._consoleItemIndex(e)+1;if(t==this.props.console_items.length)return;let s=this.props.console_items[t].unique_id;this._setConsoleItemValue(s,"set_focus",!0)}_closeConsoleItem(e){let t=this._consoleItemIndex(e),s=[...this.props.console_items];s.splice(t,1),this.props.setMainStateValue("console_items",s)}_addConsoleEntry(e,t=!0,s=!1){let o;e.set_focus=s,o=null==this.state.console_item_with_focus?this.props.console_items.length:this._consoleItemIndex(this.state.console_item_with_focus)+1;let n=[...this.props.console_items];n.splice(o,0,e),this.props.setMainStateValue("console_items",n),t&&this.props.setMainStateValue("console_is_shrunk",!1)}_stopConsoleSpinner(e){let t=this.get_console_item_entry(e.console_id);t.show_spinner=!1,t.execution_count=e.execution_count,this.replace_console_item_entry(e.console_id,t)}_appendConsoleItemOutput(e){let t=this.get_console_item_entry(e.console_id).output_text;""!=t&&(t+="<br>"),this._setConsoleItemValue(e.console_id,"output_text",t+e.message)}_handleConsoleMessage(e){let t=this;({consoleLog:e=>t._addConsoleEntry(e.message,e.force_open),stopConsoleSpinner:this._stopConsoleSpinner,consoleCodePrint:this._appendConsoleItemOutput})[e.console_message](e)}_bodyHeight(){return this.state.mounted?this.props.console_available_height-$(this.header_ref.current).outerHeight()-35:this.props.console_available_height-75}render(){let e="notclose bottom-heading-element",t="notclose bottom-heading-element bottom-heading-element-button";return React.createElement(l.Card,{bg:"light",id:"console-panel"},React.createElement(l.Card.Header,{id:"console-heading",ref:this.header_ref,className:"d-flex flex-row justify-content-between"},React.createElement("div",{id:"console-header-left",className:"d-flex flex-row  align-items-baseline"},this.props.console_is_shrunk&&React.createElement(o.a,{butclass:e,handleClick:this._expandConsole,style:{paddingRight:5,paddingTop:0},icon_class:"far fa-chevron-circle-right"}),!this.props.console_is_shrunk&&React.createElement(o.a,{butclass:e,handleClick:this._shrinkConsole,style:{paddingRight:5,paddingTop:0},icon_class:"far fa-chevron-circle-down"}),React.createElement("b",null,"Log"),React.createElement(o.a,{butclass:t,extra_glyph_text:"text",handleClick:this._addBlankText,icon_class:"far fa-font"}),React.createElement(o.a,{butclass:t,extra_glyph_text:"code",handleClick:this._addBlankCode,icon_class:"far fa-terminal"}),React.createElement(o.a,{butclass:t,handleClick:this._resetConsole,extra_glyph_text:"reset",icon_class:"far fa-sync"}),React.createElement(o.a,{butclass:t,extra_glyph_text:"clear",handleClick:this._clearConsole,icon_class:"far fa-trash"}),React.createElement(o.a,{butclass:t,extra_glyph_text:"log",handleClick:this._toggleConsoleLog,icon_class:"far fa-exclamation-triangle"}),React.createElement(o.a,{butclass:t,extra_glyph_text:"main",handleClick:this._toggleMainLog,icon_class:"far fa-exclamation-triangle"})),React.createElement("div",{id:"console-header-right",className:"d-flex flex-row  align-items-baseline"},React.createElement("button",{type:"button",className:e,onClick:this._toggleExports,style:{marginRight:12}},"exports"),!this.props.console_is_zoomed&&React.createElement(o.a,{butclass:e,handleClick:this._zoomConsole,icon_class:"far fa-expand-alt"}),this.props.console_is_zoomed&&React.createElement(o.a,{butclass:e,handleClick:this._unzoomConsole,icon_class:"far fa-compress-alt"}))),!this.props.console_is_shrunk&&React.createElement(l.Card.Body,{id:"console",ref:this.body_ref,style:{height:this._bodyHeight(),backgroundColor:"white"}},this.state.show_console_error_log&&React.createElement("pre",null,this.state.error_log_text),!this.state.show_console_error_log&&React.createElement(a.a,{id:"console-items-div",ElementComponent:p,key_field_name:"unique_id",item_list:this.props.console_items,handle:".console-sorter",resortFunction:this._resortConsoleItems,setConsoleItemValue:this._setConsoleItemValue,execution_count:0,handleDelete:this._closeConsoleItem,goToNextCell:this._goToNextCell,setFocus:this._setFocusedItem,addNewTextItem:this._addBlankText,addNewCodeItem:this._addBlankCode})))}}c.propTypes={console_items:PropTypes.array,console_is_shrunk:PropTypes.bool,console_is_zoomed:PropTypes.bool,show_exports_pane:PropTypes.bool,setMainStateValue:PropTypes.func,console_available_height:PropTypes.number,tsocket:PropTypes.object};class p extends React.Component{render(){return"text"==this.props.type?React.createElement(u,this.props):"code"==this.props.type?React.createElement(d,this.props):"fixed"==this.props.type?React.createElement(h,this.props):void 0}}class h extends React.Component{constructor(e){super(e),this.ce_summary0ref=React.createRef(),doBinding(this)}componentDidMount(){this.executeEmbeddedScripts()}componentDidUpdate(){this.executeEmbeddedScripts()}_toggleShrink(){this.props.setConsoleItemValue(this.props.unique_id,"am_shrunk",!this.props.am_shrunk)}_deleteMe(){this.props.handleDelete(this.props.unique_id)}_handleSummaryTextChange(e){this.props.setConsoleItemValue(this.props.unique_id,"summary_text",e.target.value)}executeEmbeddedScripts(){let e=$("#"+this.props.unique_id+" .log-panel-body script").toArray();for(let t of e)try{window.eval(t.text)}catch(e){}}render(){let e={__html:this.props.console_text},t=this.props.am_shrunk?"log-panel log-panel-invisible fixed-log-panel":"log-panel log-panel-visible fixed-log-panel";this.props.is_error&&(t+=" error-log-panel");return React.createElement(l.Card,{className:t,id:this.props.unique_id},React.createElement(l.Card.Header,null,React.createElement("div",{className:"button-div shrink-expand-div"},!this.props.am_shrunk&&React.createElement(o.a,{butclass:"notclose shrink-log-button",icon_class:"fas fa-chevron-circle-down",handleClick:this._toggleShrink}),this.props.am_shrunk&&React.createElement(o.a,{butclass:"notclose expand-log-button",icon_class:"fas fa-chevron-circle-right",handleClick:this._toggleShrink})),React.createElement("div",{className:"button-div"},React.createElement(o.a,{butclass:"notclose close-log-button",handleClick:this._deleteMe,icon_class:"fas fa-trash-alt"}))),this.props.am_shrunk&&React.createElement(i,{html:this.props.summary_text,onChange:this._handleSummaryTextChange,disabled:!1,className:"log-panel-summary",style:{},tagName:"div",innerRef:this.ce_summary_ref}),!this.props.am_shrunk&&React.createElement("div",{className:"log-panel-body"},React.createElement("div",{dangerouslySetInnerHTML:e}),React.createElement("span",{className:"fas fa-align-justify console-sorter pt-2 pl-1"})))}}h.propTypes={unique_id:PropTypes.string,is_error:PropTypes.bool,am_shrunk:PropTypes.bool,summary_text:PropTypes.string,console_text:PropTypes.string,setConsoleItemValue:PropTypes.func,handleDelete:PropTypes.func};class d extends React.Component{constructor(e){super(e),doBinding(this),this.cmobject=null}componentDidMount(){this.props.set_focus&&(null!=this.cmobject&&(this.cmobject.focus(),this.cm_object.setCursor({line:0,ch:0})),this.props.setConsoleItemValue(this.props.unique_id,"set_focus",!1));let e=this;null!=this.cmobject&&(this.cmobject.on("focus",()=>{e.props.setFocus(this.props.unique_id)}),this.cmobject.on("blur",()=>{e.props.setFocus(null)})),this.executeEmbeddedScripts()}componentDidUpdate(){this.executeEmbeddedScripts(),this.props.set_focus&&(null!=this.cmobject&&(this.cmobject.focus(),this.cmobject.setCursor({line:0,ch:0})),this.props.setConsoleItemValue(this.props.unique_id,"set_focus",!1))}executeEmbeddedScripts(){let e=$("#"+this.props.unique_id+" .log-code-output script").toArray();for(let t of e)try{window.eval(t.text)}catch(e){}}_runMe(e=!1){this._startMySpinner();let t=this;postWithCallback(main_id,"exec_console_code",{the_code:this.props.console_text,console_id:this.props.unique_id},(function(){e&&t.props.goToNextCell(t.props.unique_id)}))}_startMySpinner(){this.props.setConsoleItemValue(this.props.unique_id,"show_spinner",!0)}_stoptMySpinner(){this.props.setConsoleItemValue(this.props.unique_id,"show_spinner",!1)}_handleChange(e){this.props.setConsoleItemValue(this.props.unique_id,"console_text",e)}_handleSummaryTextChange(e){this.props.setConsoleItemValue(this.props.unique_id,"summary_text",e.target.value)}_toggleShrink(){this.props.setConsoleItemValue(this.props.unique_id,"am_shrunk",!this.props.am_shrunk)}_deleteMe(){this.props.handleDelete(this.props.unique_id)}_clearOutput(){this.props.setConsoleItemValue(this.props.unique_id,"output_text","")}_extraKeys(){let e=this;return{"Ctrl-Enter":()=>e._runMe(!0),"Cmd-Enter":()=>e._runMe(!0),"Ctrl-Alt-C":e.props.addNewCodeItem,"Ctrl-Alt-T":e.props.addNewTextItem}}_setCMObject(e){this.cmobject=e}render(){let e=this.props.am_shrunk?"log-panel log-panel-invisible":"log-panel log-panel-visible",t={__html:this.props.output_text};return React.createElement(l.Card,{className:e,id:this.props.unique_id},React.createElement(l.Card.Header,null,React.createElement("div",{className:"button-div shrink-expand-div"},!this.props.console_is_shrunk&&React.createElement(o.a,{butclass:"notclose",icon_class:"fas fa-chevron-circle-down",handleClick:this._toggleShrink}),this.props.console_is_shrunk&&React.createElement(o.a,{butclass:"notclose",icon_class:"fas fa-chevron-circle-right",handleClick:this._toggleShrink})),React.createElement("div",{className:"button-div"},React.createElement(o.a,{butclass:"notclose",handleClick:this._deleteMe,icon_class:"fas fa-trash-alt"})),React.createElement("div",{className:"button-div"},React.createElement(o.a,{butclass:"notclose",handleClick:this._runMe,icon_class:"fas fa-step-forward"})),React.createElement("div",{className:"button-div spinner-div"},!this.props.show_spinner&&React.createElement(o.a,{butclass:"notclose",handleClick:this._clearOutput,icon_class:"fas fa-eraser"}),this.props.show_spinner&&React.createElement("button",{type:"button",className:"notclose"},React.createElement("span",{className:"console-spin-place"},React.createElement("span",{className:"loader-console"}))))),this.props.am_shrunk&&React.createElement(i,{html:this.props.summary_text,onChange:this._handleSummaryTextChange,disabled:!1,className:"log-panel-summary",style:{},tagName:"div",innerRef:this.ce_summary_ref}),!this.props.am_shrunk&&React.createElement(React.Fragment,null,React.createElement("div",{className:"d-flex flex-row"},React.createElement("div",{className:"log-panel-body console-code"},React.createElement(n.a,{handleChange:this._handleChange,code_content:this.props.console_text,setCMObject:this._setCMObject,extraKeys:this._extraKeys(),saveMe:null}),React.createElement("span",{className:"fas fa-align-justify console-sorter pt-2 pl-1"})),React.createElement("div",{className:"execution-counter"},"[",String(this.props.execution_count),"]")),React.createElement("div",{className:"log-code-output",dangerouslySetInnerHTML:t})))}}d.propTypes={unique_id:PropTypes.string,am_shrunk:PropTypes.bool,set_focus:PropTypes.bool,show_spinner:PropTypes.bool,summary_text:PropTypes.string,console_text:PropTypes.string,output_text:PropTypes.string,execution_count:PropTypes.number,setConsoleItemValue:PropTypes.func,handleDelete:PropTypes.func,addNewTextItem:PropTypes.func,addNewCodeItem:PropTypes.func,goToNextCell:PropTypes.func,setFocus:PropTypes.func};class u extends React.Component{constructor(e){super(e),doBinding(this,"_"),this.ce_ref=React.createRef(),this.ce_summary_ref=React.createRef(),this.converter=new showdown.Converter}componentDidMount(){this.props.set_focus&&(this.props.show_markdown?this._hideMarkdown():($(this.ce_ref.current).focus(),this.props.setConsoleItemValue(this.props.unique_id,"set_focus",!1)))}componentDidUpdate(){this.props.set_focus&&(this.props.show_markdown?this._hideMarkdown():($(this.ce_ref.current).focus(),this.props.setConsoleItemValue(this.props.unique_id,"set_focus",!1)))}get hasOnlyWhitespace(){return!this.props.console_text.trim().length}_showMarkdown(){this.hasOnlyWhitespace||this.props.setConsoleItemValue(this.props.unique_id,"show_markdown",!0)}_hideMarkdown(){this.props.setConsoleItemValue(this.props.unique_id,"show_markdown",!1)}_handleChange(e){this.props.setConsoleItemValue(this.props.unique_id,"console_text",e.target.value)}_handleSummaryTextChange(e){this.props.setConsoleItemValue(this.props.unique_id,"summary_text",e.target.value)}_toggleShrink(){this.props.setConsoleItemValue(this.props.unique_id,"am_shrunk",!this.props.am_shrunk)}_deleteMe(){this.props.handleDelete(this.props.unique_id)}_handleKeyDown(e){"Tab"==e.key&&(this.props.goToNextCell(this.props.unique_id),e.preventDefault())}_gotEnter(){this.props.goToNextCell(this.props.unique_id),this._showMarkdown()}render(){let e=!this.hasOnlyWhitespace&&this.props.show_markdown;var t;e&&(t=this.converter.makeHtml(this.props.console_text));let s=[[["ctrl+enter","command+enter"],this._gotEnter]],n={__html:t},a=this.props.am_shrunk?"log-panel log-panel-invisible text-log-item":"log-panel log-panel-visible text-log-item";return React.createElement(l.Card,{className:a,id:this.props.unique_id},React.createElement(l.Card.Header,null,React.createElement("div",{className:"button-div shrink-expand-div"},!this.props.am_shrunk&&React.createElement(o.a,{butclass:"notclose",icon_class:"fas fa-chevron-circle-down",handleClick:this._toggleShrink}),this.props.am_shrunk&&React.createElement(o.a,{butclass:"notclose",icon_class:"fas fa-chevron-circle-right",handleClick:this._toggleShrink})),React.createElement("div",{className:"button-div"},React.createElement(o.a,{butclass:"notclose",handleClick:this._deleteMe,icon_class:"fas fa-trash-alt"})),React.createElement("div",{className:"button-div"},React.createElement(o.a,{butclass:"notclose",handleClick:this._showMarkdown,icon_class:"fas fa-font"}))),this.props.am_shrunk&&React.createElement(i,{html:this.props.summary_text,onChange:this._handleSummaryTextChange,disabled:!1,className:"log-panel-summary",style:{},tagName:"div",innerRef:this.ce_summary_ref}),!this.props.am_shrunk&&React.createElement("div",{className:"log-panel-body text-box",style:{display:"inline-flex"}},!e&&React.createElement(i,{html:this.props.console_text,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onFocus:()=>this.props.setFocus(this.props.unique_id),onBlur:()=>this.props.setFocus(null),disabled:!1,className:"console-text",style:{},tagName:"div",innerRef:this.ce_ref}),e&&React.createElement("div",{className:"text-panel-output",onClick:this._hideMarkdown,dangerouslySetInnerHTML:n}),React.createElement("span",{className:"fas fa-align-justify console-sorter pt-2 pl-1"})),React.createElement(r,{target_ref:this.ce_ref,bindings:s}))}}u.propTypes={unique_id:PropTypes.string,am_shrunk:PropTypes.bool,set_focus:PropTypes.bool,show_markdown:PropTypes.bool,summary_text:PropTypes.string,console_text:PropTypes.string,setConsoleItemValue:PropTypes.func,handleDelete:PropTypes.func,goToNextCell:PropTypes.func,tsocket:PropTypes.object,setFocus:PropTypes.func}},,,function(e,t,s){"use strict";s.r(t);var o=s(5),n=s(13),a=s(4),r=s(14);const i=17,l=35;let c,p;function h(e){var t;(window.is_project||window.opening_from_temp_id)&&(t=e.interface_state);let s=document.querySelector("#main-root");window.is_project||window.opening_from_temp_id?ReactDOM.render(React.createElement(u,{is_project:!0,interface_state:t}),s):ReactDOM.render(React.createElement(u,{is_project:!1,interface_state:null}),s)}window.dirty=!1;const d=["console_items"];class u extends React.Component{constructor(e){if(super(e),doBinding(this),this.state={mounted:!1,console_items:[],usable_width:window.innerWidth-2*i-30,usable_height:window.innerHeight-l},this.props.is_project)for(let e of d)this.state[e]=this.props.interface_state[e]}componentDidMount(){this.setState({mounted:!0}),window.addEventListener("resize",this._update_window_dimensions),document.title=window.is_project?window._project_name:"New Notebook",stopSpinner()}_update_window_dimensions(){this.setState({usable_width:window.innerWidth-2*i-30,usable_height:window.innerHeight-l})}_setMainStateValue(e,t,s=null){let o={};o[e]=t,this.setState(o,s)}_broadcast_event_to_server(e,t,s){t.main_id=window.main_id,t.event_name=e,postWithCallback(main_id,"distribute_events_stub",t,s)}get interface_state(){let e={};for(let t of d)e[t]=this.state[t];return e}render(){let e=React.createElement(React.Fragment,null,React.createElement(n.c,{console_items:this.state.console_items,interface_state:this.interface_state,changeCollection:null,disabled_items:window.is_project?[]:["Save"],hidden_items:["Open Console as Notebook","Export Table as Collection","change collection"]}));return React.createElement(React.Fragment,null,React.createElement(o.a,{is_authenticated:window.is_authenticated,user_name:window.username,menus:e}),React.createElement(r.a,{console_items:this.state.console_items,console_is_shrunk:!1,console_is_zoomed:!0,show_exports_pane:!1,setMainStateValue:this._setMainStateValue,console_available_height:this.state.usable_height-50,tsocket:c}))}}u.propTypes={console_items:PropTypes.array,console_component:PropTypes.object,is_project:PropTypes.bool,interface_state:PropTypes.object};class _ extends a.a{initialize_socket_stuff(){this.socket.emit("join",{room:user_id}),this.socket.on("handle-callback",handleCallback),this.socket.on("close-user-windows",(function(e){postAsyncFalse("host","remove_mainwindow_task",{main_id:main_id}),e.originator!=main_id&&window.close()})),this.socket.on("stop-heartbeat",(function(e){clearInterval(heartbeat_timer)})),this.socket.on("window-open",(function(e){window.open($SCRIPT_ROOT+"/load_temp_page/"+e.the_id)})),this.socket.on("notebook-open",(function(e){window.open($SCRIPT_ROOT+"/open_notebook/"+e.the_id)})),this.socket.on("doFlash",(function(e){doFlash(e)})),this.socket.on("show-status-msg",(function(e){statusMessage(e)})),this.socket.on("clear-status-msg",(function(){clearStatusMessage()})),this.socket.on("stop-status-spinner",(function(){stopSpinner()}))}}console.log("entering _notebook_main"),p=get_ppi(),(c=new _("main",5e3)).socket.emit("join-main",{room:main_id},(function(){!function(){let e={doc_type:"notebook",base_figure_url:window.base_figure_url,use_ssl:window.use_ssl,user_id:window.user_id,library_id:window.main_id,ppi:p};window.is_totally_new?(console.log("about to intialize"),postWithCallback(window.main_id,"initialize_mainwindow",e)):(window.is_jupyter?(e.doc_type="jupyter",e.project_name=window._project_name):is_project?e.project_name=window._project_name:e.unique_id=window.temp_data_id,postWithCallback(main_id,"initialize_project_mainwindow",e))}()})),c.socket.on("finish-post-load",h)}]);