!function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=25)}([function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return o})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return p})),s.d(t,"e",(function(){return c}));let n={};function a(e){let t=e.callback_id,s=n[t];delete n[t],s(e.response_data)}function r(e,t,s){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json",success:s})}function i(e,t){return new Promise((function(s,n){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json",success:e=>{e.success&&s(e),n(e)}})}))}function o(e,t){return new Promise((function(s,n){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,type:"POST",data:t,contentType:!1,processData:!1,success:e=>{e.success&&s(e),n(e)}})}))}function l(e,t,s,a){const r={source:"client",dest:e,task_type:t,task_data:s,response_data:null,main_id:main_id,expiration:null};if(void 0!==a&&null!=a){const e=guid();n[e]=a,r.callback_id=e,r.callback_type="callback_no_context"}else r.callback_id=null,r.callback_type="no_callback";$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(r),dataType:"json"})}function c(e,t,s){const n={source:"client",dest:e,task_type:t,task_data:s,response_data:null,main_id:main_id,callback_id:null,callback_type:"no_callback",expiration:null};$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!1,data:JSON.stringify(n),dataType:"json"})}function p(e,t,s,a){const r={source:"client",dest:e,task_type:t,task_data:s,response_data:null,expiration:null};if(void 0!==a){const e=guid();n[e]=a,r.callback_id=e,r.callback_type="callback_no_context"}else r.callback_id=null,r.callback_type="no_callback";$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(r),dataType:"json"})}},function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"e",(function(){return p})),s.d(t,"a",(function(){return h}));var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a=blueprint;const r=a.Toaster.create({className:"recipe-toaster",position:a.Position.TOP,autoFocus:!0}),i={"alert-success":"Success","alert-warning":"Warning","alert-info":null};function o(e){let t;t=e.hasOwnProperty("alert_type")?i[e.alert_type]:null,r.show({message:e.message,intent:t})}function l(e){o(e)}function c(e){stopSpinner(),clearStatusMessage(),o(e)}function p(e,t=null){return class extends React.Component{constructor(e){super(e),doBinding(this),this.tsocket=t,this.state={show_spinner:!1,status_message:null,spinner_size:this.props.spinner_size?this.props.spinner_size:25}}componentDidMount(){this.tsocket&&(this.tsocket.socket.on("stop-spinner",this._stopSpinner),this.tsocket.socket.on("start-spinner",this._startSpinner),this.tsocket.socket.on("show-status-msg",this._statusMessageFromData),this.tsocket.socket.on("clear-status-msg",this._clearStatusMessage))}_stopSpinner(){this.setState({show_spinner:!1})}_startSpinner(){this.setState({show_spinner:!0})}_clearStatusMessage(){this.setState({status_message:null})}_clearStatus(){this.setState({show_spinner:!1,status_message:null})}_statusMessage(e,t=null){this.setState({status_message:e},()=>{t&&setTimeout(self._clearStatusMessage,1e3*data.timeout)})}_statusMessageFromData(e){let t=this;this.setState({status_message:e.message},()=>{e.hasOwnProperty("timeout")&&null!=e.timeout&&setTimeout(t._clearStatusMessage,1e3*e.timeout)})}_setStatus(e){this.setState(e)}render(){return React.createElement(React.Fragment,null,React.createElement(e,n({},this.props,{startSpinner:this._startSpinner,stopSpinner:this._stopSpinner,clearStatus:this._clearStatus,clearStatusMessage:this._clearStatus,statusMessage:this._statusMessage,setStatus:this._setStatus})),React.createElement(h,this.state))}}}class h extends React.Component{render(){return React.createElement("div",{className:"d-flex flex-row",style:{position:"absolute",bottom:10,marginLeft:10}},this.props.show_spinner&&React.createElement(a.Spinner,{size:20}),this.props.status_message&&React.createElement("div",{className:"d-flex flex-column justify-content-around",style:{marginLeft:10}},React.createElement("div",{id:"status-msg-area",className:"bp3-ui-text"},this.props.status_message)))}}h.propTypes={show_spinner:PropTypes.bool,status_message:PropTypes.string,spinner_size:PropTypes.number},h.defaultProps={show_spinner:!1,status_message:null,spinner_size:25}},function(e,t,s){"use strict";s.d(t,"d",(function(){return l})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return r}));var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};const a=15,r=40,i=50,o=50;function l(){return{usable_width:window.innerWidth-2*a,usable_height:window.innerHeight-r-o,body_height:window.innerHeight-r}}const c=React.createContext({available_height:500,available_width:500});class p extends React.Component{constructor(e){super(e),this.dref=React.createRef(),this.state={mounted:!1,availableHeight:this.props.parentHeight-i,availableWidth:this.props.parentWidth-i,previousParentHeight:this.props.parentHeight,previousParentWidth:this.props.parentWidth,indent_left:0},doBinding(this)}componentDidMount(){this.setState({mounted:!0},this._updateDimensions)}_dimensionsHaveChanged(){return this.props.parentHeight!=this.state.previousParentHeight||this.props.parentWidth!=this.state.previousParentWidth}componentDidUpdate(){this._dimensionsHaveChanged()&&this.setState({previousParentHeight:this.props.parentHeight,previousParentWidth:this.props.parentWidth},this._updateDimensions)}_updateDimensions(){}render(){var e=this.props.component;let t=Object.assign({},this.props.div_style);if(this.props.am_outer&&(t.position="absolute",t.left=a),this.props.apply_dimensions_to_div&&(t=Object.assign({width:this.state.availableWidth,height:this.state.availableHeight},t)),this.props.component)return React.createElement(React.Fragment,null,React.createElement("div",{ref:this.dref,style:t,className:"sizer"},React.createElement(e,n({available_height:this.state.availableHeight,available_width:this.state.availableWidth},this.props))));{let e={available_height:this.state.availableHeight,available_width:this.state.availableWidth};return React.createElement(React.Fragment,null,React.createElement("div",{ref:this.dref,style:t,className:"sizer"}),React.createElement(c.Provider,{value:e},this.props.children))}}}p.propTypes={parentHeight:PropTypes.number,parentWidth:PropTypes.number,component:PropTypes.func,bottom_ref:PropTypes.object,right_ref:PropTypes.object,am_outer:PropTypes.bool,div_style:PropTypes.object,apply_dimensions_to_div:PropTypes.bool},p.defaultProps={bottom_ref:null,right_ref:null,component:null,am_outer:!1,div_style:{},apply_dimensions_to_div:!1}},function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return c})),s.d(t,"c",(function(){return o}));var n=blueprint;class a extends React.Component{constructor(e){super(e),doBinding(this);let t=this.props.default_value;for(var s=1;this.name_exists(t);)s+=1,t=this.props.default_value+String(s);this.state={show:!1,current_value:t,checkbox_states:{},warning_text:""}}_changeHandler(e){this.setState({current_value:e.target.value})}_checkbox_change_handler(e){e.target.checked;let t=Object.assign({},this.state.checkbox_states);t[e.target.id]=e.target.checked,this.setState({checkbox_states:t})}componentDidMount(){if(this.setState({show:!0}),null!=this.props.checkboxes&&0!=this.props.checkboxes.length){let e={};for(let t of this.props.checkboxes)e[t.id]=!1;this.setState({checkbox_states:e})}}name_exists(e){return this.props.existing_names.indexOf(e)>-1}_submitHandler(e){let t;""==this.state.current_value?(t="An empty name is not allowed here.",this.setState({warning_text:t})):this.name_exists(this.state.current_value)?(t="That name already exists",this.setState({warning_text:t})):(this.setState({show:!1}),this.props.handleSubmit(this.state.current_value,this.state.checkbox_states),this.props.handleClose())}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){let e=[];if(null!=this.props.checkboxes&&0!=this.props.checkboxes.length)for(let t of this.props.checkboxes){let s=React.createElement(n.Checkbox,{checked:this.state.checkbox_states[t.checkname],label:t.checktext,id:t.checkname,key:t.checkname,onChange:this._checkbox_change_handler});e.push(s)}return React.createElement(n.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,canEscapeKeyClose:!0},React.createElement("div",{className:n.Classes.DIALOG_BODY},React.createElement(n.FormGroup,{label:this.props.field_title,helperText:this.state.warning_text},React.createElement(n.InputGroup,{onChange:this._changeHandler,value:this.state.current_value})),0!=e.length&&e),React.createElement("div",{className:n.Classes.DIALOG_FOOTER},React.createElement("div",{className:n.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(n.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(n.Button,{intent:n.Intent.PRIMARY,onClick:this._submitHandler},"Submit"))))}}function r(e,t,s,n,r,i=null){void 0===r&&(r=[]);let o=document.querySelector("#modal-area");ReactDOM.render(React.createElement(a,{handleSubmit:s,handleClose:function(){ReactDOM.unmountComponentAtNode(o)},title:e,field_title:t,default_value:n,checkboxes:i,existing_names:r}),o)}a.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,field_title:PropTypes.string,default_value:PropTypes.string,existing_names:PropTypes.array,checkboxes:PropTypes.array},a.defaultProps={existing_names:[],default_value:"",checkboxes:null};class i extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1,value:null}}componentDidMount(){this.setState({show:!0,value:this.props.option_list[0]})}_handleChange(e){this.setState({value:e.target.value})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(this.state.value),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(n.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,canEscapeKeyClose:!0},React.createElement("div",{className:n.Classes.DIALOG_BODY},React.createElement(n.FormGroup,{title:this.props.select_label},React.createElement(n.HTMLSelect,{options:this.props.option_list,onChange:this._handleChange,value:this.state.value}))),React.createElement("div",{className:n.Classes.DIALOG_FOOTER},React.createElement("div",{className:n.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(n.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(n.Button,{intent:n.Intent.PRIMARY,onClick:this._submitHandler},"Submit"))))}}function o(e,t,s,n,a,r){let o=document.querySelector("#modal-area");ReactDOM.render(React.createElement(i,{handleSubmit:a,handleClose:function(){ReactDOM.unmountComponentAtNode(o)},title:e,select_label:t,submit_text:n,option_list:r,cancel_text:s}),o)}i.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,select_label:PropTypes.string,option_list:PropTypes.array,submit_text:PropTypes.string,cancel_text:PropTypes.string};class l extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1}}componentDidMount(){this.setState({show:!0})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(n.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,canEscapeKeyClose:!0},React.createElement("div",{className:n.Classes.DIALOG_BODY},React.createElement("p",null,this.props.text_body)),React.createElement("div",{className:n.Classes.DIALOG_FOOTER},React.createElement("div",{className:n.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(n.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(n.Button,{intent:n.Intent.PRIMARY,onClick:this._submitHandler},"Submit"))))}}function c(e,t,s,n,a){let r=document.querySelector("#modal-area");ReactDOM.render(React.createElement(l,{handleSubmit:a,handleClose:function(){ReactDOM.unmountComponentAtNode(r)},title:e,text_body:t,submit_text:n,cancel_text:s}),r)}confirmDialog.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,text_body:PropTypes.string,submit_text:PropTypes.string,cancel_text:PropTypes.string};(class extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1}}componentDidMount(){this.setState({show:!0})}_closeHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(n.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._closeHandler,canEscapeKeyClose:!0},React.createElement("div",{className:n.Classes.DIALOG_BODY},React.createElement("p",null,this.props.text_body)),React.createElement("div",{className:n.Classes.DIALOG_FOOTER},React.createElement("div",{className:n.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(n.Button,{onClick:this._closeHandler},"Okay"))))}}).propTypes={handleClose:PropTypes.func,title:PropTypes.string,text_body:PropTypes.string,close_text:PropTypes.string}},,function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=React.createContext({readOnly:!1})},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(1);class a{constructor(e,t){this.name_space=e,this.recInterval=null,this.retry_interval=t,this.connectme(),this.initialize_socket_stuff(),this.watchForDisconnect()}connectme(){use_ssl?this.socket=io.connect(`https://${document.domain}:${location.port}/${this.name_space}`):this.socket=io.connect(`http://${document.domain}:${location.port}/${this.name_space}`)}initialize_socket_stuff(){}watchForDisconnect(){let e=this;this.socket.on("disconnect",(function(){Object(n.b)({message:"lost server connection"}),e.socket.close(),e.recInterval=setInterval((function(){e.attemptReconnect()}),e.retry_interval)}))}attemptReconnect(){this.socket.connected?(clearInterval(this.recInterval),this.initialize_socket_stuff(),this.watchForDisconnect(),Object(n.b)({message:"reconnected to server"})):this.connectme()}}},function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));s(2);class n extends React.Component{constructor(e){super(e),this.left_pane_ref=React.createRef(),this.right_pane_ref=React.createRef(),this.top_ref=null==this.props.top_ref?React.createRef():this.props.top_ref,this.old_left_width=0,this.old_right_width=0,this.state=this.state={current_width_fraction:this.props.initial_width_fraction,mounted:!1}}componentDidMount(){this.turn_on_horizontal_resize(),window.addEventListener("resize",this.resize_to_window),this.setState({mounted:!0},()=>{this.props.handleSplitUpdate&&this.props.handleSplitUpdate(this.left_width,this.right_width,this.state.current_width_fraction)})}componentDidUpdate(){this.notifySplitUpate()}turn_on_horizontal_resize(){let e=this;$(this.left_pane_ref.current).resizable({handles:"e",resize:function(t,s){let n=1*s.size.width/e.props.available_width;s.position.left=s.originalPosition.left,e.update_width_fraction(n)}})}get left_width(){return this.props.available_width*this.state.current_width_fraction}get right_width(){return(1-this.state.current_width_fraction)*this.props.available_width}update_width_fraction(e){this.setState({current_width_fraction:e})}get width_has_changed(){return this.left_width!=this.old_left_width||this.right_width!=this.old_right_width}notifySplitUpate(){this.width_has_changed&&null!=this.props.handleSplitUpdate&&(this.old_left_width=this.left_width,this.old_right_width=this.right_width,this.props.handleSplitUpdate(this.left_width,this.right_width,this.state.current_width_fraction))}render(){let e={width:this.left_width,height:this.props.available_height,display:"flex",flexDirection:"column"},t={width:this.right_width,height:this.props.available_height,display:"flex",flexDirection:"column"};this.props.hide_me;return React.createElement("div",{className:"d-flex flex-row horizontal-panes",ref:this.props.top_ref},React.createElement("div",{ref:this.left_pane_ref,style:e,className:"res-viewer-resizer"},this.props.left_pane),React.createElement("div",{ref:this.right_pane_ref,style:t},this.props.right_pane))}}n.propTypes={available_width:PropTypes.number,available_height:PropTypes.number,left_pane:PropTypes.object,right_pane:PropTypes.object,handleSplitUpdate:PropTypes.func,initial_width_fraction:PropTypes.number,top_ref:PropTypes.object},n.defaultProps={handleSplitUpdate:null,initial_width_fraction:.5,hide_me:!1,left_margin:null,right_margin:null,top_ref:null};class a extends React.Component{constructor(e){super(e),this.top_pane_ref=React.createRef(),this.bottom_pane_ref=React.createRef(),this.old_bottom_height=0,this.old_top_height=0,this.state=this.state={current_height_fraction:this.props.initial_height_fraction,mounted:!1}}componentDidMount(){this.turn_on_vertical_resize(),this.setState({mounted:!0}),window.addEventListener("resize",this.resize_to_window)}componentDidUpdate(){this.notifySplitUpate()}turn_on_vertical_resize(){let e=this;$(this.top_pane_ref.current).resizable({handles:"s",resize:function(t,s){let n=1*s.size.height/e.props.available_height;e.update_height_fraction(n)}})}get top_height(){return this.props.available_height*this.state.current_height_fraction}get bottom_height(){return(1-this.state.current_height_fraction)*this.props.available_height}notifySplitUpate(){null!=this.props.handleSplitUpdate&&this.height_has_changed&&(this.old_top_height=this.top_height,this.old_bottom_height=this.bottom_height,this.props.handleSplitUpdate(this.top_height,this.bottom_height,this.state.current_height_fraction))}update_height_fraction(e){this.setState({current_height_fraction:e})}get height_has_changed(){return this.top_height!=this.old_top_height||this.bottom_height!=this.old_bottom_height}render(){let e={width:this.props.available_width,height:this.top_height,overflowY:"scroll"};this.props.hide_top&&(e.display="none");let t={width:this.props.available_width,height:this.bottom_height,overflowY:"scroll"};return React.createElement("div",{className:"d-flex flex-column"},React.createElement("div",{ref:this.top_pane_ref,style:e},this.props.top_pane),React.createElement("div",{ref:this.bottom_pane_ref,style:t},this.props.bottom_pane))}}a.propTypes={available_width:PropTypes.number,available_height:PropTypes.number,top_pane:PropTypes.object,hide_top:PropTypes.bool,bottom_pane:PropTypes.object,handleSplitUpdate:PropTypes.func,initial_height_fraction:PropTypes.number},a.defaultProps={handleSplitUpdate:null,initial_height_fraction:.5,hide_top:!1}},function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=blueprint;let a=$SCRIPT_ROOT+"/library",r=$SCRIPT_ROOT+"/repository",i=$SCRIPT_ROOT+"/account_info",o=$SCRIPT_ROOT+"/login";class l extends React.Component{handle_signout(){doSignOut(window.page_id)}getIntent(e){return this.props.selected==e?"primary":null}render(){let e=React.createElement(React.Fragment,null,React.createElement(n.Button,{icon:"home",minimal:!0,text:"My Resources",intent:this.getIntent("library"),onClick:()=>{window.open(a)}}),React.createElement(n.Button,{icon:"database",minimal:!0,text:"Repository",intent:this.getIntent("repository"),onClick:()=>{window.open(r)}}),React.createElement(n.Button,{icon:"settings",minimal:!0,text:this.props.user_name,intent:this.getIntent("account"),onClick:()=>{window.open(i)}}),React.createElement(n.Button,{icon:"log-out",minimal:!0,text:"Logout",intent:this.getIntent("logout"),onClick:this.handle_signout})),t=React.createElement(n.Button,{icon:"log-in",minimal:!0,text:"Login",intent:this.getIntent("login"),onClick:()=>{window.open(o)}});this.props.menus;return React.createElement(n.Navbar,null,React.createElement(n.Navbar.Group,{align:n.Alignment.LEFT},React.createElement(n.Navbar.Heading,null,React.createElement("img",{className:"mr-2",src:window.tactic_img_url,alt:"",width:"32 ",height:"32"}),"Tactic"),null!=this.props.menus&&React.createElement(React.Fragment,null,this.props.menus)),React.createElement(n.Navbar.Group,{align:n.Alignment.RIGHT},React.createElement(n.NavbarDivider,null),React.createElement(n.Button,{icon:"manual",minimal:!0,text:"docs",onClick:()=>{window.open("http://tactic.readthedocs.io/en/latest/index.html")}}),this.props.is_authenticated&&e,!this.props.is_authenticated&&t))}}function c(e=null){let t=document.querySelector("#navbar-root");ReactDOM.render(React.createElement(l,{is_authenticated:window.is_authenticated,selected:e,user_name:window.username}),t)}l.propTypes={is_authenticated:PropTypes.bool,img_url:PropTypes.string,user_name:PropTypes.string,menus:PropTypes.object,selected:PropTypes.string},l.defaultProps={menus:null,selected:null}},function(e,t,s){"use strict";s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return o}));var n=s(3),a=s(0);const r="btn-outline-secondary";var i=blueprint;function o(e){return React.createElement("div",{style:{marginTop:20}},React.createElement(h,{button_groups:e.button_groups}),React.createElement(u,{resource_name:e.resource_name,res_type:e.res_type}))}class l extends React.Component{constructor(e){super(e)}render(){return React.createElement(i.Button,{text:this.props.name_text,icon:this.props.icon_name,style:{flexDirection:"column",fontSize:8,padding:"5px 8px",width:42,height:42},large:!0,minimal:!1,onClick:this.props.click_handler,className:"bp-toolbar-button bp3-elevation-0"})}}l.propTypes={icon_name:PropTypes.string,click_handler:PropTypes.func,button_class:PropTypes.string,name_text:PropTypes.string,small_size:PropTypes.bool,intent:PropTypes.string},l.defaultProps={small_size:!0,intent:"regular"};class c extends React.Component{constructor(e){super(e),doBinding(this)}render(){let e=this.props.option_list.map((e,t)=>React.createElement(i.MenuItem,{key:e.opt_name,onClick:e.opt_func,icon:e.opt_icon,text:e.opt_name})),t=React.createElement(i.Menu,null,e," ");return React.createElement(i.ButtonGroup,null,React.createElement(i.Popover,{content:t},React.createElement(i.Button,{id:this.props.name,text:this.props.name,icon:this.props.icon_name})))}}c.propTypes={button_class:PropTypes.string,name:PropTypes.string,icon_name:PropTypes.string,option_list:PropTypes.array,small_size:PropTypes.bool},c.defaultProps={small_size:!0};class p extends React.Component{constructor(e){super(e),doBinding(this),this.state={file_list:null,hasSelection:!1,the_text:"Choose file..."}}_handleFileChange(e){let t,s=e.target.files;0!=s.length&&(t=1==s.length?s[0].name:"<multiple>",this.setState({file_list:s,hasSelection:!0,the_text:t}))}_do_submit(e){e.preventDefault(),this.props.click_handler(this.state.file_list)}render(){return React.createElement(React.Fragment,null,React.createElement(i.Button,{text:this.props.name_text,icon:this.props.icon_name,style:{flexDirection:"column",fontSize:8,marginRight:4,width:42,height:42},large:!0,onClick:this._do_submit,className:"bp-toolbar-button"}),React.createElement(i.FileInput,{large:!1,text:this.state.the_text,style:{width:200,fontSize:12},hasSelection:this.state.hasSelection,onInputChange:this._handleFileChange,inputProps:{multiple:this.props.multiple}}))}}p.propTypes={click_handler:PropTypes.func,button_class:PropTypes.string,name_text:PropTypes.string,multiple:PropTypes.bool,icon_name:PropTypes.string,small_size:PropTypes.bool},p.defaultProps={small_size:!0,multiple:!1};class h extends React.Component{get_button_class(e){return null==e.button_class?r:e.button_class}render(){const e=[];var t=0;if(null!=this.props.popup_buttons&&0!=this.props.popup_buttons.length){let t=this.props.popup_buttons.map((e,t)=>React.createElement(i.ButtonGroup,{className:"toolbar-button-group",role:"group",key:"popup_group"+String(t)},React.createElement(c,{name:e.name,key:e.name,icon_name:e.icon_name,option_list:e.option_list,button_class:this.get_button_class(e)})));e.push(t)}for(let s of this.props.button_groups){let n=s.map((e,t)=>React.createElement(l,{name_text:e.name_text,icon_name:e.icon_name,click_handler:e.click_handler,intent:e.hasOwnProperty("intent")?e.intent:"regular",key:t}));e.push(React.createElement(i.ButtonGroup,{large:!0,style:{justifyContent:"center"},className:"toolbar-button-group",role:"group",key:t},n)),t+=1}if(null!=this.props.file_adders&&0!=this.props.file_adders.length){let s=this.props.file_adders.map((e,t)=>React.createElement(p,{icon_name:e.icon_name,click_handler:e.click_handler,button_class:this.get_button_class(e),name_text:e.name_text,multiple:e.multiple,key:t}));e.push(React.createElement(i.ButtonGroup,{style:{justifyContent:"center"},className:"toolbar-button-group",role:"group",key:t},s))}let s;return s=this.props.alternate_outer_style?this.props.alternate_outer_style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginBottom:10},React.createElement("div",{style:s},React.createElement("div",null,e))}}h.propTypes={button_groups:PropTypes.array,file_adders:PropTypes.array,popup_buttons:PropTypes.array,alternate_outer_style:PropTypes.object},h.defaultProps={file_adders:null,popup_buttons:null,alternate_outer_style:null};class u extends React.Component{constructor(e){super(e),this.state={current_name:e.resource_name},this.rename_me=this.rename_me.bind(this),this.RenameResource=null==this.props.handleRename?this.defaultRenameResource.bind(this):this.props.handleRename}rename_me(){console.log("entering rename");var e=this,t=this.props.res_type,s=this.state.current_name;$.getJSON($SCRIPT_ROOT+`get_resource_names/${t}`,(function(a){const r=a.resource_names,i=r.indexOf(s);i>=0&&r.splice(i,1),Object(n.b)(`Rename ${t}`,`Name for this ${t}`,e.RenameResource,s,r)}))}defaultRenameResource(e){const t={new_name:e};var s=this;Object(a.b)(`rename_resource/${this.props.res_type}/${this.state.current_name}`,t,(function(t){if(!t.success)return doFlash(t),!1;s.setState({current_name:e}),doFlash(t)}))}render(){let e=null==this.props.handleRename?this.state.current_name:this.props.resource_name;return React.createElement(i.Button,{id:"rename-button",large:!0,minimal:!0,style:{fontSize:20},tabIndex:-1,onClick:this.rename_me},React.createElement("h5",null,e))}}u.propTypes={resource_name:PropTypes.string,res_type:PropTypes.string,handleRename:PropTypes.func},u.defaultProps={handleRename:null}},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(0);class a extends React.Component{constructor(e){super(e),this.props.code_container_ref?this.code_container_ref=this.props.code_container_ref:this.code_container_ref=React.createRef(),this.handleChange=this.handleChange.bind(this),this.mousetrap=new Mousetrap,this.create_api()}createCMArea(e,t=1){let s=CodeMirror(e,{lineNumbers:!0,matchBrackets:!0,highlightSelectionMatches:!0,autoCloseBrackets:!0,indentUnit:4,mode:this.props.mode,readOnly:this.props.readOnly});1!=t&&s.setOption("firstLineNumber",t);let n=Object.assign(this.props.extraKeys,{Tab:function(e){let t=new Array(5).join(" ");e.replaceSelection(t)},"Ctrl-Space":"autocomplete"});return s.setOption("extraKeys",n),s.setSize(null,"100%"),s.on("change",this.handleChange),s}handleChange(e,t){this.props.handleChange(e.getDoc().getValue())}componentDidMount(){this.cmobject=this.createCMArea(this.code_container_ref.current,this.props.first_line_number),this.cmobject.setValue(this.props.code_content),this.create_keymap(),null!=this.props.setCMObject&&this.props.setCMObject(this.cmobject)}componentDidUpdate(){this.props.sync_to_prop&&this.cmobject.setValue(this.props.code_content),1!=this.props.first_line_number&&this.cmobject.setOption("firstLineNumber",this.props.first_line_number),this.cmobject.refresh()}searchCM(){CodeMirror.commands.find(this.cmobject)}clearSelections(){CodeMirror.commands.clearSearch(this.cmobject),CodeMirror.commands.singleSelection(this.cmobject)}create_api(){let e=this;Object(n.b)("get_api_dict",{},(function(t){e.api_dict_by_category=t.api_dict_by_category,e.api_dict_by_name=t.api_dict_by_name,e.ordered_api_categories=t.ordered_api_categories,e.api_list=[];for(let t of e.ordered_api_categories)for(let s of e.api_dict_by_category[t])e.api_list.push(s.name);CodeMirror.commands.autocomplete=function(t){t.showHint({hint:CodeMirror.hint.anyword,api_list:e.api_list,extra_autocomplete_list:e.extra_autocomplete_list})}}))}create_keymap(){let e=this;CodeMirror.keyMap.default.Esc=function(){e.clearSelections()};let t=CodeMirror.keyMap.default.hasOwnProperty("Cmd-S");this.mousetrap.bind(["escape"],(function(t){e.clearSelections(),t.preventDefault()})),t?(CodeMirror.keyMap.default["Cmd-S"]=function(){e.props.saveMe()},this.mousetrap.bind(["command+l"],(function(e){e.preventDefault()})),this.mousetrap.bind(["command+f"],(function(t){e.searchCM(),t.preventDefault()}))):(CodeMirror.keyMap.default["Ctrl-S"]=function(){e.props.saveMe()},this.mousetrap.bind(["ctrl+l"],(function(e){e.preventDefault()})),this.mousetrap.bind(["ctrl+f"],(function(t){e.searchCM(),t.preventDefault()})))}render(){let e={height:this.props.code_container_height,width:"100%",lineHeight:"21px"};return React.createElement("div",{id:"code-container",style:e,ref:this.code_container_ref})}}a.propTypes={handleChange:PropTypes.func,code_content:PropTypes.string,sync_to_prop:PropTypes.bool,mode:PropTypes.string,saveMe:PropTypes.func,readOnly:PropTypes.bool,first_line_number:PropTypes.number,extraKeys:PropTypes.object,setCMObject:PropTypes.func,code_container_ref:PropTypes.object,code_container_height:PropTypes.oneOfType([PropTypes.string,PropTypes.number])},a.defaultProps={first_line_number:1,code_container_height:"100%",sync_to_prop:!1,mode:"python",readOnly:!1,extraKeys:{},setCMObject:null,code_container_ref:null}},function(e,t,s){"use strict";s.d(t,"a",(function(){return m})),s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"d",(function(){return _}));var n=s(9),a=s(12),r=s(3),i=s(6),o=s(7),l=s(0),c=s(1),p=s(2),h=blueprint;class u extends i.a{initialize_socket_stuff(){this.socket.emit("join",{room:window.user_id}),this.socket.emit("join-main",{room:window.resource_viewer_id}),this.socket.on("handle-callback",l.a),this.socket.on("stop-spinner",stopSpinner),this.socket.on("start-spinner",startSpinner),this.socket.on("close-user-windows",e=>{e.originator!=window.resource_viewer_id&&window.close()}),this.socket.on("doFlash",(function(e){Object(c.b)(e)}))}}function d(e,t){function s(s){const n={res_type:e,res_name:t,new_res_name:s};Object(l.b)("copy_from_repository",n,c.c)}$.getJSON($SCRIPT_ROOT+`get_resource_names/${e}`,(function(n){showModal(`Import ${e}`,`New ${e} Name`,s,t,n.resource_names)}))}function _(e,t){function s(s){const n={res_type:e,res_name:t,new_res_name:s};Object(l.b)("send_to_repository",n,c.c)}$.getJSON($SCRIPT_ROOT+`get_repository_resource_names/${e}`,(function(n){Object(r.b)(`Share ${e}`,`New ${e} Name`,s,t,n.resource_names)}))}class m extends React.Component{constructor(e){super(e),doBinding(this),this.savedContent=e.the_content,this.savedTags=e.tags,this.savedNotes=e.notes;let t=this;this.mousetrap=new Mousetrap,this.mousetrap.bind(["command+s","ctrl+s"],(function(e){t.props.saveMe(),e.preventDefault()}));let s=Object(p.d)().usable_height,n=Object(p.d)().usable_width-170;this.state={available_height:s,available_width:n},this.state.mounted=!1}componentDidMount(){window.addEventListener("resize",this._update_window_dimensions),this.setState({mounted:!0}),this._update_window_dimensions(),stopSpinner()}_update_window_dimensions(){this.setState(Object(p.d)())}_handleResize(e){for(let t of e)if("resource-viewer-holder"==t.target.className)return void this.setState({available_width:t.contentRect.width,available_height:t.contentRect.height})}render(){let e=React.createElement(React.Fragment,null,React.createElement(n.b,{button_groups:this.props.button_groups,resource_name:this.props.resource_name,res_type:this.props.res_type}),this.props.children),t=React.createElement(a.a,{tags:this.props.tags,outer_style:{marginTop:100,marginLeft:20,overflow:"scroll",padding:15,backgroundColor:"#f5f8fa",marginRight:20},created:this.props.created,notes:this.props.notes,handleChange:this.props.handleStateChange,res_type:this.props.res_type});return React.createElement(h.ResizeSensor,{onResize:this._handleResize,observeParents:!0},React.createElement(o.a,{available_width:this.state.available_width,available_height:this.state.available_height,left_pane:e,right_pane:t,am_outer:!0}))}}m.propTypes={resource_name:PropTypes.string,res_type:PropTypes.string,button_groups:PropTypes.array,created:PropTypes.string,tags:PropTypes.array,notes:PropTypes.string,handleStateChange:PropTypes.func,meta_outer:PropTypes.string,saveMe:PropTypes.func,children:PropTypes.element}},function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(5),a=s(0),r=blueprint,i=bpselect;class o extends React.Component{constructor(e){super(e),doBinding(this)}_handleClick(){this.props.handleClick(this.props.item)}render(){return React.createElement(r.MenuItem,{text:this.props.item,key:this.props.item,onClick:this._handleClick,shouldDismissPopover:!0})}}function l(e,{modifiers:t,handleClick:s}){return React.createElement(o,{item:e,handleClick:s})}o.propTypes={item:PropTypes.string,handleClick:PropTypes.func};const c=(e,t,s)=>{return React.createElement(r.MenuItem,{icon:"add",key:"create_item",text:`Create "${e}"`,active:t,onClick:s,shouldDismissPopover:!1})};class p extends React.Component{constructor(e){super(e),doBinding(this),this.state={query:"",suggestions:[]}}componentDidMount(){let e=this,t={res_type:this.props.res_type,is_repository:!1};Object(a.c)("get_tag_list",t).then((function(t){let s=t.tag_list;e.setState({suggestions:s})}))}renderTag(e){return e}_handleDelete(e,t){let s=[...this.props.tags];s.splice(t,1),this.props.handleChange(s)}_handleAddition(e){let t=[...this.props.tags];t.push(e),this.props.handleChange(t)}_filterSuggestion(e,t){if(0==e.length)return!1;return new RegExp("^"+e).test(t)}_createItemFromQuery(e){return e}render(){return this.context.readOnly?React.createElement(r.TagInput,{values:this.props.tags,disabled:!0}):React.createElement(i.MultiSelect,{allowCreate:!0,openOnKeyDown:!0,createNewItemFromQuery:this._createItemFromQuery,createNewItemRenderer:c,resetOnSelect:!0,itemRenderer:l,selectedItems:this.props.tags,allowNew:!0,items:this.state.suggestions,itemPredicate:this._filterSuggestion,tagRenderer:this.renderTag,tagInputProps:{onRemove:this._handleDelete},onItemSelect:this._handleAddition})}}p.proptypes={tags:PropTypes.array,handleChange:PropTypes.func,res_type:PropTypes.string},p.contextType=n.a;class h extends React.Component{constructor(e){super(e),this.state={md_height:500,show_markdown:!this.hasOnlyWhitespace&&this.props.show_markdown_initial},doBinding(this),this.md_ref=React.createRef(),this.converter=new showdown.Converter,this.awaiting_focus=!1}getNotesField(){return $(this.notes_ref)}get hasOnlyWhitespace(){return!this.props.notes.trim().length}getMarkdownField(){return $(this.md_ref.current)}componentDidUpdate(e,t,s){this.awaiting_focus?(this.focusNotes(),this.awaiting_focus=!1):this.state.show_markdown||this.notes_ref==document.activeElement||this._showMarkdown()}focusNotes(){this.getNotesField().focus()}_hideMarkdown(){this.context.readOnly||(this.awaiting_focus=!0,this.setState({show_markdown:!1}))}_handleMyBlur(){this._showMarkdown(),null!=this.props.handleBlur&&this.props.handleBlur()}_showMarkdown(){this.hasOnlyWhitespace||this.setState({show_markdown:!0})}_notesRefHandler(e){this.notes_ref=e}render(){let e=!this.hasOnlyWhitespace&&this.state.show_markdown,t={display:e?"none":"block",fontSize:13},s={display:e?"block":"none",maxHeight:this.state.md_height,fontSize:13};var n;e&&(n=this.converter.makeHtml(this.props.notes));let a={__html:n};return React.createElement(React.Fragment,null,React.createElement(r.TextArea,{rows:"10",cols:"50",inputRef:this._notesRefHandler,growVertically:!1,onBlur:this._handleMyBlur,onChange:this.props.handleChange,value:this.props.notes,disabled:this.context.readOnly,style:t}),React.createElement("div",{ref:this.md_ref,style:s,onClick:this._hideMarkdown,className:"notes-field-markdown-output",dangerouslySetInnerHTML:a}))}}h.contextType=n.a,h.propTypes={notes:PropTypes.string,handleChange:PropTypes.func,show_markdown_initial:PropTypes.bool,handleBlur:PropTypes.func},h.defaultProps={handleBlur:null};class u extends React.Component{constructor(e){super(e),doBinding(this)}_handleNotesChange(e){this.props.handleChange({notes:e.target.value})}_handleTagsChange(e){this.props.handleChange({tags:e})}_handleTagsChangeNative(e){this.props.handleChange({tags:e})}_handleCategoryChange(e){this.props.handleChange({category:e.target.value})}render(){let e;if(null!=this.props.additional_metadata){e=[];for(let t in this.props.additional_metadata){let s=this.props.additional_metadata[t];if(Array.isArray(s))s=s.join(", ");else if("collection_name"==t){let e=/\.\w*$/.exec(s);null!=e&&(s=e[0].slice(1))}e.push(React.createElement(r.FormGroup,{label:t+": ",key:t,inline:!0},React.createElement(r.InputGroup,{disabled:!0,style:{color:"#394B59"},value:s})))}}return React.createElement(r.Card,{elevation:this.props.elevation,className:"combined-metadata",style:this.props.outer_style},null!=this.props.name&&React.createElement("h5",null,this.props.name),React.createElement(r.FormGroup,{label:"Tags"},React.createElement(p,{tags:this.props.tags,handleChange:this._handleTagsChange,res_type:this.props.res_type})),null!=this.props.category&&React.createElement(r.FormGroup,{label:"Category"},React.createElement(r.InputGroup,{onChange:this._handleCategoryChange,value:this.props.category})),React.createElement(r.FormGroup,{label:"Notes"},React.createElement(h,{notes:this.props.notes,handleChange:this._handleNotesChange,show_markdown_initial:!0,handleBlur:this.props.handleNotesBlur})),React.createElement(r.FormGroup,{label:"Created ",inline:!0},React.createElement(r.InputGroup,{disabled:!0,style:{color:"#394B59"},value:this.props.created})),null!=this.props.updated&&React.createElement(r.FormGroup,{label:"Updated: ",inline:!0},React.createElement(r.InputGroup,{disabled:!0,style:{color:"#394B59"},value:this.props.updated})),null!=this.props.additional_metadata&&e)}}u.propTypes={outer_style:PropTypes.object,elevation:PropTypes.number,res_type:PropTypes.string,name:PropTypes.string,created:PropTypes.string,updated:PropTypes.string,tags:PropTypes.array,notes:PropTypes.string,category:PropTypes.string,handleChange:PropTypes.func,handleNotesBlur:PropTypes.func,additional_metadata:PropTypes.object},u.defaultProps={outer_style:{marginLeft:20,overflow:"scroll",padding:15,backgroundColor:"#f5f8fa"},elevation:0,handleNotesBlur:null,category:null,name:null,updated:null,additional_metadata:null}},,,,,,,,,,,,,function(e,t,s){"use strict";s.r(t);var n=s(11),a=s(10),r=s(5),i=s(0),o=s(1),l=s(8),c=s(2);class p extends React.Component{constructor(e){super(e),doBinding(this),this.top_ref=React.createRef(),this.savedContent=e.the_content,this.savedTags=e.tags,this.savedNotes=e.notes;let t=this;window.onbeforeunload=function(e){if(t.dirty())return"Any unsaved changes will be lost."};let s=Object(c.d)().usable_height,n=Object(c.d)().usable_width;this.state={code_content:e.the_content,notes:e.notes,tags:e.tags,usable_width:n,usable_height:s}}componentDidMount(){window.addEventListener("resize",this._update_window_dimensions),this._update_window_dimensions(),stopSpinner()}_update_window_dimensions(){let e=window.innerWidth-2*c.b,t=window.innerHeight-c.a;this.top_ref&&this.top_ref.current?t-=this.top_ref.current.offsetTop:t-=c.c,this.setState({usable_height:t,usable_width:e})}get button_groups(){let e;e=this.props.is_repository?[[{name_text:"Copy",icon_name:"share",click_handler:()=>{Object(n.c)("code",this.props.resource_name)}}]]:[[{name_text:"Save",icon_name:"floppy-disk",click_handler:this.saveMe},{name_text:"Save as...",icon_name:"floppy-disk",click_handler:this.saveMeAs},{name_text:"Share",icon_name:"share",click_handler:()=>{Object(n.d)("code",this.props.resource_name)}}]];for(let t of e)for(let e of t)e.click_handler=e.click_handler.bind(this);return e}_handleCodeChange(e){this.setState({code_content:e})}_handleStateChange(e){this.setState(e)}render(){let e={readOnly:this.props.readOnly},t={width:this.state.usable_width,height:this.state.usable_height,paddingLeft:c.b};return React.createElement(r.a.Provider,{value:e},React.createElement("div",{className:"resource-viewer-holder",ref:this.top_ref,style:t},React.createElement(n.a,{res_type:"code",resource_name:this.props.resource_name,button_groups:this.button_groups,handleStateChange:this._handleStateChange,created:this.props.created,notes:this.state.notes,tags:this.state.tags,saveMe:this.saveMe,meta_outer:this.props.meta_outer},React.createElement(a.a,{code_content:this.state.code_content,handleChange:this._handleCodeChange,saveMe:this.saveMe,readOnly:this.props.readOnly}))))}saveMe(){const e=this.state.code_content,t=this.state.tags.join(" "),s=this.state.notes,n=this.state.tags,a={code_name:this.props.resource_name,new_code:e,tags:t,notes:s,user_id:window.user_id};let r=this;Object(i.f)("host","update_code_task",a,(function(t){t.success&&(r.savedContent=e,r.savedTags=n,r.savedNotes=s,t.timeout=2e3);return Object(o.b)(t),!1}))}saveMeAs(e){return Object(o.b)({message:"not implemented yet",timeout:10}),!1}dirty(){let e=this.state.code_content;const t=this.state.tags,s=this.state.notes;return!(e==this.savedContent&&t==this.savedTags&&s==this.savedNotes)}}p.propTypes={resource_name:PropTypes.string,the_content:PropTypes.string,created:PropTypes.string,tags:PropTypes.array,notes:PropTypes.string,readOnly:PropTypes.bool,is_repository:PropTypes.bool,meta_outer:PropTypes.string},function(){Object(l.b)();let e=window.is_repository?"repository_get_code_code":"get_code_code",t=window.is_repository?"grab_repository_metadata":"grab_metadata";new n.b("main",5e3),Object(i.c)(`${e}/${window.resource_name}`,{}).then((function(e){var s=e.the_content;let n={res_type:"code",res_name:window.resource_name,is_repository:!1},a=document.querySelector("#root");Object(i.c)(t,n).then((function(e){let t=""==e.tags?[]:e.tags.split(" ");ReactDOM.render(React.createElement(p,{resource_name:window.resource_name,the_content:s,created:e.datestring,tags:t,notes:e.notes,readOnly:window.read_only,is_repository:window.is_repository,meta_outer:"#right-div"}),a)})).catch((function(){ReactDOM.render(React.createElement(p,{resource_name:window.resource_name,the_content:s,created:"",tags:[],notes:"",readOnly:window.read_only,is_repository:window.is_repository,meta_outer:"#right-div"}),a)}))})).catch(o.b)}()}]);