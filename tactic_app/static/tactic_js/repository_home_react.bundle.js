!function(e){var t={};function s(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=20)}([function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return p})),s.d(t,"e",(function(){return c}));let a={};function n(e){let t=e.callback_id,s=a[t];delete a[t],s(e.response_data)}function i(e,t,s){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json",success:s})}function r(e,t){return new Promise((function(s,a){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json",success:e=>{e.success&&s(e),a(e)}})}))}function o(e,t){return new Promise((function(s,a){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,type:"POST",data:t,contentType:!1,processData:!1,success:e=>{e.success&&s(e),a(e)}})}))}function l(e,t,s,n){const i={source:"client",dest:e,task_type:t,task_data:s,response_data:null,main_id:main_id,expiration:null};if(void 0!==n&&null!=n){const e=guid();a[e]=n,i.callback_id=e,i.callback_type="callback_no_context"}else i.callback_id=null,i.callback_type="no_callback";$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(i),dataType:"json"})}function c(e,t,s){const a={source:"client",dest:e,task_type:t,task_data:s,response_data:null,main_id:main_id,callback_id:null,callback_type:"no_callback",expiration:null};$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!1,data:JSON.stringify(a),dataType:"json"})}function p(e,t,s,n){const i={source:"client",dest:e,task_type:t,task_data:s,response_data:null,expiration:null};if(void 0!==n){const e=guid();a[e]=n,i.callback_id=e,i.callback_type="callback_no_context"}else i.callback_id=null,i.callback_type="no_callback";$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(i),dataType:"json"})}},function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return c})),s.d(t,"c",(function(){return o}));var a=window.ReactBootstrap;class n extends React.Component{constructor(e){super(e),doBinding(this);let t=this.props.default_value;for(var s=1;this.name_exists(t);)s+=1,t=this.props.default_value+String(s);this.state={show:!1,current_value:t,checkbox_states:{},warning_text:""}}_changeHandler(e){this.setState({current_value:e.target.value})}_checkbox_change_handler(e){e.target.checked;let t=Object.assign({},this.state.checkbox_states);t[e.target.id]=e.target.checked,this.setState({checkbox_states:t})}componentDidMount(){if(this.setState({show:!0}),null!=this.props.checkboxes&&0!=this.props.checkboxes.length){let e={};for(let t of this.props.checkboxes)e[t.id]=!1;this.setState({checkbox_states:e})}}name_exists(e){return this.props.existing_names.indexOf(e)>-1}_submitHandler(e){let t;""==this.state.current_value?(t="An empty name is not allowed here.",this.setState({warning_text:t})):this.name_exists(this.state.current_value)?(t="That name already exists",this.setState({warning_text:t})):(this.setState({show:!1}),this.props.handleSubmit(this.state.current_value,this.state.checkbox_states),this.props.handleClose())}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){let e=[];if(null!=this.props.checkboxes&&0!=this.props.checkboxes.length)for(let t of this.props.checkboxes){let s=React.createElement(a.Form.Check,{type:"checkbox",label:t.checktext,id:t.checkname,key:t.checkname,onChange:this._checkbox_change_handler});e.push(s)}return React.createElement(a.Modal,{show:this.state.show},React.createElement(a.Modal.Header,{closeButton:!0},React.createElement(a.Modal.Title,null,this.props.title)),React.createElement(a.Modal.Body,null,React.createElement(a.Form.Group,{onSubmit:this._submitHandler},React.createElement(a.Form.Label,null,this.props.field_title),React.createElement(a.Form,null,React.createElement(a.Form.Control,{type:"text",onChange:this._changeHandler,value:this.state.current_value}))),0!=e.length&&e),React.createElement(a.Modal.Footer,null,React.createElement(a.Form.Text,{className:"text-muted"},this.state.warning_text),React.createElement(a.Button,{variant:"secondary",onClick:this._cancelHandler},"Cancel"),React.createElement(a.Button,{variant:"primary",onClick:this._submitHandler},"Submit")))}}function i(e,t,s,a,i,r=null){void 0===i&&(i=[]);let o=document.querySelector("#modal-area");ReactDOM.render(React.createElement(n,{handleSubmit:s,handleClose:function(){ReactDOM.unmountComponentAtNode(o)},title:e,field_title:t,default_value:a,checkboxes:r,existing_names:i}),o)}n.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,field_title:PropTypes.string,default_value:PropTypes.string,existing_names:PropTypes.array,checkboxes:PropTypes.array},n.defaultProps={existing_names:[],default_value:"",checkboxes:null};class r extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1,value:null}}componentDidMount(){this.setState({show:!0,value:this.props.option_list[0]})}_handleChange(e){this.setState({value:e.target.value})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(this.state.value),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(a.Modal,{show:this.state.show},React.createElement(a.Modal.Header,{closeButton:!0},React.createElement(a.Modal.Title,null,this.props.title)),React.createElement(a.Modal.Body,null,React.createElement(a.Form.Group,null,React.createElement(a.Form.Label,null,"Select Label"),React.createElement(a.Form.Control,{as:"select",onChange:this._handleChange,value:this.state.value},this.props.option_list.map((e,t)=>React.createElement("option",{key:t},e))))),React.createElement(a.Modal.Footer,null,React.createElement(a.Button,{variant:"secondary",onClick:this._cancelHandler},"Cancel"),React.createElement(a.Button,{variant:"primary",onClick:this._submitHandler},"Submit")))}}function o(e,t,s,a,n,i){let o=document.querySelector("#modal-area");ReactDOM.render(React.createElement(r,{handleSubmit:n,handleClose:function(){ReactDOM.unmountComponentAtNode(o)},title:e,select_label:t,submit_text:a,option_list:i,cancel_text:s}),o)}r.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,select_label:PropTypes.string,option_list:PropTypes.array,submit_text:PropTypes.string,cancel_text:PropTypes.string};class l extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1}}componentDidMount(){this.setState({show:!0})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(a.Modal,{show:this.state.show},React.createElement(a.Modal.Header,{closeButton:!0},React.createElement(a.Modal.Title,null,this.props.title)),React.createElement(a.Modal.Body,null,React.createElement("p",null,this.props.text_body)),React.createElement(a.Modal.Footer,null,React.createElement(a.Button,{variant:"secondary",onClick:this._cancelHandler},"Cancel"),React.createElement(a.Button,{variant:"primary",onClick:this._submitHandler},"Submit")))}}function c(e,t,s,a,n){let i=document.querySelector("#modal-area");ReactDOM.render(React.createElement(l,{handleSubmit:n,handleClose:function(){ReactDOM.unmountComponentAtNode(i)},title:e,text_body:t,submit_text:a,cancel_text:s}),i)}confirmDialog.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,text_body:PropTypes.string,submit_text:PropTypes.string,cancel_text:PropTypes.string}},,function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return n}));React.createContext({width:window.innerWidth,height:window.innerHeight});class a extends React.Component{constructor(e){super(e),this.left_pane_ref=React.createRef(),this.right_pane_ref=React.createRef(),this.old_left_width=0,this.old_right_width=0,this.state=this.state={current_width_fraction:this.props.initial_width_fraction,mounted:!1}}componentDidMount(){this.turn_on_horizontal_resize(),window.addEventListener("resize",this.resize_to_window),this.setState({mounted:!0})}componentDidUpdate(){this.notifySplitUpate()}turn_on_horizontal_resize(){let e=this;$(this.left_pane_ref.current).resizable({handles:"e",resize:function(t,s){let a=1*s.size.width/e.props.available_width;s.position.left=s.originalPosition.left,e.update_width_fraction(a)}})}get left_width(){return this.props.available_width*this.state.current_width_fraction}get right_width(){return(1-this.state.current_width_fraction)*this.props.available_width}update_width_fraction(e){this.setState({current_width_fraction:e})}get width_has_changed(){return this.left_width!=this.old_left_width||this.right_width!=this.old_right_width}notifySplitUpate(){this.width_has_changed&&null!=this.props.handleSplitUpdate&&(this.old_left_width=this.left_width,this.old_right_width=this.right_width,this.props.handleSplitUpdate(this.left_width,this.right_width,this.state.current_width_fraction))}render(){let e={width:this.left_width,height:this.props.available_height},t={width:this.right_width,height:this.props.available_height};this.props.hide_me;return React.createElement("div",{className:"d-flex flex-row"},React.createElement("div",{ref:this.left_pane_ref,style:e,className:"res-viewer-resizer"},this.props.left_pane),React.createElement("div",{ref:this.right_pane_ref,style:t},this.props.right_pane))}}a.propTypes={available_width:PropTypes.number,available_height:PropTypes.number,left_pane:PropTypes.object,right_pane:PropTypes.object,handleSplitUpdate:PropTypes.func,initial_width_fraction:PropTypes.number},a.defaultProps={handleSplitUpdate:null,initial_width_fraction:.5,hide_me:!1};class n extends React.Component{constructor(e){super(e),this.top_pane_ref=React.createRef(),this.bottom_pane_ref=React.createRef(),this.old_bottom_height=0,this.old_top_height=0,this.state=this.state={current_height_fraction:this.props.initial_height_fraction,mounted:!1}}componentDidMount(){this.turn_on_vertical_resize(),this.setState({mounted:!0}),window.addEventListener("resize",this.resize_to_window)}componentDidUpdate(){this.notifySplitUpate()}turn_on_vertical_resize(){let e=this;$(this.top_pane_ref.current).resizable({handles:"s",resize:function(t,s){let a=1*s.size.height/e.props.available_height;e.update_height_fraction(a)}})}get top_height(){return this.props.available_height*this.state.current_height_fraction}get bottom_height(){return(1-this.state.current_height_fraction)*this.props.available_height}notifySplitUpate(){null!=this.props.handleSplitUpdate&&this.height_has_changed&&(this.old_top_height=this.top_height,this.old_bottom_height=this.bottom_height,this.props.handleSplitUpdate(this.top_height,this.bottom_height,this.state.current_height_fraction))}update_height_fraction(e){this.setState({current_height_fraction:e})}get height_has_changed(){return this.top_height!=this.old_top_height||this.bottom_height!=this.old_bottom_height}render(){let e={width:this.props.available_width,height:this.top_height,borderBottom:"0.5px solid rgb(238, 238, 238)",overflowY:"scroll"};this.props.hide_top&&(e.display="none");let t={width:this.props.available_width,height:this.bottom_height,overflowY:"scroll"};return React.createElement("div",{className:"d-flex flex-column"},React.createElement("div",{ref:this.top_pane_ref,style:e},this.props.top_pane),React.createElement("div",{ref:this.bottom_pane_ref,style:t},this.props.bottom_pane))}}n.propTypes={available_width:PropTypes.number,available_height:PropTypes.number,top_pane:PropTypes.object,hide_top:PropTypes.bool,bottom_pane:PropTypes.object,handleSplitUpdate:PropTypes.func,initial_height_fraction:PropTypes.number},n.defaultProps={handleSplitUpdate:null,initial_height_fraction:.5,hide_top:!1}},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a=React.createContext({readOnly:!1})},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));class a{constructor(e,t){this.name_space=e,this.recInterval=null,this.retry_interval=t,this.connectme(),this.initialize_socket_stuff(),this.watchForDisconnect()}connectme(){use_ssl?this.socket=io.connect(`https://${document.domain}:${location.port}/${this.name_space}`):this.socket=io.connect(`http://${document.domain}:${location.port}/${this.name_space}`)}initialize_socket_stuff(){}watchForDisconnect(){let e=this;this.socket.on("disconnect",(function(){doFlash({message:"lost server connection"}),e.socket.close(),e.recInterval=setInterval((function(){e.attemptReconnect()}),e.retry_interval)}))}attemptReconnect(){this.socket.connected?(clearInterval(this.recInterval),this.initialize_socket_stuff(),this.watchForDisconnect(),doFlash({message:"reconnected to server"})):this.connectme()}}},function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var a=window.ReactBootstrap;let n=$SCRIPT_ROOT+"/library",i=$SCRIPT_ROOT+"/repository",r=$SCRIPT_ROOT+"/account_info",o=$SCRIPT_ROOT+"/login";class l extends React.Component{handle_signout(){doSignOut(window.page_id)}render(){let e=React.createElement(React.Fragment,null,React.createElement(a.Nav.Item,null,React.createElement(a.Nav.Link,{href:n},"My Resources")),React.createElement(a.Nav.Item,null,React.createElement(a.Nav.Link,{href:i},"Repository")),React.createElement(a.Nav.Item,null,React.createElement(a.Nav.Link,{href:r},this.props.user_name)),React.createElement(a.Nav.Item,null,React.createElement(a.Nav.Link,{onClick:this.handle_signout},"Logout"))),t=(React.createElement(a.Nav.Item,null,React.createElement(a.Nav.Link,{href:o},"Login")),null==this.props.menus?"justify-content-end":"justify-content-between");return React.createElement(a.Navbar,{bg:"light",expand:"lg",variant:"light"},React.createElement(a.Navbar.Brand,{href:"/"},React.createElement("img",{className:"mr-2",src:window.tactic_img_url,alt:"",width:"32 ",height:"32"}),"Tactic"),React.createElement(a.Navbar.Collapse,{id:"collapse-area",className:t},null!=this.props.menus&&React.createElement(a.Nav,{id:"menu-area"},this.props.menus),React.createElement(a.Nav,null,React.createElement(a.Nav.Link,{href:"http://tactic.readthedocs.io/en/latest/index.html"},"Docs"),this.props.is_authenticated&&e)))}}function c(){let e=document.querySelector("#navbar-root");ReactDOM.render(React.createElement(l,{is_authenticated:window.is_authenticated,user_name:window.username}),e)}l.propTypes={is_authenticated:PropTypes.bool,img_url:PropTypes.string,user_name:PropTypes.string,menus:PropTypes.object},l.defaultProps={menus:null}},function(e,t,s){"use strict";s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return o}));var a=s(1),n=s(0);const i="btn-outline-secondary";var r=window.ReactBootstrap;function o(e){return React.createElement("div",{style:{marginTop:20}},React.createElement(h,{button_groups:e.button_groups}),React.createElement(d,{resource_name:e.resource_name,res_type:e.res_type}))}class l extends React.Component{constructor(e){super(e)}render(){let e;return e=this.props.small_size?"btn btn-sm action-button toolbar-button-sm "+this.props.button_class:"btn btn-sm action-button toolbar-button "+this.props.button_class,React.createElement(r.Button,{onClick:this.props.click_handler,className:e},React.createElement("span",{className:"far button-icon fa-"+this.props.icon_name}),React.createElement("span",{className:"button-text"},this.props.name_text))}}l.propTypes={icon_name:PropTypes.string,click_handler:PropTypes.func,button_class:PropTypes.string,name_text:PropTypes.string,small_size:PropTypes.bool},l.defaultProps={small_size:!0};class c extends React.Component{constructor(e){super(e),doBinding(this)}render(){let e;e=this.props.small_size?"btn btn-sm action-button toolbar-button-sm "+this.props.button_class:"btn btn-sm action-button toolbar-button "+this.props.button_class;let t=this.props.option_list.map((e,t)=>React.createElement(r.Dropdown.Item,{key:e.opt_name,onClick:e.opt_func},e.opt_name));return React.createElement(r.Dropdown,null,React.createElement(r.Dropdown.Toggle,{id:this.props.name,className:e},React.createElement("span",{className:"far button-icon fa-"+this.props.icon_name}),React.createElement("span",{className:"button-text"},this.props.name)),React.createElement(r.Dropdown.Menu,null,t))}}c.propTypes={button_class:PropTypes.string,name:PropTypes.string,icon_name:PropTypes.string,option_list:PropTypes.array,small_size:PropTypes.bool},c.defaultProps={small_size:!0};class p extends React.Component{constructor(e){super(e),doBinding(this),this.state={file_list:null}}_handleFileChange(e){this.setState({file_list:e.target.files})}_do_submit(e){e.preventDefault(),this.props.click_handler(this.state.file_list)}render(){let e;e=this.props.small_size?"btn btn-sm action-button toolbar-button-sm "+this.props.button_class:"btn btn-sm action-button toolbar-button "+this.props.button_class;let t=React.createElement(r.Form.Control,{as:"input",type:"file",size:"sm",style:{width:250,fontSize:12},onChange:this._handleFileChange,className:"form-control-sm "+this.props.button_class,multiple:this.props.multiple});return React.createElement(r.Form,{inline:!0},React.createElement(r.Button,{onClick:this._do_submit,type:"submit",className:e},React.createElement("span",{className:"far button-icon fa-"+this.props.icon_name}),React.createElement("span",{className:"button-text"},this.props.name_text)),t)}}p.propTypes={click_handler:PropTypes.func,button_class:PropTypes.string,name_text:PropTypes.string,multiple:PropTypes.bool,icon_name:PropTypes.string,small_size:PropTypes.bool},p.defaultProps={small_size:!0,multiple:!1};class h extends React.Component{get_button_class(e){return null==e.button_class?i:e.button_class}render(){const e=[];var t=0;if(null!=this.props.popup_buttons&&0!=this.props.popup_buttons.length){let t=this.props.popup_buttons.map((e,t)=>React.createElement(r.ButtonGroup,{className:"toolbar-button-group",role:"group",key:"popup_group"+String(t)},React.createElement(c,{name:e.name,key:e.name,icon_name:e.icon_name,option_list:e.option_list,button_class:this.get_button_class(e)})));e.push(t)}for(let s of this.props.button_groups){let a=s.map((e,t)=>React.createElement(l,{name:e.name,icon_name:e.icon_name,click_handler:e.click_handler,button_class:this.get_button_class(e),name_text:e.name_text,key:t}));e.push(React.createElement(r.ButtonGroup,{className:"toolbar-button-group",role:"group",key:t},a)),t+=1}if(null!=this.props.file_adders&&0!=this.props.file_adders.length){let s=this.props.file_adders.map((e,t)=>React.createElement(p,{icon_name:e.icon_name,click_handler:e.click_handler,button_class:this.get_button_class(e),name_text:e.name_text,multiple:e.multiple,key:t}));e.push(React.createElement(r.ButtonGroup,{className:"toolbar-button-group",role:"group",key:t},s))}return React.createElement(r.ButtonToolbar,{className:"mb-2"},e)}}h.propTypes={button_groups:PropTypes.array,file_adders:PropTypes.array,popup_buttons:PropTypes.array},h.defaultProps={file_adders:null,popup_buttons:null};class d extends React.Component{constructor(e){super(e),this.state={current_name:e.resource_name},this.rename_me=this.rename_me.bind(this),this.RenameResource=null==this.props.handleRename?this.defaultRenameResource.bind(this):this.props.handleRename}rename_me(){console.log("entering rename");var e=this,t=this.props.res_type,s=this.state.current_name;$.getJSON($SCRIPT_ROOT+`get_resource_names/${t}`,(function(n){const i=n.resource_names,r=i.indexOf(s);r>=0&&i.splice(r,1),Object(a.b)(`Rename ${t}`,`Name for this ${t}`,e.RenameResource,s,i)}))}defaultRenameResource(e){const t={new_name:e};var s=this;Object(n.b)(`rename_resource/${this.props.res_type}/${this.state.current_name}`,t,(function(t){if(!t.success)return doFlash(t),!1;s.setState({current_name:e}),doFlash(t)}))}render(){let e=null==this.props.handleRename?this.state.current_name:this.props.resource_name;return React.createElement(r.Button,{id:"rename-button",className:"btn btn-outline-secondary res-name-button",onClick:this.rename_me},e)}}d.propTypes={resource_name:PropTypes.string,res_type:PropTypes.string,handleRename:PropTypes.func},d.defaultProps={handleRename:null}},,,function(e,t,s){"use strict";var a=s(4),n=s(0);function i(e){return React.createElement("button",{type:"button",className:e.classNames.selectedTag,title:"Click to remove tag",onClick:e.onDelete},React.createElement("span",{className:e.classNames.selectedTagName},e.tag.name))}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e};const o={position:"absolute",width:0,height:0,visibility:"hidden",overflow:"scroll",whiteSpace:"pre"},l=["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing"];class c extends React.Component{constructor(e){super(e),this.state={inputWidth:null}}componentDidMount(){this.props.autoresize&&(this.copyInputStyles(),this.updateInputWidth()),this.props.autofocus&&this.input.focus()}componentDidUpdate(){this.updateInputWidth()}copyInputStyles(){const e=window.getComputedStyle(this.input);l.forEach(t=>{this.sizer.style[t]=e[t]})}updateInputWidth(){let e;this.props.autoresize&&(e=Math.ceil(this.sizer.scrollWidth)+2),e!==this.state.inputWidth&&this.setState({inputWidth:e})}render(){const{inputAttributes:e,inputEventHandlers:t,query:s,placeholder:a,expandable:n,listboxId:i,selectedIndex:l}=this.props;return React.createElement("div",{className:this.props.classNames.searchInput},React.createElement("input",r({},e,t,{ref:e=>{this.input=e},value:s,placeholder:a,role:"combobox","aria-autocomplete":"list","aria-label":a,"aria-owns":i,"aria-activedescendant":l>-1?`${i}-${l}`:null,"aria-expanded":n,style:{width:this.state.inputWidth}})),React.createElement("div",{ref:e=>{this.sizer=e},style:o},s||a))}}function p(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function h(e,t){if(t){const s=RegExp(p(t),"gi");e=e.replace(s,"<mark>$&</mark>")}return{__html:e}}function d(e,t,s,a){if(!a){const t=new RegExp(`(?:^|\\s)${p(e)}`,"i");a=e=>t.test(e.name)}return t.filter(t=>a(t,e)).slice(0,s)}class _ extends React.Component{constructor(e){super(e),this.state={options:d(this.props.query,this.props.suggestions,this.props.maxSuggestionsLength,this.props.suggestionsFilter)}}componentWillReceiveProps(e){this.setState({options:d(e.query,e.suggestions,e.maxSuggestionsLength,e.suggestionsFilter)})}handleMouseDown(e,t){t.preventDefault(),this.props.addTag(e)}render(){if(!this.props.expandable||!this.state.options.length)return null;const e=this.state.options.map((e,t)=>{const s=`${this.props.listboxId}-${t}`,a=[];return this.props.selectedIndex===t&&a.push(this.props.classNames.suggestionActive),e.disabled&&a.push(this.props.classNames.suggestionDisabled),React.createElement("li",{id:s,key:s,role:"option",className:a.join(" "),"aria-disabled":!0===e.disabled,onMouseDown:this.handleMouseDown.bind(this,e)},React.createElement("span",{dangerouslySetInnerHTML:h(e.name,this.props.query)}))});return React.createElement("div",{className:this.props.classNames.suggestions},React.createElement("ul",{role:"listbox",id:this.props.listboxId},e))}}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e};const m={ENTER:13,TAB:9,BACKSPACE:8,UP_ARROW:38,DOWN_ARROW:40},g={root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled"};class f extends React.Component{constructor(e){super(e),this.state={query:"",focused:!1,expandable:!1,selectedIndex:-1,classNames:Object.assign({},g,this.props.classNames)},this.inputEventHandlers={onChange:()=>{},onBlur:this.handleBlur.bind(this),onFocus:this.handleFocus.bind(this),onInput:this.handleInput.bind(this),onKeyDown:this.handleKeyDown.bind(this)}}componentWillReceiveProps(e){this.setState({classNames:Object.assign({},g,e.classNames)})}handleInput(e){const t=e.target.value;this.props.handleInputChange&&this.props.handleInputChange(t),this.setState({query:t})}handleKeyDown(e){const{query:t,selectedIndex:s}=this.state,{delimiters:a,delimiterChars:n}=this.props;(a.indexOf(e.keyCode)>-1||n.indexOf(e.key)>-1)&&((t||s>-1)&&e.preventDefault(),this.handleDelimiter()),e.keyCode===m.BACKSPACE&&0===t.length&&this.props.allowBackspace&&this.deleteTag(this.props.tags.length-1),e.keyCode===m.UP_ARROW&&(e.preventDefault(),s<=0?this.setState({selectedIndex:this.suggestions.state.options.length-1}):this.setState({selectedIndex:s-1})),e.keyCode===m.DOWN_ARROW&&(e.preventDefault(),this.setState({selectedIndex:(s+1)%this.suggestions.state.options.length}))}handleDelimiter(){const{query:e,selectedIndex:t}=this.state;if(e.length>=this.props.minQueryLength){const s=this.suggestions.state.options.findIndex(t=>0===t.name.search(new RegExp(`^${e}$`,"i"))),a=-1===t?s:t;a>-1?this.addTag(this.suggestions.state.options[a]):this.props.allowNew&&this.addTag({name:e})}}handleClick(e){document.activeElement!==e.target&&this.input.input.focus()}handleBlur(){this.setState({focused:!1,selectedIndex:-1}),this.props.handleBlur&&this.props.handleBlur(),this.props.addOnBlur&&this.handleDelimiter()}handleFocus(){this.setState({focused:!0}),this.props.handleFocus&&this.props.handleFocus()}addTag(e){e.disabled||("function"!=typeof this.props.handleValidate||this.props.handleValidate(e))&&(this.props.handleAddition(e),this.setState({query:"",selectedIndex:-1}))}deleteTag(e){this.props.handleDelete(e),this.props.clearInputOnDelete&&""!==this.state.query&&this.setState({query:""})}render(){const e=this.props.tagComponent||i,t=this.props.tags.map((t,s)=>React.createElement(e,{key:s,tag:t,classNames:this.state.classNames,onDelete:this.deleteTag.bind(this,s)})),s=this.state.focused&&this.state.query.length>=this.props.minQueryLength,a=[this.state.classNames.root];return this.state.focused&&a.push(this.state.classNames.rootFocused),React.createElement("div",{className:a.join(" "),onClick:this.handleClick.bind(this)},React.createElement("div",{className:this.state.classNames.selected,"aria-live":"polite","aria-relevant":"additions removals"},t),React.createElement("div",{className:this.state.classNames.search},React.createElement(c,u({},this.state,{inputAttributes:this.props.inputAttributes,inputEventHandlers:this.inputEventHandlers,ref:e=>{this.input=e},listboxId:"ReactTags-listbox",autofocus:this.props.autofocus,autoresize:this.props.autoresize,expandable:s,placeholder:this.props.placeholder})),React.createElement(_,u({},this.state,{ref:e=>{this.suggestions=e},listboxId:"ReactTags-listbox",expandable:s,suggestions:this.props.suggestions,suggestionsFilter:this.props.suggestionsFilter,addTag:this.addTag.bind(this),maxSuggestionsLength:this.props.maxSuggestionsLength}))))}}f.defaultProps={tags:[],placeholder:"Add new tag",suggestions:[],suggestionsFilter:null,autofocus:!0,autoresize:!0,delimiters:[m.TAB,m.ENTER],delimiterChars:[],minQueryLength:2,maxSuggestionsLength:6,allowNew:!1,allowBackspace:!0,tagComponent:null,inputAttributes:{},addOnBlur:!1,clearInputOnDelete:!0},f.propTypes={tags:PropTypes.arrayOf(PropTypes.object),placeholder:PropTypes.string,suggestions:PropTypes.arrayOf(PropTypes.object),suggestionsFilter:PropTypes.func,autofocus:PropTypes.bool,autoresize:PropTypes.bool,delimiters:PropTypes.arrayOf(PropTypes.number),delimiterChars:PropTypes.arrayOf(PropTypes.string),handleDelete:PropTypes.func.isRequired,handleAddition:PropTypes.func.isRequired,handleInputChange:PropTypes.func,handleFocus:PropTypes.func,handleBlur:PropTypes.func,handleValidate:PropTypes.func,minQueryLength:PropTypes.number,maxSuggestionsLength:PropTypes.number,classNames:PropTypes.object,allowNew:PropTypes.bool,allowBackspace:PropTypes.bool,tagComponent:PropTypes.oneOfType([PropTypes.func,PropTypes.element]),inputAttributes:PropTypes.object,addOnBlur:PropTypes.bool,clearInputOnDelete:PropTypes.bool},s.d(t,"a",(function(){return T}));var y=window.ReactBootstrap;class b extends React.Component{constructor(e){super(e),doBinding(this),this.state={suggestions:[]}}componentDidMount(){let e=this,t={res_type:this.props.res_type,is_repository:!1};Object(n.c)("get_tag_list",t).then((function(t){let s=e._fillOutTags(t.tag_list);e.setState({suggestions:s})}))}_fillOutTags(e){return e.map((e,t)=>({id:t,name:e}))}_extractTags(e){return e.map(e=>e.name)}_handleDelete(e){let t=[...this.props.tags];t.splice(e,1),this.props.handleChange(t)}_handleAddition(e){let t=[...this.props.tags];t.push(e.name),this.props.handleChange(t)}render(){let e=this._fillOutTags(this.props.tags);return React.createElement(f,{tags:e,allowNew:!0,suggestions:this.state.suggestions,handleDelete:this._handleDelete,handleAddition:this._handleAddition})}}b.proptypes={tags:PropTypes.array,handleChange:PropTypes.func,res_type:PropTypes.string};class w extends React.Component{constructor(e){super(e),this.tags_field_ref=React.createRef(),this.tag_containing_div=React.createRef(),this.last_tags_list=[],this.setting_tags=!1,this.state={has_focus:!1},this.all_tags=[],doBinding(this)}get_tags_field(){return $(this.tags_field_ref.current)}_handleMyChange(e,t,s){this.setting_tags||this.props.handleChange(e,t,s)}create_tag_editor(e){let t=this,s={res_type:this.props.res_type,is_repository:!1};Object(n.c)("get_tag_list",s).then((function(s){t.all_tags=s.tag_list,t.get_tags_field().tagEditor({initialTags:e,forceLowercase:!0,autocomplete:{delay:0,position:{collision:"flip"},source:t.all_tags},onChange:t._handleMyChange,placeholder:"Tags..."})})).catch(doFlash)}componentDidMount(){this.last_tags_list=this.props.tags,this.create_tag_editor(this.props.tags)}componentDidUpdate(){this.props.tags!=this.last_tags_list&&(this.last_tags_list=this.props.tags,this.set_tag_list(this.props.tags))}get has_focus(){return this.tag_containing_div.current.contains(document.activeElement)}get_tags(){return this.get_tags_field().tagEditor("getTags")[0].tags}add_tags(e){let t=this.has_focus;this.setting_tags=!0;for(let s of e)this.get_tags_field().tagEditor("addTag",s,!t);this.setting_tags=!1}remove_all_tags(){let e=this.has_focus,t=this.get_tags();this.setting_tags=!0;for(let s of t)this.get_tags_field().tagEditor("removeTag",s,!e);this.setting_tags=!1}set_tag_list(e){null!=this.get_tags()&&(this.remove_all_tags(),this.add_tags(e))}render(){let e={pointerEvents:this.context.readOnly?"none":"all"};return React.createElement("div",{ref:this.tag_containing_div,style:e},React.createElement(y.Form.Control,{as:"textarea",ref:this.tags_field_ref,className:"metadata-field",rows:"1"}))}}w.contextType=a.a,w.propTypes={tags:PropTypes.array,handleChange:PropTypes.func,res_type:PropTypes.string};class R extends React.Component{constructor(e){super(e),this.state={md_height:500,show_markdown:!this.hasOnlyWhitespace&&this.props.show_markdown_initial},doBinding(this),this.notes_ref=React.createRef(),this.md_ref=React.createRef(),this.converter=new showdown.Converter,this.awaiting_focus=!1}getNotesField(){return $(this.notes_ref.current)}get hasOnlyWhitespace(){return!this.props.notes.trim().length}getMarkdownField(){return $(this.md_ref.current)}componentDidUpdate(){this.awaiting_focus?(this.focusNotes(),this.awaiting_focus=!1):this.state.show_markdown||this.notes_ref.current==document.activeElement||this._showMarkdown()}focusNotes(){this.getNotesField().focus()}_hideMarkdown(){this.awaiting_focus=!0,this.setState({show_markdown:!1})}_handleMyBlur(){this._showMarkdown(),null!=this.props.handleBlur&&this.props.handleBlur()}_showMarkdown(){this.hasOnlyWhitespace||this.setState({show_markdown:!0})}render(){let e=!this.hasOnlyWhitespace&&this.state.show_markdown,t={display:e?"none":"block",fontSize:14},s={display:e?"block":"none",maxHeight:this.state.md_height,fontSize:14};var a;e&&(a=this.converter.makeHtml(this.props.notes));let n={__html:a};return React.createElement(y.Form.Group,null,React.createElement(y.Form.Control,{as:"textarea",className:"metadata-field notes-field",ref:this.notes_ref,rows:"10",placeholder:"notes",style:t,onBlur:this._handleMyBlur,onChange:this.props.handleChange,readOnly:this.context.readOnly,value:this.props.notes}),React.createElement("div",{ref:this.md_ref,style:s,onClick:this._hideMarkdown,className:"notes-field-markdown-output",dangerouslySetInnerHTML:n}))}}R.contextType=a.a,R.propTypes={notes:PropTypes.string,handleChange:PropTypes.func,show_markdown_initial:PropTypes.bool,handleBlur:PropTypes.func},R.defaultProops={handleBlur:null};class T extends React.Component{constructor(e){super(e),doBinding(this)}_handleNotesChange(e){this.props.handleChange({notes:e.target.value})}_handleTagsChange(e,t,s){this.props.handleChange({tags:s})}_handleTagsChangeNative(e){this.props.handleChange({tags:e})}_handleCategoryChange(e){this.props.handleChange({category:e.target.value})}render(){let e,t={fontSize:14};if(null!=this.props.additional_metadata){e=[];for(let s in this.props.additional_metadata){let a=this.props.additional_metadata[s];if(Array.isArray(a))a=a.join(", ");else if("collection_name"==s){let e=/\.\w*$/.exec(a);null!=e&&(a=e[0].slice(1))}e.push(React.createElement("div",{style:t,key:s},React.createElement("span",{className:"text-primary"},s+": "),a))}}return React.createElement("div",{className:"combined-metadata",style:this.props.outer_style},null!=this.props.name&&React.createElement("h4",null,this.props.name),React.createElement(y.Form,null,React.createElement(y.Form.Group,null,React.createElement(y.Form.Label,null,React.createElement("span",{className:"text-primary"},"Tags")),React.createElement(b,{tags:this.props.tags,handleChange:this._handleTagsChangeNative,res_type:this.props.res_type})),null!=this.props.category&&React.createElement(y.Form.Group,null,React.createElement(y.Form.Label,null,React.createElement("span",{className:"text-primary"},"Category")),React.createElement(y.Form.Control,{as:"input",onChange:this._handleCategoryChange,value:this.props.category})),React.createElement(y.Form.Group,null,React.createElement(y.Form.Label,null,React.createElement("span",{className:"text-primary"},"Notes")),React.createElement(R,{notes:this.props.notes,handleChange:this._handleNotesChange,show_markdown_initial:!0,handleBlur:this.props.handleNotesBlur})),React.createElement("div",{style:t},React.createElement("span",{className:"text-primary"},"Created: "),this.props.created),null!=this.props.updated&&React.createElement("div",{style:t},React.createElement("span",{className:"text-primary"},"Updated: "),this.props.updated),null!=this.props.additional_metadata&&e))}}T.propTypes={outer_style:PropTypes.object,res_type:PropTypes.string,name:PropTypes.string,created:PropTypes.string,updated:PropTypes.string,tags:PropTypes.array,notes:PropTypes.string,category:PropTypes.string,handleChange:PropTypes.func,handleNotesBlur:PropTypes.func,additional_metadata:PropTypes.object},T.defaultProps={outer_style:{marginLeft:20},handleNotesBlur:null,category:null,name:null,updated:null,additional_metadata:null}},function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return d}));var a=s(0),n=window.ReactBootstrap,i=window.ReactTransitionGroup;class r extends React.Component{constructor(e){super(e),doBinding(this)}_handleSearchFieldChange(e){this.props.update_search_state({search_field_value:e.target.value})}_handleClearSearch(){this.props.update_search_state({search_field_value:""})}_handleSearchMetadataChange(e){this.props.update_search_state({search_metadata_checked:e.target.checked})}_handleSearchInsideChange(e){this.props.update_search_state({search_inside_checked:e.target.checked})}_handleSubmit(e){e.preventDefault()}render(){return React.createElement(n.Form,{inline:!0,className:"my-2",onSubmit:this._handleSubmit},React.createElement(n.Form.Control,{as:"input",placeholder:"Search",value:this.props.search_field_value,onChange:this._handleSearchFieldChange,size:"sm",className:"mr-2",style:{width:265}}),React.createElement(n.Button,{variant:"outline-secondary",type:"button",size:"sm",onClick:this._handleClearSearch},"clear"),this.props.allow_search_metadata&&React.createElement(n.Form.Check,{inline:!0,label:"search metadata",size:"sm",className:"ml-3 form-control-sm",checked:this.props.search_metadata_checked,onChange:this._handleSearchMetadataChange}),this.props.allow_search_inside&&React.createElement(n.Form.Check,{inline:!0,label:"search inside",size:"sm",className:"ml-0 form-control-sm",checked:this.props.search_inside_checked,onChange:this._handleSearchInsideChange}))}}r.propTypes={allow_search_inside:PropTypes.bool,allow_search_metadata:PropTypes.bool,update_search_state:PropTypes.func,search_field_value:PropTypes.string,search_inside_checked:PropTypes.bool,search_metadata_checked:PropTypes.bool};class o extends React.Component{constructor(e){super(e)}render(){return React.createElement("td",null,this.props.children)}}class l extends React.Component{constructor(e){super(e),doBinding(this),this.clickTimeout=null,this.state={in:!1,drag_hover:!1}}_handleClick(e){this.props.handleRowClick(this.props.data_dict,e.shiftKey),e.preventDefault()}_handleClicks(e){let t=this;e.persist(),null!==this.clickTimeout?(this.props.handleRowDoubleClick(this.props.data_dict),clearTimeout(this.clickTimeout),this.clickTimeout=null):this.clickTimeout=setTimeout(()=>{t._handleClick(e),clearTimeout(this.clickTimeout),this.clickTimeout=null},300)}componentDidMount(){this.setState({in:!0})}_handleDragStart(e){set_datum(e,"resourcename",this.props.data_dict[this.props.identifier_field])}_handleDragOver(e){e.preventDefault(),this.setState({drag_hover:!0})}_handleDragLeave(e){e.preventDefault(),this.setState({drag_hover:!1})}_handleDrop(e,t,s){this.setState({drag_hover:!1});let a=get_datum(e,"tagname");""!=a&&this.props.handleAddTag(this.props.data_dict[this.props.identifier_field],a)}render(){let e=this.props.columns.map((e,t)=>React.createElement(o,{key:t},this.props.data_dict[e])),t=this.props.active?"selector-button active":"selector-button";return this.state.drag_hover&&(t+=" draghover"),React.createElement("tr",{className:t,draggable:this.props.draggable,id:this.props.row_index,onClick:this._handleClicks,onDragStart:this._handleDragStart,onDrop:this._handleDrop,onDragOver:this._handleDragOver,onDragLeave:this._handleDragLeave},e)}}l.propTypes={columns:PropTypes.array,row_index:PropTypes.number,data_dict:PropTypes.object,active:PropTypes.bool,handleRowClick:PropTypes.func,draggable:PropTypes.bool,identifier_field:PropTypes.string,handleAddTag:PropTypes.func,handleRowDoubleClick:PropTypes.func};class c extends React.Component{constructor(e){super(e),doBinding(this),this.state={next_sort:this.props.first_sort}}_handleMyClick(){this.props.handleHeaderCellClick(this.props.name,this.props.sort_field,this.state.next_sort);let e="ascending"==this.state.next_sort?"descending":"ascending";this.setState({next_sort:e,sorting:!0})}render(){if(this.props.sorting_column==this.props.name){let e="ascending"==this.state.next_sort?"sort-down":"sort-up";return React.createElement("th",{onClick:this._handleMyClick},this.props.name,React.createElement("span",{className:`fas fa-${e}`,style:{marginLeft:5}}))}return React.createElement("th",{onClick:this._handleMyClick},this.props.name)}}c.propTypes={name:PropTypes.string,sorting_column:PropTypes.string,handleHeaderCellClick:PropTypes.func,sort_field:PropTypes.string,first_sort:PropTypes.string};class p extends React.Component{constructor(e){super(e),doBinding(this)}render(){let e=Object.keys(this.props.columns).map((e,t)=>React.createElement(c,{key:t,name:e,sorting_column:this.props.sorting_column,sort_field:this.props.columns[e].sort_field,first_sort:this.props.columns[e].first_sort,handleHeaderCellClick:this.props.handleHeaderCellClick}));return React.createElement("thead",null,React.createElement("tr",{className:"selector-button",key:"header"},e))}}p.propTypes={sorting_column:PropTypes.string,columns:PropTypes.object,handleHeaderCellClick:PropTypes.func};class h extends React.Component{constructor(e){super(e),doBinding(this),this.tbody_ref=React.createRef()}componentDidMount(){}_handleKeyDown(e){["ArrowDown","ArrowUp"].includes(e.key)&&(this.props.handleArrowKeyPress(e.key),e.preventDefault()),"Space"==e.key&&null!=this.props.handleSpaceBarPress&&(this.props.handleSpaceBarPress(e.key),e.preventDefault())}render(){let e=Object.keys(this.props.columns),t=this.props.data_list.map((t,s)=>React.createElement(i.CSSTransition,{key:t[e[0]],timeout:500,classNames:"table-row"},React.createElement(l,{columns:e,data_dict:t,row_index:s,active:this.props.selected_resource_names.includes(t[this.props.identifier_field]),handleRowClick:this.props.handleRowClick,handleRowDoubleClick:this.props.handleRowDoubleClick,draggable:this.props.draggable,identifier_field:this.props.identifier_field,handleAddTag:this.props.handleAddTag})));return React.createElement("table",{tabIndex:"0",onKeyDown:this._handleKeyDown,className:"tile-table table sortable table-striped table-bordered table-sm"},React.createElement(p,{columns:this.props.columns,sorting_column:this.props.sorting_column,handleHeaderCellClick:this.props.handleHeaderCellClick}),React.createElement(i.TransitionGroup,{component:"tbody",ref:this.tbody_ref,enter:this.props.show_animations,exit:this.props.show_animations},t))}}h.propTypes={columns:PropTypes.object,sorting_column:PropTypes.string,data_list:PropTypes.array,selected_resource_names:PropTypes.array,handleHeaderCellClick:PropTypes.func,content_editable:PropTypes.bool,handleRowClick:PropTypes.func,handleRowDoubleClick:PropTypes.func,handleArrowKeyPress:PropTypes.func,show_animations:PropTypes.bool,handleSpaceBarPress:PropTypes.func,identifier_field:PropTypes.string,draggable:PropTypes.bool,handleAddTag:PropTypes.func},h.defaultProps={columns:{name:{sort_field:"name",first_sort:"ascending"},created:{sort_field:"created_for_sort",first_sort:"descending"},updated:{sort_field:"updated_for_sort",first_sort:"ascending"},tags:{sort_field:"tags",first_sort:"ascending"}},identifier_field:"name",active_row:0,show_animations:!1,handleSpaceBarPress:null,draggable:!0};class d extends React.Component{constructor(e){super(e),this.state={default_list:[],failed_list:[],other_list:[]}}set_state_from_dict(e){this.setState({default_list:e.default_tiles,failed_list:e.failed_loads,other_list:e.nondefault_tiles})}componentDidMount(){let e=this;this.props.tsocket.socket.on("update-loaded-tile-list",t=>e.set_state_from_dict(t.tile_load_dict)),Object(a.b)("get_loaded_tile_lists",{},(function(t){let s=t.tile_load_dict;e.set_state_from_dict(s)}))}render(){let e=this.state.default_list.map(e=>React.createElement(n.Card.Text,{key:e},e)),t=this.state.failed_list.map(e=>React.createElement(n.Card.Text,{key:e},React.createElement("a",{style:{color:"red"}},e+"(failed)"))),s=this.state.other_list.map(e=>React.createElement(n.Card.Text,{key:e},e));return React.createElement(n.CardGroup,{id:"loaded_tile_widget",className:"mt-3 ml-3"},React.createElement(n.Card,null,React.createElement(n.Card.Header,{className:"pt-1 pb-1"},"Loaded Default"),React.createElement(n.Card.Body,{className:"pt-3 pb-3"},e,t)),React.createElement(n.Card,null,React.createElement(n.Card.Header,{className:"pt-1 pb-1"},"Loaded Other"),React.createElement(n.Card.Body,{className:"pt-3 pb-3"},s)))}}d.propTypes={tsocket:PropTypes.object}},function(e,t,s){"use strict";var a=s(1),n=window.ReactBootstrap;function i(e){return-1!=e.search("/")}function r(e){var t=[];for(let s of e)t=t.concat(o(s));return t=remove_duplicates(t)}function o(e){if(-1==e.search("/"))return[];{let t=function(e){return e.replace(/\/\w*$/,"")}(e),s=o(t);return s.push(t),s}}function l(e){return e.split("/")}class c extends React.Component{constructor(e){super(e),doBinding(this),this.state={am_root:!i(e.the_tag),drag_hover:!1}}_handleExpanderClick(e){this.props._handleExpanderToggle(this.props.the_tag,!this.props.am_expanded),e.stopPropagation()}get tag_base(){let e=this.props.the_tag;if(i(e)){return/\/\w*$/.exec(e)[0].slice(1)}return e}tag_depth(e){return(e.match(/\//g)||[]).length}_handleSetActive(){this.props.am_active||this.props._handleSetActive(this.props.the_tag)}_handleDrop(e,t,s){this.setState({drag_hover:!1});let a=get_datum(e,"resourcename");""!=a&&this.props.handleAddTag(a,this.props.the_tag)}_handleDragOver(e){e.preventDefault(),this.setState({drag_hover:!0})}_handleDragLeave(e){e.preventDefault(),this.setState({drag_hover:!1})}_handleDragStart(e){set_datum(e,"tagname",this.props.the_tag)}_rename_tag(e){e.stopPropagation();let t=this,s=this.tag_base;Object(a.b)(`Rename tag ${s}`,"New name for this tag",(function(e){t.props.renameTagPrep(t.props.the_tag,e)}),s)}_delete_tag(e){e.stopPropagation();const t=`Are you sure that you want to delete the tag ${this.props.the_tag} for this resource type?`;let s=this;Object(a.a)("Delete tag",t,"do nothing","delete",(function(){s.props.doTagDelete(s.props.the_tag)}))}render(){let e,t,s,a,i=12*this.tag_depth(this.props.the_tag),r=React.createElement("span",{className:"tag-icon-folder fas fa-folder"}),o=React.createElement("span",{className:"tag-icon-folder fal fa-folder"});return this.props.have_children?(t="has_children shrunk",e={marginLeft:i},this.props.am_expanded?(s=React.createElement("span",{className:"tag-expander fal fa-caret-down",onClick:this._handleExpanderClick,style:e}),a=this.props.am_active?r:o):(s=React.createElement("span",{className:"tag-expander fal fa-caret-right",onClick:this._handleExpanderClick,style:e}),a=this.props.am_active?r:o)):(t="no_children",e={marginLeft:i+12},s=React.createElement("span",{style:e}),a=this.props.am_active?"all"==this.props.the_tag?React.createElement("span",{className:"tag-icon-tag fas fa-tags"}):React.createElement("span",{className:"tag-icon-tag fas fa-tag"}):"all"==this.props.the_tag?React.createElement("span",{className:"tag-icon-tag fal fa-tags"}):React.createElement("span",{className:"tag-icon-tag fal fa-tag"})),this.props.am_active&&(t+=" active"),this.state.drag_hover&&(t+=" draghover"),this.state.am_root?React.createElement(n.Button,{className:`btn btn-outline-secondary tag-button root-tag ${t}`,onClick:this.props.edit_tags?this._rename_tag:this._handleSetActive,draggable:"all"!=this.props.the_tag,onDragStart:this._handleDragStart,onDragOver:this._handleDragOver,onDragLeave:this._handleDragLeave,onDrop:this._handleDrop},s,a,this.tag_base,this.props.edit_tags&&React.createElement("span",{onClick:this._delete_tag,className:"tag-button-delete delete-visible"})):React.createElement(n.Button,{className:`btn btn-outline-secondary tag-button ${t}`,draggable:!0,onDragStart:this._handleDragStart,onDragOver:this._handleDragOver,onDragLeave:this._handleDragLeave,onClick:this.props.edit_tags?this._rename_tag:this._handleSetActive},s,a,this.tag_base,this.props.edit_tags&&React.createElement("span",{onClick:this._delete_tag,className:"tag-button-delete delete-visible"}))}}c.propTypes={the_tag:PropTypes.string,have_children:PropTypes.bool,am_expanded:PropTypes.bool,am_active:PropTypes.bool,_handleExpanderToggle:PropTypes.func,_handleSetActive:PropTypes.func,renameTagPrep:PropTypes.func,handleAddTag:PropTypes.func,edit_tags:PropTypes.bool};class p extends React.Component{constructor(e){super(e),doBinding(this),this.state={expanded_tags:[],active_tag:"all",edit_tags:!1}}_handleExpanderToggle(e,t){if(t){let t=[...this.state.expanded_tags];t.push(e),this.setState({expanded_tags:t})}else{let t=[...this.state.expanded_tags];var s=t.indexOf(e);-1!==s&&t.splice(s,1),this.setState({expanded_tags:t})}}_handleSetActive(e){this.setState({active_tag:e},()=>{this.props.handleSearchFromTag(e)})}subtag_visible(e){let t=o(e);for(let e of t)if(!this.state.expanded_tags.includes(e))return!1;return!0}compute_visible_tags(e){let t=[];for(let s of e)i(s)&&!this.subtag_visible(s)||t.push(s);return t}_edit_tags(e){this.setState({edit_tags:!this.state.edit_tags}),e.preventDefault()}_renameTagPrep(e,t){let s=l(e),a=s.length,n=[];for(let e of this.props.tag_list){let i=l(e);arraysMatch(i.slice(0,a),s)&&(i[a-1]=t,n.push([e,i.join("/")]))}this.props.doTagRename(n)}render(){let e=r(this.props.tag_list),t=[...this.props.tag_list];t=t.concat(e),(t=remove_duplicates(t)).sort();let s=this.compute_visible_tags(t),a=[],i=React.createElement(c,{the_tag:"all",key:"all",have_children:!1,am_expanded:!1,am_active:"all"==this.state.active_tag,_handleExpanderToggle:this._handleExpanderToggle,_handleSetActive:this._handleSetActive,edit_tags:!1});a.push(i);for(let n of t)if(s.includes(n)){let t=React.createElement(c,{the_tag:n,key:n,have_children:e.includes(n),am_expanded:this.state.expanded_tags.includes(n),am_active:n==this.state.active_tag,_handleExpanderToggle:this._handleExpanderToggle,_handleSetActive:this._handleSetActive,handleAddTag:this.props.handleAddTag,edit_tags:this.state.edit_tags,doTagDelete:this.props.doTagDelete,renameTagPrep:this._renameTagPrep});a.push(t)}let o=this.state.edit_tags?"btn-danger":"btn-outline-secondary";return React.createElement("div",{style:{marginTop:85}},React.createElement(n.Button,{className:`btn ${o} ml-2 edit-tags-button`,onClick:this._edit_tags},"edit tags"),React.createElement(n.ButtonGroup,{style:{justifyContent:"start",display:"inline-block",overflowY:"scroll"},vertical:!0,size:"sm"},a))}}p.propTypes={res_type:PropTypes.string,tag_list:PropTypes.array,handleSearchFromTag:PropTypes.func,doTagDelete:PropTypes.func,doTagRename:PropTypes.func,handleAddTag:PropTypes.func};var h=s(10),d=s(11),_=s(3),u=s(0);s.d(t,"a",(function(){return m}));class m extends React.Component{constructor(e){super(e),this.top_ref=React.createRef(),this.state={data_list:[],mounted:!1,left_width:this.props.usable_width/2-100,top_pane_height:this.props.usable_height/2-50,match_list:[],tag_list:[],sorting_column:null,sorting_field:null,sorting_direction:null,selected_resource:{name:"",tags:"",notes:"",updated:"",created:""},multi_select:!1,list_of_selected:[],list_of_selected_funcs:[],search_field_value:"",search_inside_checked:!1,search_metadata_checked:!1,show_animations:!1},doBinding(this),null!=e.tsocket&&(e.tsocket.socket.on(`update-${e.res_type}-selector-row`,this._handleRowUpdate),e.tsocket.socket.on(`refresh-${e.res_type}-selector`,this._refresh_func))}get_height_minus_top_offset(e){return this.state.mounted?this.props.usable_height-$(e.current).offset().top:this.props.usable_height-50}get_width_minus_left_offset(e){return this.state.mounted?this.props.usable_width-$(e.current).offset().left:this.props.usable_width-50}componentDidMount(){let e,t=this;this.setState({mounted:!0}),e=this.props.is_repository?"repository_resource_list_with_metadata":"resource_list_with_metadata",Object(u.b)(`${e}/${this.props.res_type}`,{},(function(e){t.setState({data_list:e.data_list},()=>{t.update_tag_list(),t._update_match_lists(),t._set_sort_state("updated","updated_for_sort","descending",!0)})}))}_handleRowUpdate(e){let t=e.name,s=this.get_data_list_index(t);if(-1==s)this._animation_phase(()=>{this._add_new_row(e)});else{let a=[...this.state.data_list],n=a[s];for(let t in e)n[t]=e[t];t==this.state.selected_resource.name&&this.setState({selected_resource:n}),this.setState({data_list:a},()=>{this._update_match_lists(),this.update_tag_list()})}}delete_row(e){let t=this.get_data_list_index(e),s=[...this.state.data_list];s.splice(t,1),this.setState({data_list:s},this.update_tag_list)}get_data_list_entry(e){for(let t of this.state.data_list)if(t.name==e)return t;return null}set_in_data_list(e,t,s){let a=[];for(let n of s){if(e.includes(n.name))for(let e in t)n[e]=t[e];a.push(n)}return a}get_data_list_index(e){return this.state.data_list.findIndex(t=>t.name==e)}_saveFromSelectedResource(){const e={res_type:this.props.res_type,res_name:this.state.list_of_selected[0],tags:this.state.selected_resource.tags,notes:this.state.selected_resource.notes};let t=Object.assign({},this.state.selected_resource),s=[...this.state.list_of_selected],a=this;Object(u.c)("save_metadata",e).then((function(e){let n=a.set_in_data_list(s,t,a.state.data_list);a.setState({data_list:n},()=>{a._update_match_lists(),a.update_tag_list()})})).catch(doFlash)}overwriteCommonTags(){const e={res_type:this.props.res_type,res_names:this.state.list_of_selected,tags:this.state.selected_resource.tags},t=this;Object(u.c)("overwrite_common_tags",e).then((function(e){let s=e.updated_tags,a=[...t.state.data_list];for(let e in s)a=t.set_in_data_list([e],{tags:s[e]},a);t.setState({data_list:a},()=>{t._update_match_lists(),t.update_tag_list()})})).catch(doFlash)}_handleMetadataChange(e){if(this.state.multi_select){let t=Object.assign({},this.state.selected_resource);(t=Object.assign(t,e)).tags=t.tags.join(" "),this.setState({selected_resource:t},this.overwriteCommonTags)}else{let t=Object.assign({},this.state.selected_resource);t=Object.assign(t,e),Object.keys(e).includes("tags")?(t.tags=t.tags.join(" "),this.setState({selected_resource:t},this._saveFromSelectedResource)):this.setState({selected_resource:t})}}addOneTag(e,t){let s=this.get_data_list_entry(e);if(s.tags.split(" ").includes(t))return;let a=s.tags+" "+t;a=a.trim();let n={res_type:this.props.res_type,res_name:e,tags:a,notes:s.notes},i=this;Object(u.c)("save_metadata",n).then((function(){i._handleRowUpdate({name:e,tags:a})})).catch(doFlash)}_handleAddTag(e,t){if(this.state.list_of_selected.includes(e)&&this.state.multi_select){for(let e of this.state.list_of_selected)this.addOneTag(e,t);let e=this.state.selected_resource.tags;if(!e.includes(t)){e=(e=e+" "+t).trim();let s=this.state.selected_resource;s.tags=e,this.setState({selected_resource:s})}}else this.addOneTag(e,t)}_handleSplitResize(e,t,s){this.setState({left_width:e-50})}_doTagDelete(e){const t={res_type:this.props.res_type,tag:e};let s=this;Object(u.c)("delete_tag",t).then((function(e){s._refresh_func()})).catch(doFlash)}get view_views(){return{collection:"/main/",project:"/main_project/",tile:"/last_saved_view/",list:"/view_list/",code:"/view_code/"}}_doTagRename(e){const t={res_type:this.props.res_type,tag_changes:e};let s=this;Object(u.c)("rename_tag",t).then((function(e){s._refresh_func()})).catch(doFlash)}_handleRowDoubleClick(e){let t=this.view_views[this.props.res_type];this.setState({selected_resource:e,multi_select:!1,list_of_selected:[e.name]}),window.open($SCRIPT_ROOT+t+e.name)}_handleRowClick(e,t=!1){if(this.state.multi_select||""==this.state.selected_resource.name||this.state.selected_resource.notes==this.get_data_list_entry(this.state.selected_resource.name).notes||this._saveFromSelectedResource(),t&&e.name!=this.state.selected_resource.name){window.getSelection().removeAllRanges();let t,s=[],a=e.tags.split(" "),n=this.state.selected_resource.tags.split(" ");for(let e of a)n.includes(e)&&s.push(e);t=this.state.multi_select?[...this.state.list_of_selected,e.name]:[this.state.selected_resource.name,e.name];let i={name:"__multiple__",tags:s.join(" "),notes:""};this.setState({multi_select:!0,selected_resource:i,list_of_selected:t})}else this.setState({selected_resource:e,multi_select:!1,list_of_selected:[e.name]})}_filter_func(e,t){return-1!=e.name.toLowerCase().search(t)}get all_names(){return this.state.data_list.map(e=>e.name)}match_all(){let e=this.all_names;this.setState({match_list:e})}_update_search_state(e){this.setState(e,this._update_match_lists)}update_tag_list(){let e=[];for(let t of this.state.data_list){if(""==t.tags)continue;let s=t.tags.split(" ");for(let t of s)e.includes(t)||e.push(t)}this.setState({tag_list:e})}_update_match_lists(){if(""==this.state.search_field_value)this.match_all();else if(this.state.search_inside_checked)this.doSearchInside(this.state.search_field_value,this.state.search_metadata_checked);else if(this.state.search_metadata_checked)this.doSearchMetadata(this.state.search_field_value);else{let e=[];for(let t of this.state.data_list)this._filter_func(t,this.state.search_field_value)&&e.push(t.name);this.setState({match_list:e})}}_sort_data_list(){if(0==this.state.data_list.length)return;if(null==this.state.sorting_field)return this.state.data_list;let e=this.state.sorting_field,t=this.state.sorting_direction;let s=[...this.state.data_list];s.sort((function(s,a){let n;return n=s[e]<a[e]?-1:s[e]>a[e]?1:0,"descending"==t&&(n*=-1),n})),this.setState({selected_resource:s[0],list_of_selected:[s[0].name],multi_select:!1}),this.setState({data_list:s})}_set_sort_state(e,t,s){this.setState({sorting_column:e,sorting_field:t,sorting_direction:s},this._sort_data_list)}_refresh_for_new_data_list(){this._update_match_lists(),this._sort_data_list(),this.update_tag_list()}doSearchMetadata(e){let t=this,s={search_text:e};Object(u.c)(this.props.search_metadata_view,s).then(e=>{var s=e.match_list;t.setState({match_list:s})}).catch(doFlash)}doSearchInside(e,t){let s={search_text:e},a=this;Object(u.c)(this.props.search_inside_view,s).then(e=>{var n=e.match_list;t?Object(u.c)(a.props.search_metadata_view,s).then(e=>{n=n.concat(e.match_list),a.setState({match_list:n})}).catch(doFlash):a.setState({match_list:n})}).catch(doFlash)}_filter_on_match_list(e){return this.state.match_list.includes(e.name)}tagMatch(e,t){return t.concat(r(t)).includes(e)}_handleSearchFromTag(e){if("all"==e)this.match_all();else{let t=[];for(let s of this.state.data_list){let a=s.tags.toLowerCase().split(" ");this.tagMatch(e,a)&&t.push(s.name)}this.setState({match_list:t})}}_handleArrowKeyPress(e){if(this.state.multi_select)return;let t,s=this.all_names,a=s.indexOf(this.state.selected_resource.name);if("ArrowDown"==e){for(t=a+1;!this.state.match_list.includes(s[t]);)if((t+=1)>=s.length)return}else for(t=a-1;!this.state.match_list.includes(s[t]);)if((t-=1)<0)return;this.setState({selected_resource:this.state.data_list[t],list_of_selected:[s[t]]})}_view_func(e,t=null){null==t&&(t=this.view_views[this.props.res_type]),this.state.multi_select||window.open($SCRIPT_ROOT+t+this.state.selected_resource.name)}_add_new_row(e){let t=[...this.state.data_list];t.push(e),this.setState({data_list:t},this._refresh_for_new_data_list)}_duplicate_func(e){let t=this.props.res_type,s=this.state.selected_resource.name;$.getJSON($SCRIPT_ROOT+"get_resource_names/"+t,(function(e){Object(a.b)(`Duplicate ${t}`,"New Name",i,s,e.resource_names)}));let n=this;function i(t){const a={new_res_name:t,res_to_copy:s};Object(u.c)(e,a).then(e=>{n._animation_phase(()=>{n._add_new_row(e.new_row)})}).catch(doFlash)}}_animation_phase(e){this.setState({show_animations:!0}),e(),this.setState({show_animations:!1})}_delete_func(e){var t,s=this.props.res_type,n=this.state.list_of_selected;if(1==n.length){t=`Are you sure that you want to delete ${n[0]}?`}else t="Are you sure that you want to delete multiple items?";let i=this;Object(a.a)(`Delete ${s}`,t,"do nothing","delete",(function(){Object(u.c)(e,{resource_names:n}).then(()=>{for(let e=0;e<n.length;++e)i._animation_phase(()=>{i.delete_row(n[e])});i._refresh_for_new_data_list()}).catch(doFlash)}))}_rename_func(){let e=this.props.res_type,t=this.state.selected_resource.name,s=this;function n(a){const n={new_name:a};Object(u.b)(`rename_resource/${e}/${t}`,n,(function(e){if(!e.success)return doFlash(e),!1;{let e=s.get_data_list_index(t),n=[...s.state.data_list];n[e].name=a,s.setState({data_list:n},s._refresh_for_new_data_list)}}))}$.getJSON($SCRIPT_ROOT+"get_resource_names/"+e,(function(s){const i=s.resource_names,r=i.indexOf(t);r>=0&&i.splice(r,1),Object(a.b)(`Rename ${e}`,"New Name",n,t,i)}))}_repository_copy_func(){let e=this.props.res_type,t=this.state.selected_resource.name;function s(s){const a={res_type:e,res_name:t,new_res_name:s};Object(u.c)("/copy_from_repository",a).then(doFlash).catch(doFlash)}return $.getJSON($SCRIPT_ROOT+"get_resource_names/"+e,(function(n){Object(a.b)("Import "+e,"New Name",s,t,n.resource_names)})),t}send_repository_func(){let e=this.props.res_type;function t(t){const s={res_type:e,res_name:res_name,new_res_name:t};Object(u.c)("/send_to_repository",s).then(doFlash).catch(doFlash)}return $.getJSON($SCRIPT_ROOT+"get_repository_resource_names/"+e,(function(s){Object(a.b)(`Share ${e}`,`New ${e} Name`,t,res_name,s.resource_names)})),res_name}_refresh_func(){this.componentDidMount()}_handleTopRightPaneResize(e,t,s){this.setState({top_pane_height:e})}render(){let e=this.get_width_minus_left_offset(this.top_ref),t=this.get_height_minus_top_offset(this.top_ref);const s=["name","created","created_for_sort","updated","updated_for_sort","tags","notes"];let a,n={};for(let e in this.state.selected_resource)s.includes(e)||(n[e]=this.state.selected_resource[e]);0==Object.keys(n).length&&(n=null);let i=""==this.state.selected_resource.tags?[]:this.state.selected_resource.tags.split(" "),r=React.createElement(h.a,{tags:i,name:this.state.selected_resource.name,created:this.state.selected_resource.created,updated:this.state.selected_resource.updated,notes:this.state.selected_resource.notes,handleChange:this._handleMetadataChange,res_type:this.props.res_type,outer_style:{marginLeft:20,marginTop:120},handleNotesBlur:this.state.multi_select?null:this._saveFromSelectedResource,additional_metadata:n});a=null==this.props.aux_pane?r:React.createElement(_.b,{available_height:t,available_width:e-this.state.left_width-25,top_pane:r,bottom_pane:this.props.aux_pane,handleSplitUpdate:this._handleTopRightPaneResize});let o={display:"inline-block",verticalAlign:"top",maxHeight:"100%",overflowY:"scroll",lineHeight:1,whiteSpace:"nowrap",width:this.state.left_width-150,overflowX:"hidden"},l=this.state.data_list.filter(this._filter_on_match_list),c=this.props.ToolbarClass,u=React.createElement(React.Fragment,null,React.createElement("div",{className:"d-flex flex-row",style:{maxHeight:"100%"}},React.createElement("div",{className:"d-flex justify-content-around",style:{width:150}},React.createElement(p,{res_type:this.props.res_type,tag_list:this.state.tag_list,handleSearchFromTag:this._handleSearchFromTag,handleAddTag:this._handleAddTag,doTagDelete:this._doTagDelete,doTagRename:this._doTagRename})),React.createElement("div",{className:"d-flex flex-column"},React.createElement(c,{selected_resource:this.state.selected_resource,multi_select:this.state.multi_select,list_of_selected:this.state.list_of_selected,view_func:this._view_func,repository_copy_func:this._repository_copy_func,duplicate_func:this._duplicate_func,refresh_func:this._refresh_func,delete_func:this._delete_func,rename_func:this._rename_func,animation_phase:this._animation_phase,add_new_row:this._add_new_row}),React.createElement(d.b,{allow_search_inside:this.props.allow_search_inside,allow_search_metadata:this.props.allow_search_metadata,update_search_state:this._update_search_state,search_field_value:this.state.search_field_value,search_inside_checked:this.state.search_inside_checked,search_metadata_checked:this.state.search_metadata_checked}),React.createElement("div",{style:o,id:`${this.props.res_type}-table`},React.createElement(d.c,{data_list:l,sorting_column:this.state.sorting_column,handleHeaderCellClick:this._set_sort_state,selected_resource_names:this.state.list_of_selected,handleRowClick:this._handleRowClick,handleRowDoubleClick:this._handleRowDoubleClick,handleArrowKeyPress:this._handleArrowKeyPress,handleAddTag:this._handleAddTag,show_animations:this.state.show_animations})))));return React.createElement("div",{ref:this.top_ref,className:"d-flex"},React.createElement(_.a,{left_pane:u,right_pane:a,available_height:t,available_width:e,initial_width_fraction:.65,handleSplitUpdate:this._handleSplitResize}))}}m.propTypes={usable_height:PropTypes.number,usable_width:PropTypes.number,res_type:PropTypes.string,allow_search_inside:PropTypes.bool,allow_search_metadata:PropTypes.bool,search_inside_view:PropTypes.string,search_metadata_view:PropTypes.string,ToolbarClass:PropTypes.func,is_repository:PropTypes.bool,tsocket:PropTypes.object,aux_pane:PropTypes.object},m.defaultProps={is_repository:!1,tsocket:null,aux_pane:null}},,,,,,,,function(e,t,s){"use strict";s.r(t);var a=s(7),n=s(5),i=s(6),r=s(12),o=window.ReactBootstrap;const l=17;let c;class p extends n.a{initialize_socket_stuff(){this.socket.emit("join",{user_id:window.user_id,library_id:window.library_id}),this.socket.on("window-open",e=>window.open(`${$SCRIPT_ROOT}/load_temp_page/${e.the_id}`)),this.socket.on("handle-callback",handleCallback),this.socket.on("stop-spinner",stopSpinner),this.socket.on("start-spinner",startSpinner),this.socket.on("show-status-msg",statusMessage),this.socket.on("clear-status-msg",clearStatusMessage),this.socket.on("close-user-windows",e=>{e.originator!=window.library_id&&window.close()}),this.socket.on("doflash",doFlash)}}class h extends React.Component{constructor(e){super(e),this.state={usable_width:window.innerWidth-2*l-30,usable_height:window.innerHeight-50},doBinding(this)}componentDidMount(){window.addEventListener("resize",this._update_window_dimensions),this.setState({mounted:!0}),this._update_window_dimensions(),stopSpinner()}_update_window_dimensions(){this.setState({usable_width:window.innerWidth-2*l-30,usable_height:window.innerHeight-50})}render(){let e=[["collections","file-alt"],["projects","project-diagram"],["tiles","window"],["lists","list-alt"],["code","file-code"]].map(e=>React.createElement(o.Nav.Item,{key:e[0]},React.createElement(o.Nav.Link,{eventKey:e[0]+"-pane"},React.createElement("span",{className:"far um-nav-icon fa-"+e[1]}),React.createElement("span",{className:"um-nav-text"},e[0]))));return React.createElement(React.Fragment,null,React.createElement(o.Tab.Container,{id:"the_container",defaultActiveKey:"collections-pane"},React.createElement("div",{id:"repository_container",className:"d-flex flex-row"},React.createElement("div",{className:"d-flex flex-column justify-content-between left-vertical-nav",style:{marginTop:100}},React.createElement(o.Nav,{variant:"pills",className:"flex-column"},e)),React.createElement("div",{className:"d-flex flex-column"},React.createElement(o.Tab.Content,null,React.createElement(o.Tab.Pane,{eventKey:"collections-pane"},React.createElement(r.a,{usable_height:this.state.usable_height,usable_width:this.state.usable_width,res_type:"collection",allow_search_inside:!1,allow_search_metadata:!1,is_repository:!0,ToolbarClass:u})),React.createElement(o.Tab.Pane,{eventKey:"projects-pane"},React.createElement(r.a,{usable_height:this.state.usable_height,usable_width:this.state.usable_width,res_type:"project",allow_search_inside:!1,allow_search_metadata:!0,search_metadata_view:"search_project_metadata",is_repository:!0,ToolbarClass:m})),React.createElement(o.Tab.Pane,{eventKey:"tiles-pane"},React.createElement(r.a,{usable_height:this.state.usable_height,usable_width:this.state.usable_width,res_type:"tile",allow_search_inside:!0,allow_search_metadata:!0,search_inside_view:"search_inside_tiles",search_metadata_view:"search_tile_metadata",is_repository:!0,ToolbarClass:g})),React.createElement(o.Tab.Pane,{eventKey:"lists-pane"},React.createElement(r.a,{usable_height:this.state.usable_height,usable_width:this.state.usable_width,res_type:"list",allow_search_inside:!0,allow_search_metadata:!0,search_inside_view:"search_inside_lists",search_metadata_view:"search_list_metadata",is_repository:!0,ToolbarClass:f})),React.createElement(o.Tab.Pane,{eventKey:"code-pane"},React.createElement(r.a,{usable_height:this.state.usable_height,usable_width:this.state.usable_width,res_type:"code",allow_search_inside:!0,allow_search_metadata:!0,search_inside_view:"search_inside_code",search_metadata_view:"search_code_metadata",is_repository:!0,ToolbarClass:y})))))))}}class d extends React.Component{prepare_button_groups(){let e,t,s=[];for(let a of this.props.button_groups){e=[];for(let s of a)this.props.multi_select&&!s[3]||(t={name_text:s[0],click_handler:s[1],icon_name:s[2],multi_select:s[3]},e.push(t));0!=e.length&&s.push(e)}return s}prepare_file_adders(){if(null==this.props.file_adders||0==this.props.file_adders.length)return[];let e=[];for(let t of this.props.file_adders){let s={name_text:t[0],click_handler:t[1],icon_name:t[2],multiple:t[3]};e.push(s)}return e}prepare_popup_buttons(){if(null==this.props.popup_buttons||0==this.props.popup_buttons.length)return[];let e=[];for(let t of this.props.popup_buttons){let s={name:t[0],icon_name:t[1]},a=[];for(let e of t[2])a.push({opt_name:e[0],opt_func:e[1]});s.option_list=a,e.push(s)}return e}render(){let e=this.prepare_popup_buttons();return React.createElement(a.c,{button_groups:this.prepare_button_groups(),file_adders:this.prepare_file_adders(),popup_buttons:e})}}d.propTypes={button_groups:PropTypes.array,file_adders:PropTypes.array,popup_buttons:PropTypes.array,multi_select:PropTypes.bool},d.defaultProps={file_adders:null,popup_buttons:null};let _={view_func:PropTypes.func,repository_copy_func:PropTypes.func,selected_resource:PropTypes.object,list_of_selected:PropTypes.array,muti_select:PropTypes.bool};class u extends React.Component{constructor(e){super(e),doBinding(this)}_collection_view(){this.props.view_func("/main/")}get button_groups(){return[[["copy",this.props.repository_copy_func,"share",!1]]]}render(){return React.createElement(d,{button_groups:this.button_groups,multi_select:this.props.multi_select})}}u.propTypes=_;class m extends React.Component{constructor(e){super(e),doBinding(this)}get button_groups(){return[[["copy",this.props.repository_copy_func,"share",!1]]]}render(){return React.createElement(d,{button_groups:this.button_groups,multi_select:this.props.multi_select})}}m.propTypes=_;class g extends React.Component{constructor(e){super(e),doBinding(this)}_tile_view(){this.props.view_func("/repository_view_module/")}get button_groups(){return[[["view",this._tile_view,"book-open",!1],["copy",this.props.repository_copy_func,"share",!1]]]}render(){return React.createElement(d,{button_groups:this.button_groups,multi_select:this.props.multi_select})}}g.propTypes=_;class f extends React.Component{constructor(e){super(e),doBinding(this)}_list_view(){this.props.view_func("/repository_view_list/")}get button_groups(){return[[["view",this._list_view,"book-open",!1],["copy",this.props.repository_copy_func,"share",!1]]]}render(){return React.createElement(d,{button_groups:this.button_groups,multi_select:this.props.multi_select})}}f.propTypes=_;class y extends React.Component{constructor(e){super(e),doBinding(this)}_code_view(){this.props.view_func("/repository_view_code/")}get button_groups(){return[[["view",this._code_view,"book-open",!1],["copy",this.props.repository_copy_func,"share",!1]]]}render(){return React.createElement(d,{button_groups:this.button_groups,multi_select:this.props.multi_select})}}y.propTypes=_,function(){Object(i.b)(),c=new p("library",5e3);let e=document.querySelector("#library-home-root");ReactDOM.render(React.createElement(h,null),e)}()}]);