!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=33)}([function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return a})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return c})),s.d(t,"e",(function(){return p}));let n={};function i(e){let t=e.callback_id,s=n[t];delete n[t],s(e.response_data)}function o(e,t,s){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json",success:s})}function r(e,t){return new Promise((function(s,n){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json",success:e=>{e.success&&s(e),n(e)}})}))}function a(e,t){return new Promise((function(s,n){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,type:"POST",data:t,contentType:!1,processData:!1,success:e=>{e.success&&s(e),n(e)}})}))}function l(e,t,s,i){const o={source:"client",dest:e,task_type:t,task_data:s,response_data:null,main_id:main_id,expiration:null};if(void 0!==i&&null!=i){const e=guid();n[e]=i,o.callback_id=e,o.callback_type="callback_no_context"}else o.callback_id=null,o.callback_type="no_callback";$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(o),dataType:"json"})}function p(e,t,s){const n={source:"client",dest:e,task_type:t,task_data:s,response_data:null,main_id:main_id,callback_id:null,callback_type:"no_callback",expiration:null};$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!1,data:JSON.stringify(n),dataType:"json"})}function c(e,t,s,i){const o={source:"client",dest:e,task_type:t,task_data:s,response_data:null,expiration:null};if(void 0!==i){const e=guid();n[e]=i,o.callback_id=e,o.callback_type="callback_no_context"}else o.callback_id=null,o.callback_type="no_callback";$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(o),dataType:"json"})}},function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return p})),s.d(t,"a",(function(){return c}));var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},i=blueprint;const o=i.Toaster.create({className:"recipe-toaster",position:i.Position.TOP,autoFocus:!0}),r={"alert-success":"Success","alert-warning":"Warning","alert-info":null};function a(e){let t;t=e.hasOwnProperty("alert_type")?r[e.alert_type]:null,o.show({message:e.message,intent:t})}function l(e){a(e)}function p(e,t=null){return class extends React.Component{constructor(e){super(e),doBinding(this),this.tsocket=t,this.state={show_spinner:!1,status_message:null,dark_spinner:!1,spinner_size:this.props.spinner_size?this.props.spinner_size:25}}componentDidMount(){this.tsocket&&(this.tsocket.socket.on("stop-spinner",this._stopSpinner),this.tsocket.socket.on("start-spinner",this._startSpinner),this.tsocket.socket.on("show-status-msg",this._statusMessageFromData),this.tsocket.socket.on("clear-status-msg",this._clearStatusMessage))}_stopSpinner(){this.setState({show_spinner:!1})}_startSpinner(e=!1){this.setState({show_spinner:!0,dark_spinner:e})}_clearStatusMessage(){this.setState({status_message:null})}_clearStatus(){this.setState({show_spinner:!1,status_message:null})}_statusMessage(e,t=null){this.setState({status_message:e},()=>{t&&setTimeout(self._clearStatusMessage,1e3*data.timeout)})}_statusMessageFromData(e){let t=this;this.setState({status_message:e.message},()=>{e.hasOwnProperty("timeout")&&null!=e.timeout&&setTimeout(t._clearStatusMessage,1e3*e.timeout)})}_setStatus(e){this.setState(e)}_statusFuncs(){return{startSpinner:this._startSpinner,stopSpinner:this._stopSpinner,clearStatus:this._clearStatus,clearStatusMessage:this._clearStatusMessage,statusMessage:this._statusMessage,setStatus:this._setStatus}}render(){return React.createElement(React.Fragment,null,React.createElement(e,n({},this.props,{statusFuncs:this._statusFuncs(),startSpinner:this._startSpinner,stopSpinner:this._stopSpinner,clearStatus:this._clearStatus,clearStatusMessage:this._clearStatus,statusMessage:this._statusMessage,setStatus:this._setStatus})),React.createElement(c,this.state))}}}class c extends React.Component{render(){this.props.dark_spinner;return React.createElement("div",{className:"d-flex flex-row",style:{position:"absolute",bottom:10,marginLeft:15}},this.props.show_spinner&&React.createElement(i.Spinner,{className:"bp3-dark",size:20}),this.props.status_message&&React.createElement("div",{className:"d-flex flex-column justify-content-around",style:{positoin:"absolute",marginLeft:50}},React.createElement("div",{id:"status-msg-area",className:"bp3-ui-text"},this.props.status_message)))}}c.propTypes={show_spinner:PropTypes.bool,status_message:PropTypes.string,spinner_size:PropTypes.number},c.defaultProps={show_spinner:!1,status_message:null,spinner_size:25}},function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return c})),s.d(t,"c",(function(){return l}));var n=s(6),i=blueprint;bpselect;class o extends React.Component{constructor(e){super(e),doBinding(this);let t=this.props.default_value;for(var s=1;this.name_exists(t);)s+=1,t=this.props.default_value+String(s);this.state={show:!1,current_value:t,checkbox_states:{},warning_text:""}}_changeHandler(e){this.setState({current_value:e.target.value})}_checkbox_change_handler(e){e.target.checked;let t=Object.assign({},this.state.checkbox_states);t[e.target.id]=e.target.checked,this.setState({checkbox_states:t})}componentDidMount(){if(this.setState({show:!0}),null!=this.props.checkboxes&&0!=this.props.checkboxes.length){let e={};for(let t of this.props.checkboxes)e[t.id]=!1;this.setState({checkbox_states:e})}}name_exists(e){return this.props.existing_names.indexOf(e)>-1}_submitHandler(e){let t;""==this.state.current_value?(t="An empty name is not allowed here.",this.setState({warning_text:t})):this.name_exists(this.state.current_value)?(t="That name already exists",this.setState({warning_text:t})):(this.setState({show:!1}),this.props.handleSubmit(this.state.current_value,this.state.checkbox_states),this.props.handleClose())}_cancelHandler(){this.setState({show:!1}),this.props.handleCancel&&this.props.handleCancel(),this.props.handleClose()}_refHandler(e){this.input_ref=e}render(){let e=[];if(null!=this.props.checkboxes&&0!=this.props.checkboxes.length)for(let t of this.props.checkboxes){let s=React.createElement(i.Checkbox,{checked:this.state.checkbox_states[t.checkname],label:t.checktext,id:t.checkname,key:t.checkname,onChange:this._checkbox_change_handler});e.push(s)}return React.createElement(i.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,onOpened:()=>{$(this.input_ref).focus()},canEscapeKeyClose:!0},React.createElement("form",{onSubmit:this._submitHandler},React.createElement("div",{className:i.Classes.DIALOG_BODY},React.createElement(i.FormGroup,{label:this.props.field_title,helperText:this.state.warning_text},React.createElement(i.InputGroup,{inputRef:this._refHandler,onChange:this._changeHandler,value:this.state.current_value})),0!=e.length&&e),React.createElement("div",{className:i.Classes.DIALOG_FOOTER},React.createElement("div",{className:i.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(i.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(i.Button,{intent:i.Intent.PRIMARY,onClick:this._submitHandler},"Submit")))))}}function r(e,t,s,n,i,r=null,a=null){void 0===i&&(i=[]);let l=document.querySelector("#modal-area");ReactDOM.render(React.createElement(o,{handleSubmit:s,handleCancel:a,handleClose:function(){ReactDOM.unmountComponentAtNode(l)},title:e,field_title:t,default_value:n,checkboxes:r,existing_names:i}),l)}o.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,field_title:PropTypes.string,default_value:PropTypes.string,existing_names:PropTypes.array,checkboxes:PropTypes.array},o.defaultProps={existing_names:[],default_value:"",checkboxes:null};class a extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1,value:null}}componentDidMount(){this.setState({show:!0,value:this.props.option_list[0]})}_handleChange(e){this.setState({value:e})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(this.state.value),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(i.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,canEscapeKeyClose:!0},React.createElement("div",{className:i.Classes.DIALOG_BODY},React.createElement(i.FormGroup,{title:this.props.select_label},React.createElement(n.a,{options:this.props.option_list,onChange:this._handleChange,value:this.state.value}))),React.createElement("div",{className:i.Classes.DIALOG_FOOTER},React.createElement("div",{className:i.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(i.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(i.Button,{intent:i.Intent.PRIMARY,onClick:this._submitHandler},"Submit"))))}}function l(e,t,s,n,i,o){let r=document.querySelector("#modal-area");ReactDOM.render(React.createElement(a,{handleSubmit:i,handleClose:function(){ReactDOM.unmountComponentAtNode(r)},title:e,select_label:t,submit_text:n,option_list:o,cancel_text:s}),r)}a.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,handleCancel:PropTypes.func,title:PropTypes.string,select_label:PropTypes.string,option_list:PropTypes.array,submit_text:PropTypes.string,cancel_text:PropTypes.string};class p extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1}}componentDidMount(){this.setState({show:!0})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(i.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,canEscapeKeyClose:!0},React.createElement("div",{className:i.Classes.DIALOG_BODY},React.createElement("p",null,this.props.text_body)),React.createElement("div",{className:i.Classes.DIALOG_FOOTER},React.createElement("div",{className:i.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(i.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(i.Button,{intent:i.Intent.PRIMARY,onClick:this._submitHandler},"Submit"))))}}function c(e,t,s,n,i){let o=document.querySelector("#modal-area");ReactDOM.render(React.createElement(p,{handleSubmit:i,handleClose:function(){ReactDOM.unmountComponentAtNode(o)},title:e,text_body:t,submit_text:n,cancel_text:s}),o)}p.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,text_body:PropTypes.string,submit_text:PropTypes.string,cancel_text:PropTypes.string};(class extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1}}componentDidMount(){this.setState({show:!0})}_closeHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(i.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._closeHandler,canEscapeKeyClose:!0},React.createElement("div",{className:i.Classes.DIALOG_BODY},React.createElement("p",null,this.props.text_body)),React.createElement("div",{className:i.Classes.DIALOG_FOOTER},React.createElement("div",{className:i.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(i.Button,{onClick:this._closeHandler},"Okay"))))}}).propTypes={handleClose:PropTypes.func,title:PropTypes.string,text_body:PropTypes.string,close_text:PropTypes.string}},function(e,t,s){"use strict";s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return a})),s.d(t,"e",(function(){return p})),s.d(t,"a",(function(){return _})),s.d(t,"b",(function(){return r})),s.d(t,"f",(function(){return o}));let n=blueprint,i=bptable;function o(e){return class extends React.Component{render(){if(this.props.tooltip){let t=this.props.tooltipDelay?this.props.tooltipDelay:1e3;return React.createElement(n.Tooltip,{content:this.props.tooltip,hoverOpenDelay:t},React.createElement(e,this.props))}return React.createElement(e,this.props)}}}class r extends React.Component{constructor(e){super(e),this.update_props=["icon","minimal","extra_glyph_text","style"]}shouldComponentUpdate(e,t){for(let t of this.update_props)if(e[t]!=this.props[t])return!0;return!1}render(){let e=null==this.props.style?{paddingLeft:2,paddingRight:2}:this.props.style;return React.createElement(n.Button,{type:"button",minimal:this.props.minimal,small:!0,style:e,onMouseDown:e=>{e.preventDefault()},onClick:this.props.handleClick,intent:this.props.intent,icon:this.props.icon},this.props.extra_glyph_text&&React.createElement("span",{className:"extra-glyph-text"},this.props.extra_glyph_text))}}r.propTypes={icon:PropTypes.string,minimal:PropTypes.bool,extra_glyph_text:PropTypes.string,style:PropTypes.object,handleClick:PropTypes.func,intent:PropTypes.string},r.defaultProps={style:null,extra_glyph_text:null,minimal:!0,intent:"none"},r=o(r);(class extends React.Component{constructor(e){super(e),doBinding(this),this.state={xpos:0,ypos:0,initial_x:null,initial_y:null,active:!1}}_dragStart(e){this.setState({initial_x:e.clientX,initial_y:e.clientY,active:!0})}_drag(e){if(this.state.active){let t=e.clientX-this.state.initial_x,s=e.clientY-this.state.initial_y;this.setState({xpos:t,ypos:s})}}_dragEnd(e){this.setState({active:!1,xpos:0,ypos:0})}render(){let e={fontSize:25};return this.state.active&&(e.transform="translate3d("+this.state.xpos+"px, "+this.state.ypos+"px, 0)"),React.createElement("span",{style:e,onMouseDown:this._dragStart,onMouseMove:this._drag,onMouseUp:this._dragEnd,className:"fal fa-caret-right"})}}).propTypes={handleDrag:PropTypes.func};class a extends React.Component{render(){return React.createElement(n.FormGroup,{label:this.props.label,style:{marginRight:5}},React.createElement(n.InputGroup,{onChange:this.props.onChange,value:this.props.the_value}))}}function l(e){return React.createElement(n.FormGroup,{label:e.label,style:{marginRight:5}},React.createElement(n.HTMLSelect,{options:e.option_list,onChange:e.onChange,value:e.the_value}))}a.propTypes={show:PropTypes.bool,label:PropTypes.string,onChange:PropTypes.func,the_value:PropTypes.string},a.defaultProps={show:!0};class p extends React.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(e.target.value)}render(){let e={marginBottom:5,width:"auto"};null!=this.props.height&&(e.height=this.props.height),null!=this.props.maxWidth&&(e.maxWidth=this.props.maxWidth),null!=this.props.fontSize&&(e.fontSize=this.props.fontSize);let t=this.props.option_list.map((e,t)=>React.createElement("option",{key:t},e));return React.createElement(n.HTMLSelect,{style:e,onChange:this.handleChange,minimal:this.props.minimal,value:this.props.value},t)}}p.propTypes={option_list:PropTypes.array,onChange:PropTypes.func,minimal:PropTypes.bool,value:PropTypes.string,height:PropTypes.number,maxWidth:PropTypes.number,fontSize:PropTypes.number},p.defaultProps={height:null,maxWidth:null,fontSize:null,minimal:!1};class c extends React.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.td_ref=React.createRef()}handleChange(e){let t=this.td_ref.current.innerHTML.trim();this.props.handleCellChange(this.props.theRow,this.props.theCol,t)}render(){return React.createElement("td",{contentEditable:this.props.content_editable,onBlur:this.handleChange,ref:this.td_ref,suppressContentEditableWarning:!0},this.props.children)}}c.propTypes={content_editable:PropTypes.bool,handleCellChange:PropTypes.func,theRow:PropTypes.number,theColumn:PropTypes.string};class h extends React.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.handleRowClick(this.props.row_index)}render(){let e=this.props.columns.map((e,t)=>React.createElement(c,{key:t,content_editable:this.props.content_editable,theRow:this.props.row_index,theCol:e,handleCellChange:this.props.handleCellChange},this.props.data_dict[e]));e.push(React.createElement("td",{key:"999"},React.createElement("span",{className:"ui-icon ui-icon-arrowthick-2-n-s"})));let t=this.props.active?"selector-button active":"selector-button";return React.createElement("tr",{className:t,id:this.props.row_index,onClick:this.handleClick},e)}}h.propTypes={columns:PropTypes.array,row_index:PropTypes.number,data_dict:PropTypes.object,active:PropTypes.bool,handleRowClick:PropTypes.func,content_editable:PropTypes.bool,handleCellChange:PropTypes.func},h.defaultProps={content_editable:!1};class d extends React.Component{render(){let e=this.props.columns.map((e,t)=>React.createElement("th",{key:t},e));return e.push(React.createElement("th",{key:"999"}," ")),React.createElement("thead",null,React.createElement("tr",{className:"selector-button",key:"header"},e))}}d.propTypes={columns:PropTypes.array};class _ extends React.Component{constructor(e){super(e),doBinding(this)}_onRowsReordered(e,t){let s=[...this.props.data_array],n=s[e];s.splice(e,1),s.splice(t,0,n),this.props.handleChange(s)}_onConfirmCellEdit(e,t,s){let n=[...this.props.data_array];n[t][this.props.columns[s]]=e,this.props.handleChange(n)}_onSelection(e){0!=e.length&&e[0].hasOwnProperty("rows")&&this.props.handleActiveRowChange(e[0].rows[0])}_cellRendererCreator(e){let t=this;return s=>{let n;return n=Object.keys(t.props.data_array[s]).includes(e)?t.props.data_array[s][e]:"",React.createElement(i.EditableCell,{key:e,truncated:!0,rowIndex:s,columnIndex:this.props.columns.indexOf(e),wrapText:!0,onConfirm:t._onConfirmCellEdit,value:n})}}_rowHeaderCellRenderer(e){return React.createElement(i.RowHeaderCell,{key:e,name:e})}render(){let e=this,t=this.props.columns.map(t=>{const s=e._cellRendererCreator(t);return React.createElement(i.Column,{cellRenderer:s,enableColumnReordering:!1,key:t,name:t})});return React.createElement(i.Table,{enableFocusedCell:!0,numRows:this.props.data_array.length,enableColumnReordering:!1,selectionModes:[i.RegionCardinality.FULL_COLUMNS,i.RegionCardinality.FULL_ROWS],enableRowReordering:!0,onRowsReordered:this._onRowsReordered,onSelection:this._onSelection,enableMultipleSelection:!1},t)}}_.propTypes={columns:PropTypes.array,data_array:PropTypes.array,handleActiveRowChange:PropTypes.func,handleChange:PropTypes.func},_.defaultProps={content_editable:!1};class u extends React.Component{constructor(e){super(e),this.tbody_ref=React.createRef(),this.update_option_order=this.update_option_order.bind(this),this.handleCellChange=this.handleCellChange.bind(this)}componentDidMount(){$(this.tbody_ref.current).sortable({handle:".ui-icon",update:this.update_option_order})}handleCellChange(e,t,s){let n=this.props.data_array;n[e][t]=s,this.props.handleChange(n)}update_option_order(e,t){let s=$(this.tbody_ref.current).sortable("toArray"),n=s.indexOf(String(this.props.active_row)),i=s.map((e,t)=>this.props.data_array[parseInt(e)]);this.props.handleChange(i),this.props.handleActiveRowChange(n)}render(){let e=this.props.data_array.map((e,t)=>React.createElement(h,{columns:this.props.columns,data_dict:e,key:e[this.props.columns[0]],row_index:t,active:t==this.props.active_row,handleRowClick:this.props.handleActiveRowChange,content_editable:this.props.content_editable,handleCellChange:this.handleCellChange}));return React.createElement(n.HTMLTable,{style:{fontSize:12},bordered:!0,condensed:!0,interactive:!0,striped:!1},React.createElement(d,{columns:this.props.columns}),React.createElement("tbody",{ref:this.tbody_ref},e))}}u.propTypes={columns:PropTypes.array,data_array:PropTypes.array,active_row:PropTypes.number,handleActiveRowChange:PropTypes.func,handleChange:PropTypes.func,content_editable:PropTypes.bool},u.defaultProps={content_editable:!1}},function(e,t,s){"use strict";s.d(t,"d",(function(){return l})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return o}));var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};const i=15,o=35,r=50,a=50;function l(){return{usable_width:window.innerWidth-2*i,usable_height:window.innerHeight-o-a,usable_height_no_bottom:window.innerHeight-a,body_height:window.innerHeight-o}}const p=React.createContext({available_height:500,available_width:500});class c extends React.Component{constructor(e){super(e),this.dref=React.createRef(),this.state={mounted:!1,availableHeight:this.props.parentHeight-r,availableWidth:this.props.parentWidth-r,previousParentHeight:this.props.parentHeight,previousParentWidth:this.props.parentWidth,indent_left:0},doBinding(this)}componentDidMount(){this.setState({mounted:!0},this._updateDimensions)}_dimensionsHaveChanged(){return this.props.parentHeight!=this.state.previousParentHeight||this.props.parentWidth!=this.state.previousParentWidth}componentDidUpdate(){this._dimensionsHaveChanged()&&this.setState({previousParentHeight:this.props.parentHeight,previousParentWidth:this.props.parentWidth},this._updateDimensions)}_updateDimensions(){}render(){var e=this.props.component;let t=Object.assign({},this.props.div_style);if(this.props.am_outer&&(t.position="absolute",t.left=i),this.props.apply_dimensions_to_div&&(t=Object.assign({width:this.state.availableWidth,height:this.state.availableHeight},t)),this.props.component)return React.createElement(React.Fragment,null,React.createElement("div",{ref:this.dref,style:t,className:"sizer"},React.createElement(e,n({available_height:this.state.availableHeight,available_width:this.state.availableWidth},this.props))));{let e={available_height:this.state.availableHeight,available_width:this.state.availableWidth};return React.createElement(React.Fragment,null,React.createElement("div",{ref:this.dref,style:t,className:"sizer"}),React.createElement(p.Provider,{value:e},this.props.children))}}}c.propTypes={parentHeight:PropTypes.number,parentWidth:PropTypes.number,component:PropTypes.func,bottom_ref:PropTypes.object,right_ref:PropTypes.object,am_outer:PropTypes.bool,div_style:PropTypes.object,apply_dimensions_to_div:PropTypes.bool},c.defaultProps={bottom_ref:null,right_ref:null,component:null,am_outer:!1,div_style:{},apply_dimensions_to_div:!1}},function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=React.createContext({readOnly:!1})},function(e,t,s){"use strict";s.d(t,"c",(function(){return y})),s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return l}));var n=s(5),i=s(0),o=blueprint,r=bpselect;let a={collection:"database",project:"projects",tile:"application",list:"list",code:"code"};class l extends React.Component{constructor(e){super(e),doBinding(this),this.state={activeItem:this.props.value}}shouldComponentUpdate(e,t){return!propsAreEqual(e,this.props)}_filterSuggestion(e,t){if(0==e.length||t.isgroup)return!0;return new RegExp(e.toLowerCase()).test(t.text.toLowerCase())}_handleActiveItemChange(e){}_getActiveItem(e){for(let t of this.props.options)if(_.isEqual(t,e))return t;return null}render(){return React.createElement(r.Select,{activeItem:this._getActiveItem(this.props.value),onActiveItemChange:this._handleActiveItemChange,itemRenderer:c,itemPredicate:this._filterSuggestion,items:this.props.options,onItemSelect:this.props.onChange,popoverProps:{minimal:!0,boundary:"window",modifiers:{flip:!1,preventOverflow:!0},position:o.PopoverPosition.BOTTOM_LEFT}},React.createElement(o.Button,{text:this.props.value.text,className:"button-in-select",icon:this.props.buttonIcon}))}}l.propTypes={options:PropTypes.array,onChange:PropTypes.func,value:PropTypes.object,buttonIcon:PropTypes.string},l.defaultProps={buttonIcon:null};class p extends React.Component{constructor(e){super(e),doBinding(this)}shouldComponentUpdate(e,t){return!propsAreEqual(e,this.props)}render(){return this.props.item.isgroup?React.createElement(o.MenuDivider,{className:"tile-form-menu-item",title:this.props.item.text}):React.createElement(o.MenuItem,{className:"tile-form-menu-item",text:this.props.item.text,key:this.props.item,onClick:this.props.handleClick,active:this.props.modifiers.active,shouldDismissPopover:!0})}}function c(e,{modifiers:t,handleClick:s}){return React.createElement(p,{item:e,modifiers:t,handleClick:s})}p.propTypes={item:PropTypes.object,modifiers:PropTypes.object,handleClick:PropTypes.func};class h extends React.Component{constructor(e){super(e),doBinding(this),this.state={activeItem:this.props.value}}shouldComponentUpdate(e,t){return!propsAreEqual(e,this.props)}_filterSuggestion(e,t){if(0==e.length)return!0;return new RegExp(e.toLowerCase()).test(t.toLowerCase())}_handleActiveItemChange(e){this.setState({activeItem:e})}render(){return React.createElement(r.Select,{className:"tile-form-menu-item",activeItem:this.state.activeItem,onActiveItemChange:this._handleActiveItemChange,itemRenderer:u,itemPredicate:this._filterSuggestion,items:_.cloneDeep(this.props.options),onItemSelect:this.props.onChange,popoverProps:{minimal:!0,boundary:"window",modifiers:{flip:!1,preventOverflow:!0},position:o.PopoverPosition.BOTTOM_LEFT}},React.createElement(o.Button,{className:"button-in-select",text:this.props.value,icon:this.props.buttonIcon}))}}h.propTypes={options:PropTypes.array,onChange:PropTypes.func,value:PropTypes.string,buttonIcon:PropTypes.string},h.defaultProps={buttonIcon:null};class d extends React.Component{constructor(e){super(e),doBinding(this)}shouldComponentUpdate(e,t){return!propsAreEqual(e,this.props)}render(){return React.createElement(o.MenuItem,{className:"tile-form-menu-item",text:this.props.item,key:this.props.item,active:this.props.modifiers.active,onClick:this.props.handleClick,shouldDismissPopover:!0})}}function u(e,{modifiers:t,handleClick:s}){return React.createElement(d,{item:e,modifiers:t,handleClick:s})}d.propTypes={item:PropTypes.string,modifiers:PropTypes.object,handleClick:PropTypes.func};const m=(e,t,s)=>{return React.createElement(o.MenuItem,{icon:"add",key:"create_item",text:`Create "${e}"`,active:t,onClick:s,shouldDismissPopover:!1})};class g extends React.Component{constructor(e){super(e),doBinding(this),this.state={query:"",suggestions:[]}}componentDidMount(){let e=this,t={res_type:this.props.res_type,is_repository:!1};Object(i.c)("get_tag_list",t).then((function(t){let s=t.tag_list;e.setState({suggestions:s})}))}renderTag(e){return e}_handleDelete(e,t){let s=[...this.props.tags];s.splice(t,1),this.props.handleChange(s)}_handleAddition(e){let t=[...this.props.tags];t.push(e),this.props.handleChange(t)}_filterSuggestion(e,t){if(0==e.length)return!1;return new RegExp("^"+e).test(t)}_createItemFromQuery(e){return e}render(){return this.context.readOnly?React.createElement(o.TagInput,{values:this.props.tags,disabled:!0}):React.createElement(r.MultiSelect,{allowCreate:!0,openOnKeyDown:!0,createNewItemFromQuery:this._createItemFromQuery,createNewItemRenderer:m,resetOnSelect:!0,itemRenderer:u,selectedItems:this.props.tags,allowNew:!0,items:this.state.suggestions,itemPredicate:this._filterSuggestion,tagRenderer:this.renderTag,tagInputProps:{onRemove:this._handleDelete},onItemSelect:this._handleAddition})}}g.proptypes={tags:PropTypes.array,handleChange:PropTypes.func,res_type:PropTypes.string},g.contextType=n.a;class f extends React.Component{constructor(e){super(e),this.state={md_height:500,show_markdown:!this.hasOnlyWhitespace&&this.props.show_markdown_initial},doBinding(this),this.md_ref=React.createRef(),this.converter=new showdown.Converter,this.awaiting_focus=!1}getNotesField(){return $(this.notes_ref)}get hasOnlyWhitespace(){return!this.props.notes.trim().length}getMarkdownField(){return $(this.md_ref.current)}componentDidUpdate(e,t,s){this.awaiting_focus?(this.focusNotes(),this.awaiting_focus=!1):this.state.show_markdown||this.notes_ref==document.activeElement||this._showMarkdown()}focusNotes(){this.getNotesField().focus()}_hideMarkdown(){this.context.readOnly||(this.awaiting_focus=!0,this.setState({show_markdown:!1}))}_handleMyBlur(){this._showMarkdown(),null!=this.props.handleBlur&&this.props.handleBlur()}_showMarkdown(){this.hasOnlyWhitespace||this.setState({show_markdown:!0})}_notesRefHandler(e){this.notes_ref=e}render(){let e=!this.hasOnlyWhitespace&&this.state.show_markdown,t={display:e?"none":"block",fontSize:13},s={display:e?"block":"none",maxHeight:this.state.md_height,fontSize:13};var n;e&&(n=this.converter.makeHtml(this.props.notes));let i={__html:n};return React.createElement(React.Fragment,null,React.createElement(o.TextArea,{rows:"10",cols:"50",inputRef:this._notesRefHandler,growVertically:!1,onBlur:this._handleMyBlur,onChange:this.props.handleChange,value:this.props.notes,disabled:this.context.readOnly,style:t}),React.createElement("div",{ref:this.md_ref,style:s,onClick:this._hideMarkdown,className:"notes-field-markdown-output",dangerouslySetInnerHTML:i}))}}f.contextType=n.a,f.propTypes={notes:PropTypes.string,handleChange:PropTypes.func,show_markdown_initial:PropTypes.bool,handleBlur:PropTypes.func},f.defaultProps={handleBlur:null};class y extends React.Component{constructor(e){super(e),doBinding(this)}_handleNotesChange(e){this.props.handleChange({notes:e.target.value})}_handleTagsChange(e){this.props.handleChange({tags:e})}_handleTagsChangeNative(e){this.props.handleChange({tags:e})}_handleCategoryChange(e){this.props.handleChange({category:e.target.value})}render(){let e;if(null!=this.props.additional_metadata){e=[];for(let t in this.props.additional_metadata){let s=this.props.additional_metadata[t];if(Array.isArray(s))s=s.join(", ");else if("collection_name"==t){let e=/\.\w*$/.exec(s);null!=e&&(s=e[0].slice(1))}e.push(React.createElement(o.FormGroup,{label:t+": ",key:t,inline:!0},React.createElement(o.InputGroup,{disabled:!0,style:{color:"#394B59"},value:s,fill:!0})))}}return React.createElement(o.Card,{elevation:this.props.elevation,className:"combined-metadata",style:this.props.outer_style},null!=this.props.name&&React.createElement("h6",{style:{color:"#106ba3"}},React.createElement(o.Icon,{icon:a[this.props.res_type],style:{marginRight:4}}),this.props.name),React.createElement(o.FormGroup,{label:"Tags"},React.createElement(g,{tags:this.props.tags,handleChange:this._handleTagsChange,res_type:this.props.res_type})),null!=this.props.category&&React.createElement(o.FormGroup,{label:"Category"},React.createElement(o.InputGroup,{onChange:this._handleCategoryChange,value:this.props.category})),React.createElement(o.FormGroup,{label:"Notes"},React.createElement(f,{notes:this.props.notes,handleChange:this._handleNotesChange,show_markdown_initial:!0,handleBlur:this.props.handleNotesBlur})),React.createElement(o.FormGroup,{label:"Created ",inline:!0},React.createElement(o.InputGroup,{disabled:!0,style:{color:"#394B59"},value:this.props.created})),null!=this.props.updated&&React.createElement(o.FormGroup,{label:"Updated: ",inline:!0},React.createElement(o.InputGroup,{disabled:!0,style:{color:"#394B59"},value:this.props.updated})),null!=this.props.additional_metadata&&e)}}y.propTypes={outer_style:PropTypes.object,elevation:PropTypes.number,res_type:PropTypes.string,name:PropTypes.string,created:PropTypes.string,updated:PropTypes.string,tags:PropTypes.array,notes:PropTypes.string,category:PropTypes.string,handleChange:PropTypes.func,handleNotesBlur:PropTypes.func,additional_metadata:PropTypes.object},y.defaultProps={outer_style:{marginLeft:20,overflow:"auto",padding:15,backgroundColor:"#f5f8fa"},elevation:0,handleNotesBlur:null,category:null,name:null,updated:null,additional_metadata:null}},function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return p})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return a}));var n=s(2),i=s(0),o=s(1);let r=blueprint;class a extends React.Component{constructor(e){super(e),doBinding(this)}_filter_on_match_list(e){return!this.props.hidden_items.includes(e)}render(){let e=Object.keys(this.props.option_dict).filter(this._filter_on_match_list).map((e,t)=>{let s=this.props.icon_dict.hasOwnProperty(e)?this.props.icon_dict[e]:null;return React.createElement(r.MenuItem,{disabled:this.props.disable_all||this.props.disabled_items.includes(e),onClick:this.props.option_dict[e],icon:s,key:e,text:e})}),t=React.createElement(r.Menu,null,e);if(this.props.alt_button){let e=this.props.alt_button;return React.createElement(r.Popover,{minimal:!0,content:t,position:r.PopoverPosition.BOTTOM_LEFT},React.createElement(e,null))}return React.createElement(r.Popover,{minimal:!0,content:t,position:r.PopoverPosition.BOTTOM_LEFT},React.createElement(r.Button,{text:this.props.menu_name,small:!0,minimal:!0}))}}a.propTypes={menu_name:PropTypes.string,option_dict:PropTypes.object,icon_dict:PropTypes.object,disabled_items:PropTypes.array,disable_all:PropTypes.bool,hidden_items:PropTypes.array,alt_button:PropTypes.func},a.defaultProps={disabled_items:[],disable_all:!1,hidden_items:[],icon_dict:{},alt_button:null};class l extends React.Component{constructor(e){super(e),doBinding(this)}_saveProjectAs(){this.props.startSpinner();let e=this;function t(){e.props.stopSpinner()}function s(t){const s={project_name:t,main_id:window.main_id,doc_type:"table",purgetiles:!0};function n(s){s.success?(window.is_project=!0,window._project_name=t,window.is_jupyter=!1,document.title=t,e.props.clearStatusMessage(),s.alert_type="alert-success",s.timeout=2e3,Object(i.f)("host","refresh_project_selector_list",{user_id:window.user_id}),e.props.updateLastSave(),e.props.stopSpinner(),Object(o.b)(s)):(e.props.clearStatusMessage(),s.message=s.message,s["alert-type"]="alert-warning",e.props.stopSpinner(),Object(o.b)(s))}s.interface_state=e.props.interface_state,window.is_notebook?Object(i.f)(window.main_id,"save_new_notebook_project",s,n):(s.purgetiles=!0,Object(i.f)(window.main_id,"save_new_project",s,n))}Object(i.f)("host","get_project_names",{user_id:window.user_id},(function(e){Object(n.b)("Save Project As","New Project Name",s,"NewProject",e.project_names,null,t)}))}_saveProject(){let e=this;const t={main_id:window.main_id,project_name:window._project_name};t.interface_state=this.props.interface_state,this.props.startSpinner(),Object(i.f)(window.main_id,"update_project",t,(function(t){e.props.startSpinner(),t.success?(t.alert_type="alert-success",t.timeout=2e3,e.props.updateLastSave()):t.alert_type="alert-warning";e.props.clearStatusMessage(),e.props.stopSpinner(),Object(o.b)(t)}))}_exportAsJupyter(){this.props.startSpinner();let e=this;function t(t){var s=[];for(let t of e.props.console_items){let e={};e.source=t.console_text,e.cell_type="code"==t.type?"code":"markdown","code"==t.type&&(e.outputs=[]),s.push(e)}const n={project_name:t,main_id:window.main_id,cell_list:s};Object(i.f)(window.main_id,"export_to_jupyter_notebook",n,(function(t){e.props.clearStatusMessage(),t.success?(t.alert_type="alert-success",t.timeout=2e3):t["alert-type"]="alert-warning";e.props.stopSpinner(),Object(o.b)(t)}))}Object(i.f)("host","get_project_names",{user_id:user_id},(function(e){Object(n.b)("Export Notebook in Jupyter Format","New Project Name",t,"NewJupyter",e.project_names,void 0)}))}_exportDataTable(){Object(n.b)("Export Data","New Collection Name",(function(e){const t={export_name:e,main_id:window.main_id,user_id:window.user_id};$.ajax({url:$SCRIPT_ROOT+"/export_data",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json"})}))}_consoleToNotebook(){const e={main_id:window.main_id,console_items:this.props.console_items,user_id:window.user_id};Object(i.f)(window.main_id,"console_to_notebook",e)}get option_dict(){return{"Save As...":this._saveProjectAs,Save:this._saveProject,"Export as Jupyter Notebook":this._exportAsJupyter,"Open Console as Notebook":this._consoleToNotebook,"Export Table as Collection":this._exportDataTable,"Change collection":this.props.changeCollection}}get icon_dict(){return{"Save As...":"floppy-disk",Save:"saved","Export as Jupyter Notebook":"export","Open Console as Notebook":"console","Export Table as Collection":"export","Change collection":"exchange"}}render(){return React.createElement(a,{menu_name:"Project",option_dict:this.option_dict,icon_dict:this.icon_dict,disabled_items:this.props.disabled_items,disable_all:!1,hidden_items:this.props.hidden_items})}}l.propTypes={console_items:PropTypes.array,interface_state:PropTypes.object,updateLastSave:PropTypes.func,changeCollection:PropTypes.func,disabled_items:PropTypes.array,hidden_items:PropTypes.array};class p extends React.Component{constructor(e){super(e),doBinding(this)}_shift_column_left(){let e=this.props.filtered_column_names.indexOf(this.props.selected_column);if(0==e)return;let t=this.props.filtered_column_names[e-1];this.props.moveColumn(this.props.selected_column,t)}_shift_column_right(){let e=this.props.table_spec.column_names.indexOf(this.props.selected_column);if(e==this.props.table_spec.column_names.length-1)return;let t=this.props.table_spec.column_names[e+2];this.props.moveColumn(this.props.selected_column,t)}get option_dict(){return{"Shift Left":this._shift_column_left,"Shift Right":this._shift_column_right,Hide:this.props.hideColumn,"Hide in All Docs":this.props.hideInAll,"Unhide All":this.props.unhideAllColumns,"Add Column":()=>this.props.addColumn(!1),"Add Column In All Docs":()=>this.props.addColumn(!0)}}get icon_dict(){return{"Shift Left":"direction-left","Shift Right":"direction-right",Hide:"eye-off","Hide in All Docs":"eye-off","Unhide All":"eye-on","Add Column":"add-column-right","Add Column In All Docs":"add-column-right"}}render(){return React.createElement(a,{menu_name:"Column",option_dict:this.option_dict,icon_dict:this.icon_dict,disabled_items:this.props.disabled_items,hidden_items:[]})}}p.propTypes={moveColumn:PropTypes.func,table_spec:PropTypes.object,filtered_column_names:PropTypes.array,selected_column:PropTypes.string,hideColumn:PropTypes.func,hideInAll:PropTypes.func,unhideAllColumns:PropTypes.func,addColumn:PropTypes.func,disabled_items:PropTypes.array};class c extends React.Component{constructor(e){super(e),doBinding(this)}_shift_column_left(){let e=this.props.table_spec.column_names.indexOf(this.props.selected_column);if(0==e)return;let t=this.props.table_spec.column_names[e-1];this._moveColumn(this.props.selected_column,t)}_shift_column_right(){let e=this.props.table_spec.column_names.indexOf(this.props.selected_column);if(e==this.props.table_spec.column_names.length-1)return;let t=this.props.table_spec.column_names[e+2];this._moveColumn(this.props.selected_column,t)}get option_dict(){let e={};return e[this.props.table_is_shrunk?"Maximize Table":"Minimize Table"]=this.props.toggleTableShrink,e["Show Error Drawer"]=this.props.openErrorDrawer,e}get icon_dict(){let e={};return e[this.props.table_is_shrunk?"Maximize Table":"Minimize Table"]=this.props.table_is_shrunk?"maximize":"minimize",e["Show Error Drawer"]="panel-stats",e}render(){return React.createElement(a,{menu_name:"View",option_dict:this.option_dict,icon_dict:this.icon_dict,disabled_items:[],disable_all:this.props.disable_all,hidden_items:[]})}}c.propTypes={table_is_shrunk:PropTypes.bool,toggleTableShrink:PropTypes.func,openErrorDrawer:PropTypes.func}},function(e,t,s){"use strict";s.d(t,"b",(function(){return h})),s.d(t,"a",(function(){return c}));var n=s(7),i=blueprint;let o=$SCRIPT_ROOT+"/library",r=$SCRIPT_ROOT+"/repository",a=$SCRIPT_ROOT+"/account_info",l=$SCRIPT_ROOT+"/login";const p=10;class c extends React.Component{constructor(e){super(e),doBinding(this),this.lg_ref=React.createRef(),this.state={usable_width:window.innerWidth-2*p,old_left_width:0},this.overflow_items=[],this.update_state_vars=["usable_width","old_left_width"],this.update_props=["is_authenticated","user_name","menus","selected","show_api_links"]}shouldComponentUpdate(e,t){for(let t of this.update_props)if(e[t]!=this.props[t])return!0;for(let e of this.update_state_vars)if(t[e]!=this.state[e])return!0;return!1}componentDidMount(){window.addEventListener("resize",this._update_window_dimensions),this._update_window_dimensions(),this.setState({old_left_width:this._getLeftWidth()})}componentDidUpdate(){let e=this._getLeftWidth();e!=this.state.old_left_width&&this.setState({old_left_width:e})}_update_window_dimensions(){this.setState({usable_width:window.innerWidth-2*p})}handle_signout(){doSignOut(window.page_id)}getIntent(e){return this.props.selected==e?"primary":null}renderNav(e){return React.createElement(i.Button,{icon:e.icon,key:e.text,minimal:!0,text:e.text,intent:e.intent,onClick:e.onClick})}_getLeftWidth(){return this.lg_ref&&this.lg_ref.current?this.lg_ref.current.getBoundingClientRect().width:null}_getRightWidth(){let e=this._getLeftWidth();return e?this.state.usable_width-e-35:.25*this.state.usable_width-35}_authenticatedItems(){return[{icon:"home",text:"Library",intent:this.getIntent("library"),onClick:()=>{window.open(o)}},{icon:"database",text:"Repository",intent:this.getIntent("repository"),onClick:()=>{window.open(r)}},{icon:"settings",text:this.props.user_name,intent:this.getIntent("account"),onClick:()=>{window.open(a)}},{icon:"log-out",text:"Logout",intent:this.getIntent("logout"),onClick:this.handle_signout}]}_notAuthenticatedItems(){return[{icon:"log-in",text:"Login",intent:this.getIntent("login"),onClick:()=>{window.open(l)}}]}_onOverflow(e){this.overflow_items=e}_overflowRenderer(){let e={},t={};for(let s of this.overflow_items)e[s.text]=s.onClick,t[s.text]=s.icon;return React.createElement(n.b,{alt_button:()=>React.createElement("span",{className:"bp3-breadcrumbs-collapsed",style:{marginTop:5}}),option_dict:e,icon_dict:t})}render(){this.props.menus;let e=[];this.props.show_api_links&&(e=[{icon:"code-block",text:"Api",intent:null,onClick:()=>{window.open("https://tactic.readthedocs.io/en/latest/Tile-Commands.html")}},{icon:"code-block",text:"ObjApi",intent:null,onClick:()=>{window.open("https://tactic.readthedocs.io/en/latest/Object-Oriented-API.html")}}]),e.push({icon:"manual",text:"Docs",intent:null,onClick:()=>{window.open("http://tactic.readthedocs.io/en/latest/index.html")}}),e=this.props.is_authenticated?e.concat(this._authenticatedItems()):e.concat(this._notAuthenticatedItems());let t={width:this._getRightWidth(),justifyContent:"flex-end"};return React.createElement(i.Navbar,{style:{paddingLeft:10}},React.createElement("div",{className:"bp3-navbar-group bp3-align-left",ref:this.lg_ref},React.createElement(i.Navbar.Heading,{className:"d-flex align-items-center"},React.createElement("img",{className:"mr-2",src:window.tactic_img_url,alt:"",width:"32 ",height:"32"}),"Tactic"),null!=this.props.menus&&React.createElement(React.Fragment,null,this.props.menus)),React.createElement(i.Navbar.Group,{align:i.Alignment.RIGHT,style:t},React.createElement(i.NavbarDivider,null),React.createElement(i.OverflowList,{items:e,overflowRenderer:this._overflowRenderer,visibleItemRenderer:this.renderNav,onOverflow:this._onOverflow})))}}function h(e=null,t=!1){let s=document.querySelector("#navbar-root");ReactDOM.render(React.createElement(c,{is_authenticated:window.is_authenticated,selected:e,show_api_links:t,user_name:window.username}),s)}c.propTypes={is_authenticated:PropTypes.bool,user_name:PropTypes.string,menus:PropTypes.object,selected:PropTypes.string,show_api_links:PropTypes.bool},c.defaultProps={menus:null,selected:null,show_api_links:!1}},function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));class n extends React.Component{constructor(e){super(e),doBinding(this),this.mousetrap=null}componentDidMount(){this.initializeMousetrap()}componentWillUnmount(){this.mousetrap&&(this.mousetrap.reset(),this.mousetrap=null)}initializeMousetrap(){if(this.mousetrap&&this.mousetrap.reset(),this.props.target_ref||this.props.global){this.props.global?this.mousetrap=new Mousetrap:this.mousetrap=new Mousetrap(this.props.target_ref);for(let e of this.props.bindings)this.mousetrap.bind(e[0],e[1])}else this.mousetrap=null}componentDidUpdate(){this.mousetrap||this.initializeMousetrap()}render(){return React.createElement("div",null)}}n.propTypes={target_ref:PropTypes.object,bindings:PropTypes.array,global:PropTypes.bool},n.defaultProps={global:!1}},function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return l})),s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return r}));const n=20;var i=blueprint;let o=window.react_draggable.DraggableCore;class r extends React.Component{constructor(e){super(e),doBinding(this),this.startX=null,this.startY=null,this.lastX=null,this.lastY=null}get icon_dict(){return{x:"drag-handle-vertical",y:"drag-handle-horizontal",both:"caret-right"}}_dragStart(e,t){this.startX=this.getMouseX(e),this.startY=this.getMouseY(e),this.lastX=this.startX,this.lastY=this.startY,this.props.dragStart&&this.props.dragStart(e,t,this.startX,this.startY),e.preventDefault()}_onDrag(e,t){this.lastX=this.getMouseX(e),this.lastY=this.getMouseY(e);let s=this.lastX-this.startX,n=this.lastY-this.startY;this.props.onDrag&&this.props.onDrag(e,t,this.lastX,this.lastY,s,n),e.preventDefault()}_dragEnd(e,t){let s=this.getMouseX(e);s&&(this.lastX=s);let n=this.getMouseY(e);n&&(this.lastY=n);let i=this.lastX-this.startX,o=this.lastY-this.startY;this.props.dragEnd&&this.props.dragEnd(e,t,this.lastX,this.lastY,i,o),e.preventDefault()}getMouseX(e){return"touchend"==e.type?null:"touchmove"==e.type||"touchstart"==e.type?e.touches[0].clientX:e.clientX}getMouseY(e){return"touchend"==e.type?null:"touchmove"==e.type||"touchstart"==e.type?e.touches[0].clientY:e.clientY}get cursor_dict(){return{x:"ew-resize",y:"ns-resize",both:"se-resize"}}render(){let e=this.props.position_dict;return e.cursor=this.cursor_dict[this.props.direction],"both"==this.props.direction&&(e.transform="rotate(45deg)"),React.createElement(o,{onStart:this._dragStart,onStop:this._dragEnd,onDrag:this._onDrag,grid:[5,5],scale:1},React.createElement(i.Icon,{icon:this.icon_dict[this.props.direction],iconSize:this.props.iconSize,style:e}))}}r.propTypes={position_dict:PropTypes.object,onDrag:PropTypes.func,dragStart:PropTypes.func,dragEnd:PropTypes.func,direction:PropTypes.string,iconSize:PropTypes.number},r.defaultProps={direction:"x",iconSize:20,onDrag:null,dragStart:null,dragEnd:null};class a extends React.Component{constructor(e){super(e),doBinding(this),this.left_pane_ref=React.createRef(),this.right_pane_ref=React.createRef(),this.drag_handle_ref=React.createRef(),this.scroll_bases={},this.top_ref=null==this.props.top_ref?React.createRef():this.props.top_ref,this.old_left_width=0,this.old_right_width=0,this.unique_id=guid(),this.state={current_width_fraction:this.props.initial_width_fraction,mounted:!1,deltaPosition:{x:0,y:0}}}componentDidMount(){window.addEventListener("resize",this.resize_to_window),this.setState({mounted:!0},()=>{this.props.handleSplitUpdate&&this.props.handleSplitUpdate(this.left_width,this.right_width,this.state.current_width_fraction)})}componentDidUpdate(){this.notifySplitUpate()}get left_width(){return this.props.show_handle?(this.props.available_width-n)*this.state.current_width_fraction:this.props.available_width*this.state.current_width_fraction}get right_width(){return this.props.show_handle?(1-this.state.current_width_fraction)*(this.props.available_width-n):(1-this.state.current_width_fraction)*this.props.available_width}update_width_fraction(e){this.setState({current_width_fraction:e})}get width_has_changed(){return this.left_width!=this.old_left_width||this.right_width!=this.old_right_width}notifySplitUpate(){this.width_has_changed&&null!=this.props.handleSplitUpdate&&(this.old_left_width=this.left_width,this.old_right_width=this.right_width,this.props.handleSplitUpdate(this.left_width,this.right_width,this.state.current_width_fraction))}_handleDrag(e,t,s,n,i,o){let r=(s-this.left_pane_ref.current.offsetLeft)/this.props.available_width;this.update_width_fraction(r),this._resetScrolls()}_getSelectorElements(){let e={};if(this.props.scrollAdjustSelectors&&this.top_ref&&this.top_ref.current)for(let t of this.props.scrollAdjustSelectors){let s=$(this.top_ref.current).find(t);s.length>0&&(e[t]=s[0])}return e}_resetScrolls(){let e=this._getSelectorElements();for(let t in e){let s=e[t];s.scrollLeft=this.scroll_bases[t].left,s.scrollTop=this.scroll_bases[t].top}}_handleDragStart(e,t,s,n,i,o){let r=this._getSelectorElements();for(let e in r){let t=r[e];this.scroll_bases[e]={left:t.scrollLeft,top:t.scrollTop}}this.props.handleResizeStart&&this.props.handleResizeStart(e,t,s,n,i,o)}_handleDragEnd(e,t,s,n,i,o){let r=(s-this.left_pane_ref.current.offsetLeft)/this.props.available_width;this.props.handleResizeEnd&&this.props.handleResizeEnd(r),this._resetScrolls()}render(){let e={width:this.left_width,height:this.props.available_height-this.props.bottom_margin,flexDirection:"column",overflow:"hidden"},t={width:this.right_width,height:this.props.available_height-this.props.bottom_margin,flexDirection:"column",overflowY:this.props.right_pane_overflow},s=(this.props.hide_me,{position:"relative",left:0,top:(this.props.available_height-this.props.bottom_margin)/2});return React.createElement("div",{id:this.unique_id,className:"d-flex flex-row horizontal-panes",ref:this.top_ref},React.createElement("div",{ref:this.left_pane_ref,style:e,className:"res-viewer-resizer"},this.props.left_pane),this.props.show_handle&&React.createElement(r,{position_dict:s,onDrag:this._handleDrag,dragStart:this._handleDragStart,dragEnd:this._handleDragEnd,direction:"x",iconSize:this.props.dragIconSize}),React.createElement("div",{ref:this.right_pane_ref,style:t},this.props.right_pane))}}a.propTypes={available_width:PropTypes.number,available_height:PropTypes.number,left_pane:PropTypes.object,right_pane:PropTypes.object,right_pane_overflow:PropTypes.string,scrollAdjustSelectors:PropTypes.array,handleSplitUpdate:PropTypes.func,handleResizeStart:PropTypes.func,handleResizeEnd:PropTypes.func,initial_width_fraction:PropTypes.number,top_ref:PropTypes.object,bottom_margin:PropTypes.number,show_handle:PropTypes.bool,dragIconSize:PropTypes.number},a.defaultProps={handleSplitUpdate:null,handleResizeStart:null,handleResizeEnd:null,scrollAdjustSelectors:null,initial_width_fraction:.5,hide_me:!1,left_margin:null,right_margin:null,right_pane_overflow:"visible",top_ref:null,bottom_margin:0,show_handle:!0,dragIconSize:20};class l extends React.Component{constructor(e){super(e),doBinding(this),this.top_ref=React.createRef(),this.top_pane_ref=React.createRef(),this.bottom_pane_ref=React.createRef(),this.scroll_bases={},this.old_bottom_height=0,this.old_top_height=0,this.unique_id=guid(),this.state=this.state={current_height_fraction:this.props.initial_height_fraction,mounted:!1}}componentDidMount(){this.setState({mounted:!0}),window.addEventListener("resize",this.resize_to_window)}componentDidUpdate(){this.notifySplitUpate()}get top_height(){return this.props.available_height*this.state.current_height_fraction}get bottom_height(){return(1-this.state.current_height_fraction)*this.props.available_height}notifySplitUpate(){null!=this.props.handleSplitUpdate&&this.height_has_changed&&(this.old_top_height=this.top_height,this.old_bottom_height=this.bottom_height,this.props.handleSplitUpdate(this.top_height,this.bottom_height,this.state.current_height_fraction))}update_height_fraction(e){this.setState({current_height_fraction:e})}get height_has_changed(){return this.top_height!=this.old_top_height||this.bottom_height!=this.old_bottom_height}_handleDrag(e,t,s,n,i,o){let r=(n-this.top_pane_ref.current.offsetTop)/this.props.available_height;this.update_height_fraction(r)}_getSelectorElements(){let e={};if(this.props.scrollAdjustSelectors&&this.top_ref&&this.top_ref.current)for(let t of this.props.scrollAdjustSelectors){let s=$(this.top_ref.current).find(t);s.length>0&&(e[t]=s[0])}return e}_resetScrolls(){let e=this._getSelectorElements();for(let t in e){let s=e[t];s.scrollLeft=this.scroll_bases[t].left,s.scrollTop=this.scroll_bases[t].top}}_handleDragStart(e,t,s,n,i,o){let r=this._getSelectorElements();for(let e in r){let t=r[e];this.scroll_bases[e]={left:t.scrollLeft,top:t.scrollTop}}this.props.handleResizeStart&&this.props.handleResizeStart(e,t,s,n,i,o)}_handleDragEnd(e,t,s,n,i,o){let r=(n-this.top_pane_ref.current.offsetTop)/this.props.available_height;this.props.handleResizeEnd&&this.props.handleResizeEnd(r),this._resetScrolls()}render(){let e={width:this.props.available_width,height:this.top_height,overflowY:this.props.overflow};this.props.hide_top&&(e.display="none");let t={width:this.props.available_width,height:this.bottom_height,overflowY:this.props.overflow},s={position:"relative",left:this.props.available_width/2,top:0};return React.createElement("div",{id:this.unique_id,className:"d-flex flex-column",ref:this.top_ref},React.createElement("div",{ref:this.top_pane_ref,style:e},this.props.top_pane),this.props.show_handle&&React.createElement(r,{position_dict:s,onDrag:this._handleDrag,direction:"y",iconSize:this.props.dragIconSize,dragStart:this._handleDragStart,dragEnd:this._handleDragEnd}),React.createElement("div",{ref:this.bottom_pane_ref,style:t},this.props.bottom_pane))}}l.propTypes={available_width:PropTypes.number,available_height:PropTypes.number,top_pane:PropTypes.object,hide_top:PropTypes.bool,bottom_pane:PropTypes.object,handleSplitUpdate:PropTypes.func,handleResizeStart:PropTypes.func,handleResizeEnd:PropTypes.func,scrollAdjustSelectors:PropTypes.array,initial_height_fraction:PropTypes.number,overflow:PropTypes.string,show_handle:PropTypes.bool,dragIconSize:PropTypes.number},l.defaultProps={handleSplitUpdate:null,handleResizeStart:null,handleResizeEnd:null,scrollAdjustSelectors:null,initial_height_fraction:.5,hide_top:!1,overflow:"scroll",show_handle:!0,dragIconSize:20}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(1);class i{constructor(e,t){this.name_space=e,this.recInterval=null,this.retry_interval=t,this.connectme(),this.initialize_socket_stuff(),this.watchForDisconnect()}connectme(){use_ssl?this.socket=io.connect(`https://${document.domain}:${location.port}/${this.name_space}`):this.socket=io.connect(`http://${document.domain}:${location.port}/${this.name_space}`)}initialize_socket_stuff(){}watchForDisconnect(){let e=this;this.socket.on("disconnect",(function(){Object(n.b)({message:"lost server connection"}),e.socket.close(),e.recInterval=setInterval((function(){e.attemptReconnect()}),e.retry_interval)}))}attemptReconnect(){this.socket.connected?(clearInterval(this.recInterval),this.initialize_socket_stuff(),this.watchForDisconnect(),Object(n.b)({message:"reconnected to server"})):this.connectme()}}},function(e,t,s){"use strict";s.d(t,"c",(function(){return _})),s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return p}));var n=s(9),i=s(3),o=s(2),r=s(0);const a="btn-outline-secondary";var l=blueprint;function p(e){return React.createElement("div",{style:{marginTop:20}},React.createElement(_,{button_groups:e.button_groups}),React.createElement(u,{resource_name:e.resource_name,res_type:e.res_type}))}class c extends React.Component{constructor(e){super(e)}render(){if(this.props.show_text){let e={flexDirection:"column",fontSize:8,padding:"5px 8px",width:42,height:42};return React.createElement(l.Button,{text:this.props.name_text,icon:this.props.icon_name,style:e,large:!0,minimal:!1,onClick:()=>this.props.click_handler(),className:"bp-toolbar-button bp3-elevation-0"})}return React.createElement(l.Button,{icon:this.props.icon_name,large:!1,minimal:!1,onClick:()=>this.props.click_handler(),className:"bp-toolbar-button bp3-elevation-0"})}}c.propTypes={show_text:PropTypes.bool,icon_name:PropTypes.string,click_handler:PropTypes.func,button_class:PropTypes.string,name_text:PropTypes.string,small_size:PropTypes.bool,intent:PropTypes.string},c.defaultProps={small_size:!0,intent:"regular",show_text:!1},c=Object(i.f)(c);class h extends React.Component{constructor(e){super(e),doBinding(this)}render(){let e=this.props.option_list.map((e,t)=>React.createElement(l.MenuItem,{key:e.opt_name,onClick:e.opt_func,icon:e.opt_icon,text:e.opt_name})),t=React.createElement(l.Menu,null,e," ");return React.createElement(l.ButtonGroup,null,React.createElement(l.Popover,{content:t},React.createElement(l.Button,{id:this.props.name,text:this.props.name,icon:this.props.icon_name})))}}h.propTypes={button_class:PropTypes.string,name:PropTypes.string,icon_name:PropTypes.string,option_list:PropTypes.array,small_size:PropTypes.bool},h.defaultProps={small_size:!0};class d extends React.Component{constructor(e){super(e),doBinding(this),this.state={file_list:null,hasSelection:!1,the_text:"Choose file..."}}_handleFileChange(e){let t,s=e.target.files;0!=s.length&&(t=1==s.length?s[0].name:"<multiple>",this.setState({file_list:s,hasSelection:!0,the_text:t}))}_do_submit(){this.props.click_handler(this.state.file_list)}render(){return React.createElement(React.Fragment,null,React.createElement(l.ControlGroup,null,React.createElement(c,{name_text:this.props.name_text,icon_name:this.props.icon_name,large:!1,click_handler:this._do_submit,tooltip:this.props.tooltip}),React.createElement(l.FileInput,{large:!1,text:this.state.the_text,style:{width:200,fontSize:12,marginBottom:0},hasSelection:this.state.hasSelection,onInputChange:this._handleFileChange,inputProps:{multiple:this.props.multiple}})))}}d.propTypes={click_handler:PropTypes.func,button_class:PropTypes.string,name_text:PropTypes.string,multiple:PropTypes.bool,icon_name:PropTypes.string,small_size:PropTypes.bool,tooltip:PropTypes.string},d.defaultProps={small_size:!0,multiple:!1,tooltip:null};class _ extends React.Component{constructor(e){super(e),this.tb_ref=React.createRef()}get_button_class(e){return null==e.button_class?a:e.button_class}componentDidMount(){this.props.sendRef&&this.props.sendRef(this.tb_ref)}componentDidUpdate(){this.props.sendRef&&this.props.sendRef(this.tb_ref)}getTooltip(e){return e.tooltip?e.tooltip:null}getTooltipDelay(e){return e.tooltipDelay?e.tooltipDelay:null}render(){const e=[];var t=0;if(null!=this.props.popup_buttons&&0!=this.props.popup_buttons.length){let t=this.props.popup_buttons.map((e,t)=>React.createElement(l.ButtonGroup,{className:"toolbar-button-group",role:"group",key:"popup_group"+String(t)},React.createElement(h,{name:e.name,key:e.name,icon_name:e.icon_name,option_list:e.option_list,button_class:this.get_button_class(e)})));e.push(t)}for(let s of this.props.button_groups){let n=s.map((e,t)=>React.createElement(c,{name_text:e.name_text,icon_name:e.icon_name,tooltip:this.getTooltip(e),tooltipDeleay:this.getTooltipDelay(e),click_handler:e.click_handler,intent:e.hasOwnProperty("intent")?e.intent:"regular",key:t}));e.push(React.createElement(l.ButtonGroup,{large:!1,style:{justifyContent:"center"},className:"toolbar-button-group",role:"group",key:t},n)),t+=1}let s,i=[];for(let e of this.props.button_groups)for(let t of e)t.hasOwnProperty("key_bindings")&&i.push([t.key_bindings,()=>t.click_handler()]);if(null!=this.props.file_adders&&0!=this.props.file_adders.length){let s=this.props.file_adders.map((e,t)=>React.createElement(d,{icon_name:e.icon_name,click_handler:e.click_handler,button_class:this.get_button_class(e),name_text:e.name_text,multiple:e.multiple,tooltip:this.getTooltip(e),tooltipDeleay:this.getTooltipDelay(e),key:t}));e.push(React.createElement(l.ButtonGroup,{style:{justifyContent:"center"},className:"toolbar-button-group",role:"group",key:t},s))}return s=this.props.alternate_outer_style?this.props.alternate_outer_style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginBottom:10},React.createElement("div",{style:s},React.createElement("div",{ref:this.tb_ref},e),React.createElement(n.a,{global:!0,bindings:i}))}}_.propTypes={button_groups:PropTypes.array,file_adders:PropTypes.array,popup_buttons:PropTypes.array,alternate_outer_style:PropTypes.object,inputRef:PropTypes.func},_.defaultProps={file_adders:null,popup_buttons:null,alternate_outer_style:null,sendRef:null};class u extends React.Component{constructor(e){super(e),this.state={current_name:e.resource_name},this.rename_me=this.rename_me.bind(this),this.RenameResource=null==this.props.handleRename?this.defaultRenameResource.bind(this):this.props.handleRename}rename_me(){console.log("entering rename");var e=this,t=this.props.res_type,s=this.state.current_name;$.getJSON($SCRIPT_ROOT+`get_resource_names/${t}`,(function(n){const i=n.resource_names,r=i.indexOf(s);r>=0&&i.splice(r,1),Object(o.b)(`Rename ${t}`,`Name for this ${t}`,e.RenameResource,s,i)}))}defaultRenameResource(e){const t={new_name:e};var s=this;Object(r.b)(`rename_resource/${this.props.res_type}/${this.state.current_name}`,t,(function(t){if(!t.success)return doFlash(t),!1;s.setState({current_name:e}),doFlash(t)}))}render(){let e=null==this.props.handleRename?this.state.current_name:this.props.resource_name;return React.createElement(l.Button,{id:"rename-button",large:!0,minimal:!0,style:{fontSize:20},tabIndex:-1,onClick:this.rename_me},React.createElement("h5",null,e))}}u.propTypes={resource_name:PropTypes.string,res_type:PropTypes.string,handleRename:PropTypes.func},u.defaultProps={handleRename:null}},function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(1),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o=blueprint;function r(e,t=null,s=null,n="right",o="30%"){return class extends React.Component{constructor(e){super(e),doBinding(this),this.tsocket=t,this.state={show_drawer:!1,contents:[],error_drawer_size:o,position:n}}componentDidMount(){this.tsocket&&(this.tsocket.socket.on("close-error-drawer",this._close),this.tsocket.socket.on("open-error-drawer",this._open),this.tsocket.socket.on("add-error-drawer-entry",this._addEntry),this.tsocket.socket.on("clear-error-drawer",this._clearAll))}_close(){this.setState({show_drawer:!1})}_open(){this.setState({show_drawer:!0})}_toggle(){this.setState({show_drawer:!this.state.show_drawer})}_addEntry(e,t=!0){this.setState({contents:[...this.state.contents,e],show_drawer:t})}_clearAll(){this.setState({contents:[]})}_onClose(){this.setState({show_drawer:!1})}render(){let t={openErrorDrawer:this._open,closeErrorDrawer:this._close,clearErrorDrawer:this._clearAll,addErrorDrawerEntry:this._addEntry,toggleErrorDrawer:this._toggle};return React.createElement(React.Fragment,null,React.createElement(e,i({},this.props,t,{errorDrawerFuncs:t})),React.createElement(a,i({},this.state,{title:"Error Drawer",size:this.state.error_drawer_size,onClose:this._onClose,clearAll:this._clearAll})))}}}class a extends React.Component{render(){let e=this.props.contents.map((e,t)=>{let s={__html:e.content};return React.createElement(o.Card,{key:t,interactive:!0,elevation:o.Elevation.TWO,style:{marginBottom:5}},e.title&&React.createElement("h6",null,React.createElement("a",{href:"#"},e.title)),React.createElement("div",{style:{fontSize:12},dangerouslySetInnerHTML:s}))});return React.createElement(o.Drawer,{icon:"console",title:this.props.title,isOpen:this.props.show_drawer,position:this.props.position,canOutsideClickClose:!0,onClose:this.props.onClose,size:this.props.size},React.createElement("div",{className:o.Classes.DRAWER_BODY},React.createElement("div",{className:"d-flex flex-row justify-content-around mt-2"},React.createElement(o.Button,{text:"Clear All",onClick:this.props.clearAll})),React.createElement("div",{className:o.Classes.DIALOG_BODY},e)))}}n.a.propTypes={show_drawer:PropTypes.bool,contents:PropTypes.array,title:PropTypes.string,onClose:PropTypes.func,position:PropTypes.string,clearAll:PropTypes.func,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number])},n.a.defaultProps={show_drawer:!1,contents:[],position:"right",title:null,size:"30%"}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(0);class i extends React.Component{constructor(e){super(e),this.props.code_container_ref?this.code_container_ref=this.props.code_container_ref:this.code_container_ref=React.createRef(),this.handleChange=this.handleChange.bind(this),this.mousetrap=new Mousetrap,this.create_api()}createCMArea(e,t=1){let s=CodeMirror(e,{lineNumbers:!0,matchBrackets:!0,highlightSelectionMatches:!0,autoCloseBrackets:!0,indentUnit:4,mode:this.props.mode,readOnly:this.props.readOnly});1!=t&&s.setOption("firstLineNumber",t);let n=Object.assign(this.props.extraKeys,{Tab:function(e){let t=new Array(5).join(" ");e.replaceSelection(t)},"Ctrl-Space":"autocomplete"});return s.setOption("extraKeys",n),s.setSize(null,"100%"),s.on("change",this.handleChange),s}handleChange(e,t){this.props.handleChange(e.getDoc().getValue())}componentDidMount(){this.cmobject=this.createCMArea(this.code_container_ref.current,this.props.first_line_number),this.cmobject.setValue(this.props.code_content),this.create_keymap(),null!=this.props.setCMObject&&this.props.setCMObject(this.cmobject)}componentDidUpdate(){this.props.sync_to_prop&&this.cmobject.setValue(this.props.code_content),1!=this.props.first_line_number&&this.cmobject.setOption("firstLineNumber",this.props.first_line_number),this.cmobject.refresh()}searchCM(){CodeMirror.commands.find(this.cmobject)}clearSelections(){CodeMirror.commands.clearSearch(this.cmobject),CodeMirror.commands.singleSelection(this.cmobject)}create_api(){let e=this;Object(n.b)("get_api_dict",{},(function(t){e.api_dict_by_category=t.api_dict_by_category,e.api_dict_by_name=t.api_dict_by_name,e.ordered_api_categories=t.ordered_api_categories,e.api_list=[];for(let t of e.ordered_api_categories)for(let s of e.api_dict_by_category[t])e.api_list.push(s.name);CodeMirror.commands.autocomplete=function(t){t.showHint({hint:CodeMirror.hint.anyword,api_list:e.api_list,extra_autocomplete_list:e.extra_autocomplete_list})}}))}create_keymap(){let e=this;CodeMirror.keyMap.default.Esc=function(){e.clearSelections()};let t=CodeMirror.keyMap.default.hasOwnProperty("Cmd-S");this.mousetrap.bind(["escape"],(function(t){e.clearSelections(),t.preventDefault()})),t?(CodeMirror.keyMap.default["Cmd-S"]=function(){e.props.saveMe()},this.mousetrap.bind(["command+l"],(function(e){e.preventDefault()})),this.mousetrap.bind(["command+f"],(function(t){e.searchCM(),t.preventDefault()}))):(CodeMirror.keyMap.default["Ctrl-S"]=function(){e.props.saveMe()},this.mousetrap.bind(["ctrl+l"],(function(e){e.preventDefault()})),this.mousetrap.bind(["ctrl+f"],(function(t){e.searchCM(),t.preventDefault()})))}render(){let e={height:this.props.code_container_height,width:this.props.code_container_width,lineHeight:"21px",overflow:"auto"};return React.createElement("div",{id:"code-container",style:e,ref:this.code_container_ref})}}i.propTypes={handleChange:PropTypes.func,code_content:PropTypes.string,sync_to_prop:PropTypes.bool,mode:PropTypes.string,saveMe:PropTypes.func,readOnly:PropTypes.bool,first_line_number:PropTypes.number,extraKeys:PropTypes.object,setCMObject:PropTypes.func,code_container_ref:PropTypes.object,code_container_width:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),code_container_height:PropTypes.oneOfType([PropTypes.string,PropTypes.number])},i.defaultProps={first_line_number:1,code_container_height:"100%",sync_to_prop:!1,mode:"python",readOnly:!1,extraKeys:{},setCMObject:null,code_container_ref:null,code_container_width:"100%"}},function(e,t,s){"use strict";s.d(t,"a",(function(){return m})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return _})),s.d(t,"d",(function(){return u}));var n=s(12),i=s(6),o=s(2),r=s(11),a=s(10),l=s(0),p=s(1),c=s(4),h=blueprint;class d extends r.a{initialize_socket_stuff(){this.socket.emit("join",{room:window.user_id}),this.socket.emit("join-main",{room:window.resource_viewer_id}),this.socket.on("handle-callback",l.a),this.socket.on("close-user-windows",e=>{e.originator!=window.resource_viewer_id&&window.close()}),this.socket.on("doFlash",(function(e){Object(p.b)(e)}))}}function _(e,t){function s(s){const n={res_type:e,res_name:t,new_res_name:s};Object(l.b)("copy_from_repository",n,p.c)}$.getJSON($SCRIPT_ROOT+`get_resource_names/${e}`,(function(n){showModal(`Import ${e}`,`New ${e} Name`,s,t,n.resource_names)}))}function u(e,t){function s(s){const n={res_type:e,res_name:t,new_res_name:s};Object(l.b)("send_to_repository",n,p.c)}$.getJSON($SCRIPT_ROOT+`get_repository_resource_names/${e}`,(function(n){Object(o.b)(`Share ${e}`,`New ${e} Name`,s,t,n.resource_names)}))}class m extends React.Component{constructor(e){super(e),doBinding(this),this.savedContent=e.the_content,this.savedTags=e.tags,this.savedNotes=e.notes;let t=this;this.mousetrap=new Mousetrap,this.mousetrap.bind(["command+s","ctrl+s"],(function(e){t.props.saveMe(),e.preventDefault()}));let s=Object(c.d)().usable_height,n=Object(c.d)().usable_width-170;this.state={available_height:s,available_width:n},this.state.mounted=!1}componentDidMount(){window.addEventListener("resize",this._update_window_dimensions),this.setState({mounted:!0}),this._update_window_dimensions(),this.props.stopSpinner()}_update_window_dimensions(){this.setState(Object(c.d)())}_handleResize(e){for(let t of e)if("resource-viewer-holder"==t.target.className)return void this.setState({available_width:t.contentRect.width,available_height:t.contentRect.height})}render(){let e=React.createElement(React.Fragment,null,React.createElement(n.b,{button_groups:this.props.button_groups,resource_name:this.props.resource_name,res_type:this.props.res_type}),this.props.children),t=React.createElement(i.c,{tags:this.props.tags,outer_style:{marginTop:100,marginLeft:20,overflow:"auto",padding:15,backgroundColor:"#f5f8fa",marginRight:20},created:this.props.created,notes:this.props.notes,handleChange:this.props.handleStateChange,res_type:this.props.res_type});return React.createElement(h.ResizeSensor,{onResize:this._handleResize,observeParents:!0},React.createElement(a.c,{available_width:this.state.available_width,available_height:this.state.available_height,left_pane:e,show_handle:!0,right_pane:t,am_outer:!0}))}}m.propTypes={resource_name:PropTypes.string,res_type:PropTypes.string,button_groups:PropTypes.array,created:PropTypes.string,tags:PropTypes.array,notes:PropTypes.string,handleStateChange:PropTypes.func,meta_outer:PropTypes.string,saveMe:PropTypes.func,children:PropTypes.element}},,,,,,,,,,,,,,,,,,function(e,t,s){"use strict";s.r(t);var n=s(11),i=s(12),o=s(15),r=s(14),a=s(6),l=s(3),p=blueprint;class c extends React.Component{constructor(e){super(e),this.option_types=["text","int","float","boolean","textarea","codearea","column_select","document_select","list_select","collection_select","palette_select","pipe_select","custom_list","function_select","class_select","tile_select"],this.taggable_types=["class_select","function_select","pipe_select","list_select","collection_select"],this.state={name:"",type:"text",default:"",special_list:"",tags:""},this.handleNameChange=this.handleNameChange.bind(this),this.handleDefaultChange=this.handleDefaultChange.bind(this),this.handleTagChange=this.handleTagChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleTypeChange=this.handleTypeChange.bind(this),this.handleSpecialListChange=this.handleSpecialListChange.bind(this)}handleNameChange(e){this.setState({name:e.target.value})}handleDefaultChange(e){this.setState({default:e.target.value})}handleTagChange(e){this.setState({tags:e.target.value})}handleSpecialListChange(e){this.setState({special_list:e.currentTarget.value})}handleTypeChange(e){this.setState({type:e.currentTarget.value})}handleSubmit(){this.props.handleCreate(this.state)}render(){return React.createElement("div",null,React.createElement("div",{style:{display:"flex",flexDirection:"row",padding:25}},React.createElement(l.c,{label:"Name",onChange:this.handleNameChange,the_value:this.state.name}),React.createElement(l.d,{label:"Type",option_list:this.option_types,onChange:this.handleTypeChange,the_value:this.state.type}),React.createElement(l.c,{label:"Default",onChange:this.handleDefaultChange,the_value:this.state.default_value}),"custom_list"==this.state.type&&React.createElement(l.c,{label:"Special List",onChange:this.handleSpecialListChange,the_value:this.state.special_list}),this.taggable_types.includes(this.state.type)&&React.createElement(l.c,{label:"Tag",onChange:this.handleTagChange,the_value:this.state.tag})),React.createElement(p.Button,{onClick:this.handleSubmit,text:"Create"}))}}c.propTypes={handleCreate:PropTypes.func};class h extends React.Component{constructor(e){super(e),this.state={active_row:0},this.handleActiveRowChange=this.handleActiveRowChange.bind(this),this.handleCreate=this.handleCreate.bind(this)}delete_option(){let e=this.props.data_list;e.splice(this.state.active_row,1),this.props.handleChange(e)}send_doc_text(){let e="\n\noptions: \n\n";for(let t of this.props.data_list)e+=` * \`${t.name}\` (${t.type}): \n`;this.props.handleNotesAppend(e)}handleCreate(e){let t=this.props.data_list;t.push(e),this.props.handleChange(t)}handleActiveRowChange(e){this.setState({active_row:e})}get button_groups(){let e=[[{name_text:"delete",icon_name:"trash",click_handler:this.delete_option,tooltip:"Delete option"},{name_text:"toMeta",icon_name:"properties",click_handler:this.send_doc_text,tooltip:"Append info to notes field"}]];for(let t of e)for(let e of t)e.click_handler=e.click_handler.bind(this);return e}render(){return this.state.active_row>=this.props.data_list.length&&(this.state.active_row=this.props.data_list.length-1),React.createElement(p.Card,{elevation:1,id:"options-pane",className:"d-flex flex-column",style:{marginTop:10,marginLeft:10,marginRight:10}},React.createElement("div",{className:"d-flex flex-row mb-2"},React.createElement(i.c,{button_groups:this.button_groups})),this.props.foregrounded&&React.createElement(l.a,{columns:["name","type","default","special_list","tags"],data_array:this.props.data_list,active_row:this.state.active_row,handleActiveRowChange:this.handleActiveRowChange,handleChange:this.props.handleChange,content_editable:!0}),React.createElement(c,{handleCreate:this.handleCreate}))}}h.propTypes={data_list:PropTypes.array,foregrounded:PropTypes.bool,handleChange:PropTypes.func,handleNotesAppend:PropTypes.func};class d extends React.Component{constructor(e){super(e),this.state={name:"",tags:""},this.handleNameChange=this.handleNameChange.bind(this),this.handleTagChange=this.handleTagChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleNameChange(e){this.setState({name:e.target.value})}handleTagChange(e){this.setState({tags:e.target.value})}handleSubmit(){this.props.handleCreate(this.state)}render(){return React.createElement("div",null,React.createElement("div",{style:{display:"flex",flexDirection:"row",padding:25}},React.createElement(l.c,{label:"Name",onChange:this.handleNameChange,the_value:this.state.name}),React.createElement(l.c,{label:"Tag",onChange:this.handleTagChange,the_value:this.state.tag})),React.createElement(p.Button,{onClick:this.handleSubmit,text:"Create"}))}}d.propTypes={handleCreate:PropTypes.func};class _ extends React.Component{constructor(e){super(e),this.state={active_row:0},this.handleActiveRowChange=this.handleActiveRowChange.bind(this),this.handleCreate=this.handleCreate.bind(this)}delete_export(){let e=this.props.data_list;e.splice(this.state.active_row,1),this.props.handleChange(e)}send_doc_text(){let e="\n\nexports: \n\n";for(let t of this.props.data_list)e+=` * \`${t.name}\` : \n`;this.props.handleNotesAppend(e)}handleCreate(e){let t=this.props.data_list;t.push(e),this.props.handleChange(t)}handleActiveRowChange(e){this.setState({active_row:e})}get button_groups(){let e=[[{name_text:"delete",icon_name:"trash",click_handler:this.delete_export,tooltip:"Delete export"},{name_text:"toMeta",icon_name:"properties",click_handler:this.send_doc_text,tooltip:"Append info to notes field"}]];for(let t of e)for(let e of t)e.click_handler=e.click_handler.bind(this);return e}render(){return this.state.active_row>=this.props.data_list.length&&(this.state.active_row=this.props.data_list.length-1),React.createElement(p.Card,{elevation:1,id:"exports-pane",className:"d-flex flex-column",style:{marginTop:10,marginLeft:10,marginRight:10}},React.createElement("div",{className:"d-flex flex-row mb-2"},React.createElement(i.c,{button_groups:this.button_groups})),this.props.foregrounded&&React.createElement(l.a,{columns:["name","tags"],data_array:this.props.data_list,active_row:this.state.active_row,handleActiveRowChange:this.handleActiveRowChange,handleChange:this.props.handleChange,content_editable:!0}),React.createElement(d,{handleCreate:this.handleCreate}))}}_.propTypes={data_list:PropTypes.array,foregrounded:PropTypes.bool,handleChange:PropTypes.func,handleNotesAppend:PropTypes.func};var u=s(10),m=s(8),g=s(0),f=s(1),y=s(4),b=s(13),w=blueprint;const R=50;var C=setInterval((function(){Object(g.b)("register_heartbeat",{main_id:window.main_id},(function(){}))}),1e4);let T;class v extends n.a{initialize_socket_stuff(){this.socket.emit("join",{room:user_id}),this.socket.emit("join-main",{room:module_viewer_id}),this.socket.on("handle-callback",g.a),this.socket.on("close-user-windows",e=>{e.originator!=module_viewer_id&&window.close()}),this.socket.on("stop-heartbeat",(function(e){clearInterval(C)})),this.socket.on("doFlash",(function(e){Object(f.b)(e)}))}}function P(e){let t=document.querySelector("#creator-root"),s=e.the_content,n={res_type:"tile",res_name:window.module_name,is_repository:!1};Object(g.c)("grab_metadata",n).then((function(e){let n=""==e.tags?[]:e.tags.split(" "),i=s.category?s.category:"basic";ReactDOM.render(React.createElement(E,{tile_name:window.module_name,is_mpl:s.is_mpl,is_d3:s.is_d3,render_content_code:s.render_content_code,render_content_line_number:s.render_content_line_number,extra_methods_line_number:s.extra_methods_line_number,draw_plot_line_number:s.draw_plot_line_number,category:i,extra_functions:s.extra_functions,draw_plot_code:s.draw_plot_code,jscript_code:s.jscript_code,tags:n,notes:e.notes,option_list:s.option_dict,export_list:s.export_list,created:e.datestring}),t)})).catch((function(e){Object(f.b)(e)}))}function S(e){return React.createElement("div",{style:{marginTop:20,paddingRight:20,width:"100%"},className:"d-flex flex-row justify-content-between"},React.createElement(i.a,{resource_name:e.tile_name,res_type:e.res_type,handleRename:e.handleRename}),React.createElement("div",null,React.createElement(i.c,{button_groups:e.button_groups})))}class x extends React.Component{constructor(e){super(e),doBinding(this),this.top_ref=React.createRef();let t=Object(y.d)().usable_height,s=Object(y.d)().usable_width,n=Object(y.d)().body_height;this.options_ref=React.createRef(),this.left_div_ref=React.createRef(),this.right_div_ref=React.createRef(),this.tc_span_ref=React.createRef(),this.rc_span_ref=React.createRef(),this.vp_ref=React.createRef(),this.hp_ref=React.createRef(),this.methods_ref=React.createRef(),this.draw_plot_bounding_ref=React.createRef(),this.last_save={},this.state={tile_name:this.props.tile_name,foregrounded_panes:{metadata:!0,options:!1,exports:!1,methods:!1},render_content_code:this.props.render_content_code,draw_plot_code:this.props.draw_plot_code,jscript_code:this.props.jscript_code,extra_functions:this.props.extra_functions,render_content_line_number:this.props.render_content_line_number,draw_plot_line_number:this.props.draw_plot_line_number,extra_methods_line_number:this.props.extra_methods_line_number,tags:this.props.tags,notes:this.props.notes,option_list:this.props.option_list,export_list:this.props.export_list,category:this.props.category,total_height:window.innerHeight,usable_width:s,old_usable_width:0,usable_height:t,body_height:n,top_pane_height:this.props.is_mpl||this.props.is_d3?t/2-25:null,bottom_pane_height:this.props.is_mpl||this.props.is_d3?t/2-25:null,left_pane_width:s/2-25,methodsTabRefreshRequired:!0},this.handleRename=this.handleRename.bind(this),this.handleStateChange=this.handleStateChange.bind(this),this.handleRenderContentChange=this.handleRenderContentChange.bind(this),this.handleTopCodeChange=this.handleTopCodeChange.bind(this),this.update_window_dimensions=this.update_window_dimensions.bind(this),this.handleOptionsChange=this.handleOptionsChange.bind(this),this.handleExportsChange=this.handleExportsChange.bind(this),this.handleMethodsChange=this.handleMethodsChange.bind(this),this.handleLeftPaneResize=this.handleLeftPaneResize.bind(this),this.handleTopPaneResize=this.handleTopPaneResize.bind(this);let i=this;window.addEventListener("beforeunload",(function(e){i.dirty()&&(e.preventDefault(),e.returnValue="")}))}get button_groups(){let e=[[{name_text:"Save",icon_name:"saved",click_handler:this._saveMe,key_bindings:["ctrl+s","command+s"],tooltip:"Save"},{name_text:"Mark",icon_name:"map-marker",click_handler:this._saveAndCheckpoint,key_bindings:["ctrl+m"],tooltip:"Save and checkpoint"},{name_text:"SaveAs",icon_name:"floppy-disk",click_handler:this._saveModuleAs,tooltip:"Save as"},{name_text:"Load",icon_name:"upload",click_handler:this._loadModule,key_bindings:["ctrl+l"],tooltip:"Load tile"},{name_text:"Share",icon_name:"share",click_handler:()=>{Object(o.d)("tile",this.props.tile_name)},tooltip:"Send to repository"}],[{name_text:"History",icon_name:"history",click_handler:this._showHistoryViewer,tooltip:"Show history viewer"},{name_text:"Compare",icon_name:"comparison",click_handler:this._showTileDiffer,tooltip:"Compare to another tile"}],[{name_text:"Drawer",icon_name:"console",click_handler:this.props.toggleErrorDrawer,tooltip:"Toggle error drawer"}]];for(let t of e)for(let e of t)e.click_handler=e.click_handler.bind(this);return e}_showHistoryViewer(){window.open(`${$SCRIPT_ROOT}/show_history_viewer/${this.props.tile_name}`)}_showTileDiffer(){window.open(`${$SCRIPT_ROOT}/show_tile_differ/${this.props.tile_name}`)}_doFlashStopSpinner(e){this.props.clearStatus(),Object(f.b)(e)}_logErrorStopSpinner(e,t=null,s=!0){this.props.stopSpinner(),this.props.addErrorDrawerEntry({title:t,content:e}),s&&this.props.openErrorDrawer()}dirty(){let e=this._getSaveDict();for(let t in e)if(e[t]!=this.last_save[t])return!0;return!1}_loadModule(){let e=this;function t(t){return t.success&&(t.timeout=2e3),e._doFlashStopSpinner(t),!1}this.props.startSpinner(),this.doSavePromise().then((function(){e.props.statusMessage("Loading Module"),Object(g.f)("host","load_tile_module_task",{tile_module_name:e.state.tile_name,user_id:user_id},t)})).catch(t=>{e._logErrorStopSpinner(t.message,"Error loading module")})}_saveModuleAs(){return Object(f.b)({message:"not implemented yet"}),!1}_saveMe(){let e=this;return this.props.startSpinner(),this.props.statusMessage("Saving Module"),this.doSavePromise().then(e._doFlashStopSpinner).catch(t=>{e._logErrorStopSpinner(t.message,"Error saving module")}),!1}_saveAndCheckpoint(){this.props.startSpinner();let e=this;return this.doSavePromise().then((function(){e.props.statusMessage("Checkpointing"),e.doCheckpointPromise().then(e._doFlashStopSpinner).catch(t=>{e._logErrorStopSpinner(t.message,"Error checkpointing module")})})).catch(t=>{e._logErrorStopSpinner(t.message,"Error saving module")}),!1}get_tags_string(){let e=this.state.tags,t="";for(let s of e)t=t+s+" ";return t.trim()}_getSaveDict(){return{module_name:this.state.tile_name,category:0==this.state.category.length?"basic":this.state.category,tags:this.get_tags_string(),notes:this.state.notes,exports:this.state.export_list,options:this.state.option_list,extra_methods:this.state.extra_functions,render_content_body:this.state.render_content_code,is_mpl:this.props.is_mpl,is_d3:this.props.is_d3,draw_plot_body:this.state.draw_plot_code,jscript_body:this.state.jscript_code,last_saved:"creator"}}doSavePromise(){let e=this;return new Promise((function(t,s){let n=e._getSaveDict();Object(g.f)(module_viewer_id,"update_module",n,(function(n){n.success?(e.save_success(n),t(n)):s(n)}))}))}doCheckpointPromise(){let e=this;return new Promise((function(t,s){Object(g.b)("checkpoint_module",{module_name:e.state.tile_name},(function(e){e.success?t(e):s(e)}))}))}save_success(e){this.setState({render_content_line_number:e.render_content_line_number,extra_methods_line_number:e.extra_methods_line_number,draw_plot_line_number:e.draw_plot_line_number}),this._update_saved_state()}update_window_dimensions(){let e=window.innerWidth-2*y.b,t=window.innerHeight-R;this.top_ref&&this.top_ref.current?t-=this.top_ref.current.offsetTop:t-=y.c,this.setState({usable_height:t,usable_width:e})}_update_saved_state(){this.last_save=this._getSaveDict()}componentDidMount(){this.setState({mounted:!0}),document.title=this.state.tile_name,window.addEventListener("resize",this.update_window_dimensions),this.update_window_dimensions(),this._update_saved_state(),this.props.stopSpinner()}_refreshMethodsIfNecessary(e){"methods"==e&&this.setState({methodsTabRefreshRequired:!this.state.methodsTabRefreshRequired})}_handleTabSelect(e){if(this._refreshMethodsIfNecessary(e),this.state.foregrounded_panes[e])return;let t=Object.assign({},this.state.foregrounded_panes);t[e]=!0,this.setState({foregrounded_panes:t},()=>{this.update_window_dimensions()})}_handleNotesAppend(e){this.setState({notes:this.state.notes+e})}handleStateChange(e){this.setState(e)}handleOptionsChange(e){this.setState({option_list:e})}handleExportsChange(e){this.setState({export_list:e})}handleMethodsChange(e){this.setState({extra_functions:e})}get_height_minus_top_offset(e,t=0,s=100){if(this.state.mounted){let s=$(e.current).offset().top;return s<t&&(s=t),this.state.body_height-s}return this.state.body_height-s}get_new_tc_height(){return this.state.mounted?this.state.top_pane_height-this.tc_span_ref.current.offsetHeight:this.state.top_pane_height-50}get_new_rc_height(e){return this.state.mounted?e-this.rc_span_ref.current.offsetHeight:e-50}handleTopPaneResize(e,t,s){this.setState({top_pane_height:e,bottom_pane_height:t})}handleLeftPaneResize(e,t,s){this.setState({left_pane_width:e})}handleTopCodeChange(e){this.props.is_mpl?this.setState({draw_plot_code:e}):this.setState({jscript_code:e})}handleRenderContentChange(e){this.setState({render_content_code:e})}handleRename(e){}_handleResize(e){for(let t of e)if("creator-root"==t.target.id)return void this.setState({usable_width:window.innerWidth-2*y.b,usable_height:t.contentRect.height-R-t.target.getBoundingClientRect().top,body_height:t.contentRect.height-R})}render(){let e,t,s=this.get_height_minus_top_offset(this.vp_ref),n={width:this.state.left_pane_width-10};if(this.props.is_mpl||this.props.is_d3){let t=this.get_new_tc_height(),s=this.props.is_mpl?"python":"javascript",i=this.props.is_mpl?this.state.draw_plot_code:this.state.jscript_code,o=this.props.is_mpl?this.state.draw_plot_line_number+1:1,a=this.props.is_mpl?"draw_plot":"(selector, w, h, arg_dict) =>";e=React.createElement("div",{key:"dpcode",style:n,className:"d-flex flex-column align-items-baseline code-holder"},React.createElement("span",{ref:this.tc_span_ref},a),React.createElement(r.a,{code_content:i,mode:s,handleChange:this.handleTopCodeChange,saveMe:this._saveAndCheckpoint,readOnly:!1,first_line_number:o,code_container_height:t}))}t=this.props.is_mpl||this.props.is_d3?this.get_new_rc_height(this.state.bottom_pane_height):this.get_new_rc_height(s);let i,o=React.createElement("div",{key:"rccode",id:"rccode",style:n,className:"d-flex flex-column align-items-baseline code-holder"},React.createElement("span",{className:"bp3-ui-text",ref:this.rc_span_ref},"render_content"),React.createElement(r.a,{code_content:this.state.render_content_code,handleChange:this.handleRenderContentChange,saveMe:this._saveAndCheckpoint,readOnly:!1,first_line_number:this.state.render_content_line_number+1,code_container_height:t}));i=this.props.is_mpl||this.props.is_d3?React.createElement(React.Fragment,null,React.createElement(S,{tile_name:this.state.tile_name,res_type:"tile",handleRename:this.handleRename,button_groups:this.button_groups,key:"toolbar"}),React.createElement("div",{ref:this.vp_ref}),React.createElement(u.d,{top_pane:e,bottom_pane:o,show_handle:!0,available_height:s,available_width:this.state.left_pane_width,handleSplitUpdate:this.handleTopPaneResize,id:"creator-left"})):React.createElement(React.Fragment,null,React.createElement(S,{tile_name:this.state.tile_name,res_type:"tile",handleRename:this.handleRename,button_groups:this.button_groups,key:"toolbar"}),React.createElement("div",{ref:this.vp_ref},o));let l=React.createElement(a.c,{tags:this.state.tags,notes:this.state.notes,created:this.props.created,category:this.state.category,res_type:"tile",handleChange:this.handleStateChange}),p=React.createElement(h,{options_ref:this.options_ref,data_list:this.state.option_list,foregrounded:this.state.foregrounded_panes.options,handleChange:this.handleOptionsChange,handleNotesAppend:this._handleNotesAppend}),c=React.createElement(_,{data_list:this.state.export_list,foregrounded:this.state.foregrounded_panes.exports,handleChange:this.handleExportsChange,handleNotesAppend:this._handleNotesAppend}),d=this.get_height_minus_top_offset(this.methods_ref,128,128),m=React.createElement(r.a,{handleChange:this.handleMethodsChange,code_content:this.state.extra_functions,saveMe:this._saveAndCheckpoint,readOnly:!1,code_container_ref:this.methods_ref,code_container_height:d,first_line_number:this.state.extra_methods_line_number,refresh_required:this.state.methodsTabRefreshRequired}),g=React.createElement(React.Fragment,null,React.createElement("div",{id:"creator-resources",className:"d-block mt-2"},React.createElement(w.Tabs,{id:"resource_tabs",large:!0,onChange:this._handleTabSelect},React.createElement(w.Tab,{id:"metadata",title:"metadata",panel:l}),React.createElement(w.Tab,{id:"options",title:"options",panel:p}),React.createElement(w.Tab,{id:"exports",title:"exports",panel:c}),React.createElement(w.Tab,{id:"methods",title:"methods",panel:m})))),f={width:this.state.usable_width,height:this.state.usable_height,paddingLeft:y.b};return React.createElement(React.Fragment,null,React.createElement(w.ResizeSensor,{onResize:this._handleResize,observeParents:!0},React.createElement("div",{className:"resource-viewer-holder",ref:this.top_ref,style:f},React.createElement(u.c,{left_pane:i,right_pane:g,show_handle:!0,available_height:this.state.usable_height,available_width:this.state.usable_width,handleSplitUpdate:this.handleLeftPaneResize}))))}}x.propTypes={tile_name:PropTypes.string,is_mpl:PropTypes.bool,render_content_code:PropTypes.string,render_content_line_number:PropTypes.number,extra_methods_line_number:PropTypes.number,category:PropTypes.string,extra_functions:PropTypes.string,draw_plot_code:PropTypes.string,jscript_code:PropTypes.string,tags:PropTypes.array,notes:PropTypes.string,option_list:PropTypes.array,export_list:PropTypes.array,created:PropTypes.string};var E=Object(f.d)(Object(b.a)(x));Object(m.b)(null,!0),(T=new v("main",5e3)).socket.on("begin-post-load",(function(){let e={module_name:window.module_name,module_viewer_id:window.module_viewer_id,tile_collection_name:window.tile_collection_name,user_id:window.user_id,version_string:window.version_string};Object(g.f)(window.module_viewer_id,"initialize_parser",e,P)})),T.socket.emit("ready-to-begin",{room:window.main_id})}]);