!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=32)}([function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return o})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return p})),s.d(t,"e",(function(){return c}));let n={};function i(e){let t=e.callback_id,s=n[t];delete n[t],s(e.response_data)}function r(e,t,s){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json",success:s})}function a(e,t){return new Promise((function(s,n){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json",success:e=>{e.success&&s(e),n(e)}})}))}function o(e,t){return new Promise((function(s,n){"/"==e[0]&&(e=e.slice(1)),$.ajax({url:$SCRIPT_ROOT+"/"+e,type:"POST",data:t,contentType:!1,processData:!1,success:e=>{e.success&&s(e),n(e)}})}))}function l(e,t,s,i){const r={source:"client",dest:e,task_type:t,task_data:s,response_data:null,main_id:main_id,expiration:null};if(void 0!==i&&null!=i){const e=guid();n[e]=i,r.callback_id=e,r.callback_type="callback_no_context"}else r.callback_id=null,r.callback_type="no_callback";$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(r),dataType:"json"})}function c(e,t,s){const n={source:"client",dest:e,task_type:t,task_data:s,response_data:null,main_id:main_id,callback_id:null,callback_type:"no_callback",expiration:null};$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!1,data:JSON.stringify(n),dataType:"json"})}function p(e,t,s,i){const r={source:"client",dest:e,task_type:t,task_data:s,response_data:null,expiration:null};if(void 0!==i){const e=guid();n[e]=i,r.callback_id=e,r.callback_type="callback_no_context"}else r.callback_id=null,r.callback_type="no_callback";$.ajax({url:$SCRIPT_ROOT+"/post_from_client",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(r),dataType:"json"})}},function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return p}));var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},i=blueprint;const r=i.Toaster.create({className:"recipe-toaster",position:i.Position.TOP,autoFocus:!0}),a={"alert-success":"Success","alert-warning":"Warning","alert-info":null};function o(e){let t;t=e.hasOwnProperty("alert_type")?a[e.alert_type]:null,r.show({message:e.message,intent:t})}function l(e){o(e)}function c(e,t=null){return class extends React.Component{constructor(e){super(e),doBinding(this),this.tsocket=t,this.state={show_spinner:!1,status_message:null,dark_spinner:!1,spinner_size:this.props.spinner_size?this.props.spinner_size:25}}componentDidMount(){this.tsocket&&(this.tsocket.socket.on("stop-spinner",this._stopSpinner),this.tsocket.socket.on("start-spinner",this._startSpinner),this.tsocket.socket.on("show-status-msg",this._statusMessageFromData),this.tsocket.socket.on("clear-status-msg",this._clearStatusMessage))}_stopSpinner(){this.setState({show_spinner:!1})}_startSpinner(e=!1){this.setState({show_spinner:!0,dark_spinner:e})}_clearStatusMessage(){this.setState({status_message:null})}_clearStatus(){this.setState({show_spinner:!1,status_message:null})}_statusMessage(e,t=null){this.setState({status_message:e},()=>{t&&setTimeout(self._clearStatusMessage,1e3*data.timeout)})}_statusMessageFromData(e){let t=this;this.setState({status_message:e.message},()=>{e.hasOwnProperty("timeout")&&null!=e.timeout&&setTimeout(t._clearStatusMessage,1e3*e.timeout)})}_setStatus(e){this.setState(e)}_statusFuncs(){return{startSpinner:this._startSpinner,stopSpinner:this._stopSpinner,clearStatus:this._clearStatus,clearStatusMessage:this._clearStatusMessage,statusMessage:this._statusMessage,setStatus:this._setStatus}}render(){return React.createElement(React.Fragment,null,React.createElement(e,n({},this.props,{statusFuncs:this._statusFuncs(),startSpinner:this._startSpinner,stopSpinner:this._stopSpinner,clearStatus:this._clearStatus,clearStatusMessage:this._clearStatus,statusMessage:this._statusMessage,setStatus:this._setStatus})),React.createElement(p,this.state))}}}class p extends React.Component{render(){this.props.dark_spinner;return React.createElement("div",{className:"d-flex flex-row",style:{position:"absolute",bottom:10,marginLeft:15}},this.props.show_spinner&&React.createElement(i.Spinner,{className:"bp3-dark",size:20}),this.props.status_message&&React.createElement("div",{className:"d-flex flex-column justify-content-around",style:{positoin:"absolute",marginLeft:50}},React.createElement("div",{id:"status-msg-area",className:"bp3-ui-text"},this.props.status_message)))}}p.propTypes={show_spinner:PropTypes.bool,status_message:PropTypes.string,spinner_size:PropTypes.number},p.defaultProps={show_spinner:!1,status_message:null,spinner_size:25}},function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return c})),s.d(t,"c",(function(){return o}));var n=blueprint;class i extends React.Component{constructor(e){super(e),doBinding(this);let t=this.props.default_value;for(var s=1;this.name_exists(t);)s+=1,t=this.props.default_value+String(s);this.state={show:!1,current_value:t,checkbox_states:{},warning_text:""}}_changeHandler(e){this.setState({current_value:e.target.value})}_checkbox_change_handler(e){e.target.checked;let t=Object.assign({},this.state.checkbox_states);t[e.target.id]=e.target.checked,this.setState({checkbox_states:t})}componentDidMount(){if(this.setState({show:!0}),null!=this.props.checkboxes&&0!=this.props.checkboxes.length){let e={};for(let t of this.props.checkboxes)e[t.id]=!1;this.setState({checkbox_states:e})}}name_exists(e){return this.props.existing_names.indexOf(e)>-1}_submitHandler(e){let t;""==this.state.current_value?(t="An empty name is not allowed here.",this.setState({warning_text:t})):this.name_exists(this.state.current_value)?(t="That name already exists",this.setState({warning_text:t})):(this.setState({show:!1}),this.props.handleSubmit(this.state.current_value,this.state.checkbox_states),this.props.handleClose())}_cancelHandler(){this.setState({show:!1}),this.props.handleCancel&&this.props.handleCancel(),this.props.handleClose()}_refHandler(e){this.input_ref=e}render(){let e=[];if(null!=this.props.checkboxes&&0!=this.props.checkboxes.length)for(let t of this.props.checkboxes){let s=React.createElement(n.Checkbox,{checked:this.state.checkbox_states[t.checkname],label:t.checktext,id:t.checkname,key:t.checkname,onChange:this._checkbox_change_handler});e.push(s)}return React.createElement(n.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,onOpened:()=>{$(this.input_ref).focus()},canEscapeKeyClose:!0},React.createElement("form",{onSubmit:this._submitHandler},React.createElement("div",{className:n.Classes.DIALOG_BODY},React.createElement(n.FormGroup,{label:this.props.field_title,helperText:this.state.warning_text},React.createElement(n.InputGroup,{inputRef:this._refHandler,onChange:this._changeHandler,value:this.state.current_value})),0!=e.length&&e),React.createElement("div",{className:n.Classes.DIALOG_FOOTER},React.createElement("div",{className:n.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(n.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(n.Button,{intent:n.Intent.PRIMARY,onClick:this._submitHandler},"Submit")))))}}function r(e,t,s,n,r,a=null,o=null){void 0===r&&(r=[]);let l=document.querySelector("#modal-area");ReactDOM.render(React.createElement(i,{handleSubmit:s,handleCancel:o,handleClose:function(){ReactDOM.unmountComponentAtNode(l)},title:e,field_title:t,default_value:n,checkboxes:a,existing_names:r}),l)}i.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,field_title:PropTypes.string,default_value:PropTypes.string,existing_names:PropTypes.array,checkboxes:PropTypes.array},i.defaultProps={existing_names:[],default_value:"",checkboxes:null};class a extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1,value:null}}componentDidMount(){this.setState({show:!0,value:this.props.option_list[0]})}_handleChange(e){this.setState({value:e.target.value})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(this.state.value),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(n.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,canEscapeKeyClose:!0},React.createElement("div",{className:n.Classes.DIALOG_BODY},React.createElement(n.FormGroup,{title:this.props.select_label},React.createElement(n.HTMLSelect,{options:this.props.option_list,onChange:this._handleChange,value:this.state.value}))),React.createElement("div",{className:n.Classes.DIALOG_FOOTER},React.createElement("div",{className:n.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(n.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(n.Button,{intent:n.Intent.PRIMARY,onClick:this._submitHandler},"Submit"))))}}function o(e,t,s,n,i,r){let o=document.querySelector("#modal-area");ReactDOM.render(React.createElement(a,{handleSubmit:i,handleClose:function(){ReactDOM.unmountComponentAtNode(o)},title:e,select_label:t,submit_text:n,option_list:r,cancel_text:s}),o)}a.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,handleCancel:PropTypes.func,title:PropTypes.string,select_label:PropTypes.string,option_list:PropTypes.array,submit_text:PropTypes.string,cancel_text:PropTypes.string};class l extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1}}componentDidMount(){this.setState({show:!0})}_submitHandler(e){this.setState({show:!1}),this.props.handleSubmit(),this.props.handleClose()}_cancelHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(n.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._cancelHandler,canEscapeKeyClose:!0},React.createElement("div",{className:n.Classes.DIALOG_BODY},React.createElement("p",null,this.props.text_body)),React.createElement("div",{className:n.Classes.DIALOG_FOOTER},React.createElement("div",{className:n.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(n.Button,{onClick:this._cancelHandler},"Cancel"),React.createElement(n.Button,{intent:n.Intent.PRIMARY,onClick:this._submitHandler},"Submit"))))}}function c(e,t,s,n,i){let r=document.querySelector("#modal-area");ReactDOM.render(React.createElement(l,{handleSubmit:i,handleClose:function(){ReactDOM.unmountComponentAtNode(r)},title:e,text_body:t,submit_text:n,cancel_text:s}),r)}l.propTypes={handleSubmit:PropTypes.func,handleClose:PropTypes.func,title:PropTypes.string,text_body:PropTypes.string,submit_text:PropTypes.string,cancel_text:PropTypes.string};(class extends React.Component{constructor(e){super(e),doBinding(this),this.state={show:!1}}componentDidMount(){this.setState({show:!0})}_closeHandler(){this.setState({show:!1}),this.props.handleClose()}render(){return React.createElement(n.Dialog,{isOpen:this.state.show,title:this.props.title,onClose:this._closeHandler,canEscapeKeyClose:!0},React.createElement("div",{className:n.Classes.DIALOG_BODY},React.createElement("p",null,this.props.text_body)),React.createElement("div",{className:n.Classes.DIALOG_FOOTER},React.createElement("div",{className:n.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(n.Button,{onClick:this._closeHandler},"Okay"))))}}).propTypes={handleClose:PropTypes.func,title:PropTypes.string,text_body:PropTypes.string,close_text:PropTypes.string}},function(e,t,s){"use strict";s.d(t,"d",(function(){return l})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return r}));var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};const i=15,r=40,a=50,o=50;function l(){return{usable_width:window.innerWidth-2*i,usable_height:window.innerHeight-r-o,usable_height_no_bottom:window.innerHeight-o,body_height:window.innerHeight-r}}const c=React.createContext({available_height:500,available_width:500});class p extends React.Component{constructor(e){super(e),this.dref=React.createRef(),this.state={mounted:!1,availableHeight:this.props.parentHeight-a,availableWidth:this.props.parentWidth-a,previousParentHeight:this.props.parentHeight,previousParentWidth:this.props.parentWidth,indent_left:0},doBinding(this)}componentDidMount(){this.setState({mounted:!0},this._updateDimensions)}_dimensionsHaveChanged(){return this.props.parentHeight!=this.state.previousParentHeight||this.props.parentWidth!=this.state.previousParentWidth}componentDidUpdate(){this._dimensionsHaveChanged()&&this.setState({previousParentHeight:this.props.parentHeight,previousParentWidth:this.props.parentWidth},this._updateDimensions)}_updateDimensions(){}render(){var e=this.props.component;let t=Object.assign({},this.props.div_style);if(this.props.am_outer&&(t.position="absolute",t.left=i),this.props.apply_dimensions_to_div&&(t=Object.assign({width:this.state.availableWidth,height:this.state.availableHeight},t)),this.props.component)return React.createElement(React.Fragment,null,React.createElement("div",{ref:this.dref,style:t,className:"sizer"},React.createElement(e,n({available_height:this.state.availableHeight,available_width:this.state.availableWidth},this.props))));{let e={available_height:this.state.availableHeight,available_width:this.state.availableWidth};return React.createElement(React.Fragment,null,React.createElement("div",{ref:this.dref,style:t,className:"sizer"}),React.createElement(c.Provider,{value:e},this.props.children))}}}p.propTypes={parentHeight:PropTypes.number,parentWidth:PropTypes.number,component:PropTypes.func,bottom_ref:PropTypes.object,right_ref:PropTypes.object,am_outer:PropTypes.bool,div_style:PropTypes.object,apply_dimensions_to_div:PropTypes.bool},p.defaultProps={bottom_ref:null,right_ref:null,component:null,am_outer:!1,div_style:{},apply_dimensions_to_div:!1}},,function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return p})),s.d(t,"b",(function(){return o}));var n=s(2),i=s(0),r=s(1);let a=blueprint;class o extends React.Component{constructor(e){super(e),doBinding(this)}_filter_on_match_list(e){return!this.props.hidden_items.includes(e)}render(){let e=Object.keys(this.props.option_dict).filter(this._filter_on_match_list).map((e,t)=>{let s=this.props.icon_dict.hasOwnProperty(e)?this.props.icon_dict[e]:null;return React.createElement(a.MenuItem,{disabled:this.props.disable_all||this.props.disabled_items.includes(e),onClick:this.props.option_dict[e],icon:s,key:e,text:e})}),t=React.createElement(a.Menu,null,e);if(this.props.alt_button){let e=this.props.alt_button;return React.createElement(a.Popover,{minimal:!0,content:t,position:a.PopoverPosition.BOTTOM_LEFT},React.createElement(e,null))}return React.createElement(a.Popover,{minimal:!0,content:t,position:a.PopoverPosition.BOTTOM_LEFT},React.createElement(a.Button,{text:this.props.menu_name,small:!0,minimal:!0}))}}o.propTypes={menu_name:PropTypes.string,option_dict:PropTypes.object,icon_dict:PropTypes.object,disabled_items:PropTypes.array,disable_all:PropTypes.bool,hidden_items:PropTypes.array,alt_button:PropTypes.func},o.defaultProps={disabled_items:[],disable_all:!1,hidden_items:[],icon_dict:{},alt_button:null};class l extends React.Component{constructor(e){super(e),doBinding(this)}_saveProjectAs(){this.props.startSpinner();let e=this;function t(){e.props.stopSpinner()}function s(t){const s={project_name:t,main_id:window.main_id,doc_type:"table",purgetiles:!0};function n(s){if(s.success){window.is_project=!0,window._project_name=t,document.title=t,e.props.clearStatusMessage(),s.alert_type="alert-success",s.timeout=2e3,Object(i.f)("host","refresh_project_selector_list",{user_id:window.user_id}),e.props.stopSpinner(),Object(r.b)(s)}else e.props.clearStatusMessage(),s.message=s.message,s["alert-type"]="alert-warning",e.props.stopSpinner(),Object(r.b)(s)}s.interface_state=e.props.interface_state,window.is_notebook?Object(i.f)(window.main_id,"save_new_notebook_project",s,n):(s.purgetiles=!0,Object(i.f)(window.main_id,"save_new_project",s,n))}Object(i.f)("host","get_project_names",{user_id:window.user_id},(function(e){Object(n.b)("Save Project As","New Project Name",s,"NewProject",e.project_names,null,t)}))}_saveProject(){let e=this;const t={main_id:window.main_id};t.interface_state=this.props.interface_state,this.props.startSpinner(),Object(i.f)(window.main_id,"update_project",t,(function(t){e.props.startSpinner(),t.success?(t.alert_type="alert-success",t.timeout=2e3):t.alert_type="alert-warning";e.props.clearStatusMessage(),e.props.stopSpinner(),Object(r.b)(data_object)}))}_exportAsJupyter(){this.props.startSpinner();let e=this;function t(t){var s=[];for(let t of e.props.console_items){let e={};e.source=t.console_text,e.cell_type="code"==t.type?"code":"markdown","code"==t.type&&(e.outputs=[]),s.push(e)}const n={project_name:t,main_id:window.main_id,cell_list:s};Object(i.f)(window.main_id,"export_to_jupyter_notebook",n,(function(t){e.props.clearStatusMessage(),t.success?(t.alert_type="alert-success",t.timeout=2e3):t["alert-type"]="alert-warning";e.props.stopSpinner(),Object(r.b)(t)}))}Object(i.f)("host","get_project_names",{user_id:user_id},(function(e){Object(n.b)("Export Notebook in Jupyter Format","New Project Name",t,"NewJupyter",e.project_names,void 0)}))}_exportDataTable(){Object(n.b)("Export Data","New Collection Name",(function(e){const t={export_name:e,main_id:window.main_id,user_id:window.user_id};$.ajax({url:$SCRIPT_ROOT+"/export_data",contentType:"application/json",type:"POST",async:!0,data:JSON.stringify(t),dataType:"json"})}))}_consoleToNotebook(){const e={main_id:window.main_id,console_items:this.props.console_items,user_id:window.user_id};Object(i.f)(window.main_id,"console_to_notebook",e)}get option_dict(){return{"Save As...":this._saveProjectAs,Save:this._saveProject,"Export as Jupyter Notebook":this._exportAsJupyter,"Open Console as Notebook":this._consoleToNotebook,"Export Table as Collection":this._exportDataTable,"Change collection":this.props.changeCollection}}get icon_dict(){return{"Save As...":"floppy-disk",Save:"floppy-disk","Export as Jupyter Notebook":"export","Open Console as Notebook":"console","Export Table as Collection":"export","Change collection":"exchange"}}render(){return React.createElement(o,{menu_name:"Project",option_dict:this.option_dict,icon_dict:this.icon_dict,disabled_items:this.props.disabled_items,disable_all:!1,hidden_items:this.props.hidden_items})}}l.propTypes={console_items:PropTypes.array,interface_state:PropTypes.object,changeCollection:PropTypes.func,disabled_items:PropTypes.array,hidden_items:PropTypes.array};class c extends React.Component{constructor(e){super(e),doBinding(this)}_shift_column_left(){let e=this.props.filtered_column_names.indexOf(this.props.selected_column);if(0==e)return;let t=this.props.filtered_column_names[e-1];this.props.moveColumn(this.props.selected_column,t)}_shift_column_right(){let e=this.props.table_spec.column_names.indexOf(this.props.selected_column);if(e==this.props.table_spec.column_names.length-1)return;let t=this.props.table_spec.column_names[e+2];this.props.moveColumn(this.props.selected_column,t)}get option_dict(){return{"Shift Left":this._shift_column_left,"Shift Right":this._shift_column_right,Hide:this.props.hideColumn,"Hide in All Docs":this.props.hideInAll,"Unhide All":this.props.unhideAllColumns,"Add Column":()=>this.props.addColumn(!1),"Add Column In All Docs":()=>this.props.addColumn(!0)}}get icon_dict(){return{"Shift Left":"direction-left","Shift Right":"direction-right",Hide:"eye-off","Hide in All Docs":"eye-off","Unhide All":"eye-on","Add Column":"add-column-right","Add Column In All Docs":"add-column-right"}}render(){return React.createElement(o,{menu_name:"Column",option_dict:this.option_dict,icon_dict:this.icon_dict,disabled_items:this.props.disabled_items,hidden_items:[]})}}c.propTypes={moveColumn:PropTypes.func,table_spec:PropTypes.object,filtered_column_names:PropTypes.array,selected_column:PropTypes.string,hideColumn:PropTypes.func,hideInAll:PropTypes.func,unhideAllColumns:PropTypes.func,addColumn:PropTypes.func,disabled_items:PropTypes.array};class p extends React.Component{constructor(e){super(e),doBinding(this)}_shift_column_left(){let e=this.props.table_spec.column_names.indexOf(this.props.selected_column);if(0==e)return;let t=this.props.table_spec.column_names[e-1];this._moveColumn(this.props.selected_column,t)}_shift_column_right(){let e=this.props.table_spec.column_names.indexOf(this.props.selected_column);if(e==this.props.table_spec.column_names.length-1)return;let t=this.props.table_spec.column_names[e+2];this._moveColumn(this.props.selected_column,t)}get option_dict(){let e={};return e[this.props.table_is_shrunk?"Maximize Table":"Minimize Table"]=this.props.toggleTableShrink,e["Show Error Drawer"]=this.props.openErrorDrawer,e}get icon_dict(){let e={};return e[this.props.table_is_shrunk?"Maximize Table":"Minimize Table"]=this.props.table_is_shrunk?"maximize":"minimize",e["Show Error Drawer"]="panel-stats",e}render(){return React.createElement(o,{menu_name:"View",option_dict:this.option_dict,icon_dict:this.icon_dict,disabled_items:[],disable_all:this.props.disable_all,hidden_items:[]})}}p.propTypes={table_is_shrunk:PropTypes.bool,toggleTableShrink:PropTypes.func,openErrorDrawer:PropTypes.func}},function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=React.createContext({readOnly:!1})},function(e,t,s){"use strict";s.d(t,"b",(function(){return h})),s.d(t,"a",(function(){return p}));var n=s(5),i=blueprint;let r=$SCRIPT_ROOT+"/library",a=$SCRIPT_ROOT+"/repository",o=$SCRIPT_ROOT+"/account_info",l=$SCRIPT_ROOT+"/login";const c=10;class p extends React.Component{constructor(e){super(e),doBinding(this),this.lg_ref=React.createRef(),this.state={usable_width:window.innerWidth-2*c,old_left_width:0},this.overflow_items=[]}componentDidMount(){window.addEventListener("resize",this._update_window_dimensions),this._update_window_dimensions(),this.setState({old_left_width:this._getLeftWidth()})}componentDidUpdate(){let e=this._getLeftWidth();e!=this.state.old_left_width&&this.setState({old_left_width:e})}_update_window_dimensions(){this.setState({usable_width:window.innerWidth-2*c})}handle_signout(){doSignOut(window.page_id)}getIntent(e){return this.props.selected==e?"primary":null}renderNav(e){return React.createElement(i.Button,{icon:e.icon,key:e.text,minimal:!0,text:e.text,intent:e.intent,onClick:e.onClick})}_getLeftWidth(){return this.lg_ref&&this.lg_ref.current?this.lg_ref.current.getBoundingClientRect().width:null}_getRightWidth(){let e=this._getLeftWidth();return e?this.state.usable_width-e-35:.25*this.state.usable_width-35}_authenticatedItems(){return[{icon:"home",text:"Library",intent:this.getIntent("library"),onClick:()=>{window.open(r)}},{icon:"database",text:"Repository",intent:this.getIntent("repository"),onClick:()=>{window.open(a)}},{icon:"settings",text:this.props.user_name,intent:this.getIntent("account"),onClick:()=>{window.open(o)}},{icon:"log-out",text:"Logout",intent:this.getIntent("logout"),onClick:this.handle_signout}]}_notAuthenticatedItems(){return[{icon:"log-in",text:"Login",intent:this.getIntent("login"),onClick:()=>{window.open(l)}}]}_onOverflow(e){this.overflow_items=e}_overflowRenderer(){let e={},t={};for(let s of this.overflow_items)e[s.text]=s.onClick,t[s.text]=s.icon;return React.createElement(n.b,{alt_button:()=>React.createElement("span",{className:"bp3-breadcrumbs-collapsed",style:{marginTop:5}}),option_dict:e,icon_dict:t})}render(){this.props.menus;let e=[];e.push({icon:"manual",text:"docs",intent:null,onClick:()=>{window.open("http://tactic.readthedocs.io/en/latest/index.html")}}),e=this.props.is_authenticated?e.concat(this._authenticatedItems()):e.concat(this._notAuthenticatedItems());let t={width:this._getRightWidth(),justifyContent:"flex-end"};return React.createElement(i.Navbar,{style:{paddingLeft:10}},React.createElement("div",{className:"bp3-navbar-group bp3-align-left",ref:this.lg_ref},React.createElement(i.Navbar.Heading,null,React.createElement("img",{className:"mr-2",src:window.tactic_img_url,alt:"",width:"32 ",height:"32"}),"Tactic"),null!=this.props.menus&&React.createElement(React.Fragment,null,this.props.menus)),React.createElement(i.Navbar.Group,{align:i.Alignment.RIGHT,style:t},React.createElement(i.NavbarDivider,null),React.createElement(i.OverflowList,{items:e,overflowRenderer:this._overflowRenderer,visibleItemRenderer:this.renderNav,onOverflow:this._onOverflow})))}}function h(e=null){let t=document.querySelector("#navbar-root");ReactDOM.render(React.createElement(p,{is_authenticated:window.is_authenticated,selected:e,user_name:window.username}),t)}p.propTypes={is_authenticated:PropTypes.bool,img_url:PropTypes.string,user_name:PropTypes.string,menus:PropTypes.object,selected:PropTypes.string},p.defaultProps={menus:null,selected:null}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(1);class i{constructor(e,t){this.name_space=e,this.recInterval=null,this.retry_interval=t,this.connectme(),this.initialize_socket_stuff(),this.watchForDisconnect()}connectme(){use_ssl?this.socket=io.connect(`https://${document.domain}:${location.port}/${this.name_space}`):this.socket=io.connect(`http://${document.domain}:${location.port}/${this.name_space}`)}initialize_socket_stuff(){}watchForDisconnect(){let e=this;this.socket.on("disconnect",(function(){Object(n.b)({message:"lost server connection"}),e.socket.close(),e.recInterval=setInterval((function(){e.attemptReconnect()}),e.retry_interval)}))}attemptReconnect(){this.socket.connected?(clearInterval(this.recInterval),this.initialize_socket_stuff(),this.watchForDisconnect(),Object(n.b)({message:"reconnected to server"})):this.connectme()}}},function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i}));s(3);class n extends React.Component{constructor(e){super(e),this.left_pane_ref=React.createRef(),this.right_pane_ref=React.createRef(),this.top_ref=null==this.props.top_ref?React.createRef():this.props.top_ref,this.old_left_width=0,this.old_right_width=0,this.state=this.state={current_width_fraction:this.props.initial_width_fraction,mounted:!1}}componentDidMount(){this.turn_on_horizontal_resize(),window.addEventListener("resize",this.resize_to_window),this.setState({mounted:!0},()=>{this.props.handleSplitUpdate&&this.props.handleSplitUpdate(this.left_width,this.right_width,this.state.current_width_fraction)})}componentDidUpdate(){this.notifySplitUpate()}turn_on_horizontal_resize(){let e=this;$(this.left_pane_ref.current).resizable({handles:"e",resize:function(t,s){let n=1*s.size.width/e.props.available_width;s.position.left=s.originalPosition.left,e.update_width_fraction(n)}})}get left_width(){return this.props.available_width*this.state.current_width_fraction}get right_width(){return(1-this.state.current_width_fraction)*this.props.available_width}update_width_fraction(e){this.setState({current_width_fraction:e})}get width_has_changed(){return this.left_width!=this.old_left_width||this.right_width!=this.old_right_width}notifySplitUpate(){this.width_has_changed&&null!=this.props.handleSplitUpdate&&(this.old_left_width=this.left_width,this.old_right_width=this.right_width,this.props.handleSplitUpdate(this.left_width,this.right_width,this.state.current_width_fraction))}render(){let e={width:this.left_width,height:this.props.available_height-this.props.bottom_margin,display:"flex",flexDirection:"column"},t={width:this.right_width,height:this.props.available_height-this.props.bottom_margin,display:"flex",flexDirection:"column"};this.props.hide_me;return React.createElement("div",{className:"d-flex flex-row horizontal-panes",ref:this.props.top_ref},React.createElement("div",{ref:this.left_pane_ref,style:e,className:"res-viewer-resizer"},this.props.left_pane),React.createElement("div",{ref:this.right_pane_ref,style:t},this.props.right_pane))}}n.propTypes={available_width:PropTypes.number,available_height:PropTypes.number,left_pane:PropTypes.object,right_pane:PropTypes.object,handleSplitUpdate:PropTypes.func,initial_width_fraction:PropTypes.number,top_ref:PropTypes.object,bottom_margin:PropTypes.number},n.defaultProps={handleSplitUpdate:null,initial_width_fraction:.5,hide_me:!1,left_margin:null,right_margin:null,top_ref:null,bottom_margin:0};class i extends React.Component{constructor(e){super(e),this.top_pane_ref=React.createRef(),this.bottom_pane_ref=React.createRef(),this.old_bottom_height=0,this.old_top_height=0,this.state=this.state={current_height_fraction:this.props.initial_height_fraction,mounted:!1}}componentDidMount(){this.turn_on_vertical_resize(),this.setState({mounted:!0}),window.addEventListener("resize",this.resize_to_window)}componentDidUpdate(){this.notifySplitUpate()}turn_on_vertical_resize(){let e=this;$(this.top_pane_ref.current).resizable({handles:"s",resize:function(t,s){let n=1*s.size.height/e.props.available_height;e.update_height_fraction(n)}})}get top_height(){return this.props.available_height*this.state.current_height_fraction}get bottom_height(){return(1-this.state.current_height_fraction)*this.props.available_height}notifySplitUpate(){null!=this.props.handleSplitUpdate&&this.height_has_changed&&(this.old_top_height=this.top_height,this.old_bottom_height=this.bottom_height,this.props.handleSplitUpdate(this.top_height,this.bottom_height,this.state.current_height_fraction))}update_height_fraction(e){this.setState({current_height_fraction:e})}get height_has_changed(){return this.top_height!=this.old_top_height||this.bottom_height!=this.old_bottom_height}render(){let e={width:this.props.available_width,height:this.top_height,overflowY:"scroll"};this.props.hide_top&&(e.display="none");let t={width:this.props.available_width,height:this.bottom_height,overflowY:"scroll"};return React.createElement("div",{className:"d-flex flex-column"},React.createElement("div",{ref:this.top_pane_ref,style:e},this.props.top_pane),React.createElement("div",{ref:this.bottom_pane_ref,style:t},this.props.bottom_pane))}}i.propTypes={available_width:PropTypes.number,available_height:PropTypes.number,top_pane:PropTypes.object,hide_top:PropTypes.bool,bottom_pane:PropTypes.object,handleSplitUpdate:PropTypes.func,initial_height_fraction:PropTypes.number},i.defaultProps={handleSplitUpdate:null,initial_height_fraction:.5,hide_top:!1}},function(e,t,s){"use strict";s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return _})),s.d(t,"b",(function(){return o}));var n=s(2),i=s(0);const r="btn-outline-secondary";var a=blueprint;function o(e){return React.createElement("div",{style:{marginTop:20}},React.createElement(h,{button_groups:e.button_groups}),React.createElement(_,{resource_name:e.resource_name,res_type:e.res_type}))}class l extends React.Component{constructor(e){super(e)}render(){return React.createElement(a.Button,{text:this.props.name_text,icon:this.props.icon_name,style:{flexDirection:"column",fontSize:8,padding:"5px 8px",width:42,height:42},large:!0,minimal:!1,onClick:this.props.click_handler,className:"bp-toolbar-button bp3-elevation-0"})}}l.propTypes={icon_name:PropTypes.string,click_handler:PropTypes.func,button_class:PropTypes.string,name_text:PropTypes.string,small_size:PropTypes.bool,intent:PropTypes.string},l.defaultProps={small_size:!0,intent:"regular"};class c extends React.Component{constructor(e){super(e),doBinding(this)}render(){let e=this.props.option_list.map((e,t)=>React.createElement(a.MenuItem,{key:e.opt_name,onClick:e.opt_func,icon:e.opt_icon,text:e.opt_name})),t=React.createElement(a.Menu,null,e," ");return React.createElement(a.ButtonGroup,null,React.createElement(a.Popover,{content:t},React.createElement(a.Button,{id:this.props.name,text:this.props.name,icon:this.props.icon_name})))}}c.propTypes={button_class:PropTypes.string,name:PropTypes.string,icon_name:PropTypes.string,option_list:PropTypes.array,small_size:PropTypes.bool},c.defaultProps={small_size:!0};class p extends React.Component{constructor(e){super(e),doBinding(this),this.state={file_list:null,hasSelection:!1,the_text:"Choose file..."}}_handleFileChange(e){let t,s=e.target.files;0!=s.length&&(t=1==s.length?s[0].name:"<multiple>",this.setState({file_list:s,hasSelection:!0,the_text:t}))}_do_submit(e){e.preventDefault(),this.props.click_handler(this.state.file_list)}render(){return React.createElement(React.Fragment,null,React.createElement(a.ControlGroup,null,React.createElement(a.Button,{text:this.props.name_text,icon:this.props.icon_name,large:!1,onClick:this._do_submit,className:"bp-toolbar-button"}),React.createElement(a.FileInput,{large:!1,text:this.state.the_text,style:{width:200,fontSize:12,marginBottom:0},hasSelection:this.state.hasSelection,onInputChange:this._handleFileChange,inputProps:{multiple:this.props.multiple}})))}}p.propTypes={click_handler:PropTypes.func,button_class:PropTypes.string,name_text:PropTypes.string,multiple:PropTypes.bool,icon_name:PropTypes.string,small_size:PropTypes.bool},p.defaultProps={small_size:!0,multiple:!1};class h extends React.Component{constructor(e){super(e),this.tb_ref=React.createRef()}get_button_class(e){return null==e.button_class?r:e.button_class}componentDidMount(){this.props.sendRef&&this.props.sendRef(this.tb_ref)}componentDidUpdate(){this.props.sendRef&&this.props.sendRef(this.tb_ref)}render(){const e=[];var t=0;if(null!=this.props.popup_buttons&&0!=this.props.popup_buttons.length){let t=this.props.popup_buttons.map((e,t)=>React.createElement(a.ButtonGroup,{className:"toolbar-button-group",role:"group",key:"popup_group"+String(t)},React.createElement(c,{name:e.name,key:e.name,icon_name:e.icon_name,option_list:e.option_list,button_class:this.get_button_class(e)})));e.push(t)}for(let s of this.props.button_groups){let n=s.map((e,t)=>React.createElement(l,{name_text:e.name_text,icon_name:e.icon_name,click_handler:e.click_handler,intent:e.hasOwnProperty("intent")?e.intent:"regular",key:t}));e.push(React.createElement(a.ButtonGroup,{large:!0,style:{justifyContent:"center"},className:"toolbar-button-group",role:"group",key:t},n)),t+=1}if(null!=this.props.file_adders&&0!=this.props.file_adders.length){let s=this.props.file_adders.map((e,t)=>React.createElement(p,{icon_name:e.icon_name,click_handler:e.click_handler,button_class:this.get_button_class(e),name_text:e.name_text,multiple:e.multiple,key:t}));e.push(React.createElement(a.ButtonGroup,{style:{justifyContent:"center"},className:"toolbar-button-group",role:"group",key:t},s))}let s;return s=this.props.alternate_outer_style?this.props.alternate_outer_style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginBottom:10},React.createElement("div",{style:s},React.createElement("div",{ref:this.tb_ref},e))}}h.propTypes={button_groups:PropTypes.array,file_adders:PropTypes.array,popup_buttons:PropTypes.array,alternate_outer_style:PropTypes.object,inputRef:PropTypes.func},h.defaultProps={file_adders:null,popup_buttons:null,alternate_outer_style:null,sendRef:null};class _ extends React.Component{constructor(e){super(e),this.state={current_name:e.resource_name},this.rename_me=this.rename_me.bind(this),this.RenameResource=null==this.props.handleRename?this.defaultRenameResource.bind(this):this.props.handleRename}rename_me(){console.log("entering rename");var e=this,t=this.props.res_type,s=this.state.current_name;$.getJSON($SCRIPT_ROOT+`get_resource_names/${t}`,(function(i){const r=i.resource_names,a=r.indexOf(s);a>=0&&r.splice(a,1),Object(n.b)(`Rename ${t}`,`Name for this ${t}`,e.RenameResource,s,r)}))}defaultRenameResource(e){const t={new_name:e};var s=this;Object(i.b)(`rename_resource/${this.props.res_type}/${this.state.current_name}`,t,(function(t){if(!t.success)return doFlash(t),!1;s.setState({current_name:e}),doFlash(t)}))}render(){let e=null==this.props.handleRename?this.state.current_name:this.props.resource_name;return React.createElement(a.Button,{id:"rename-button",large:!0,minimal:!0,style:{fontSize:20},tabIndex:-1,onClick:this.rename_me},React.createElement("h5",null,e))}}_.propTypes={resource_name:PropTypes.string,res_type:PropTypes.string,handleRename:PropTypes.func},_.defaultProps={handleRename:null}},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(1),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},r=blueprint;function a(e,t=null,s=null,n="right",r="30%"){return class extends React.Component{constructor(e){super(e),doBinding(this),this.tsocket=t,this.state={show_drawer:!1,contents:[],error_drawer_size:r,position:n}}componentDidMount(){this.tsocket&&(this.tsocket.socket.on("close-error-drawer",this._close),this.tsocket.socket.on("open-error-drawer",this._open),this.tsocket.socket.on("add-error-drawer-entry",this._addEntry),this.tsocket.socket.on("clear-error-drawer",this._clearAll))}_close(){this.setState({show_drawer:!1})}_open(){this.setState({show_drawer:!0})}_toggle(){this.setState({show_drawer:!this.state.show_drawer})}_addEntry(e,t=!0){this.setState({contents:[...this.state.contents,e],show_drawer:t})}_clearAll(){this.setState({contents:[]})}_onClose(){this.setState({show_drawer:!1})}render(){let t={openErrorDrawer:this._open,closeErrorDrawer:this._close,clearErrorDrawer:this._clearAll,addErrorDrawerEntry:this._addEntry,toggleErrorDrawer:this._toggle};return React.createElement(React.Fragment,null,React.createElement(e,i({},this.props,t,{errorDrawerFuncs:t})),React.createElement(o,i({},this.state,{title:"Error Drawer",size:this.state.error_drawer_size,onClose:this._onClose,clearAll:this._clearAll})))}}}class o extends React.Component{render(){let e=this.props.contents.map((e,t)=>{let s={__html:e.content};return React.createElement(r.Card,{key:t,interactive:!0,elevation:r.Elevation.TWO,style:{marginBottom:5}},e.title&&React.createElement("h6",null,React.createElement("a",{href:"#"},e.title)),React.createElement("div",{style:{fontSize:12},dangerouslySetInnerHTML:s}))});return React.createElement(r.Drawer,{icon:"console",title:this.props.title,isOpen:this.props.show_drawer,position:this.props.position,canOutsideClickClose:!0,onClose:this.props.onClose,size:this.props.size},React.createElement("div",{className:r.Classes.DRAWER_BODY},React.createElement("div",{className:"d-flex flex-row justify-content-around mt-2"},React.createElement(r.Button,{text:"Clear All",onClick:this.props.clearAll})),React.createElement("div",{className:r.Classes.DIALOG_BODY},e)))}}n.a.propTypes={show_drawer:PropTypes.bool,contents:PropTypes.array,title:PropTypes.string,onClose:PropTypes.func,position:PropTypes.string,clearAll:PropTypes.func,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number])},n.a.defaultProps={show_drawer:!1,contents:[],position:"right",title:null,size:"30%"}},,,,function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return p})),s.d(t,"c",(function(){return h})),s.d(t,"b",(function(){return l}));var n=s(0),i=(window.ReactTransitionGroup,blueprint);let r=bpselect,a=bptable;class o extends React.Component{constructor(e){super(e),doBinding(this)}_handleClick(){this.props.handleClick(this.props.item)}render(){return React.createElement(i.MenuItem,{active:this.props.modifiers.active,text:this.props.item.name,key:this.props.item.name,onClick:this._handleClick,shouldDismissPopover:!0})}}o.propTypes={item:PropTypes.string,modifiers:PropTypes.object,handleClick:PropTypes.func};class l extends React.Component{constructor(e){super(e),doBinding(this)}_itemRenderer(e,{modifiers:t,handleClick:s}){return React.createElement(o,{modifiers:t,item:e,handleClick:s})}_itemPredicate(e,t){if(0==e.length)return!1;e.toLowerCase();return new RegExp("^"+e).test(t.name.toLowerCase())}render(){return React.createElement(r.Omnibar,{items:this.props.items,isOpen:this.props.showOmnibar,onItemSelect:this.props.onItemSelect,itemRenderer:this._itemRenderer,itemPredicate:this._itemPredicate,resetOnSelect:!0,onClose:this.props.handleClose})}}l.propTypes={items:PropTypes.array,onItemSelect:PropTypes.func,showOmnibar:PropTypes.bool,handleClose:PropTypes.func};class c extends React.Component{constructor(e){super(e),doBinding(this)}_handleSearchFieldChange(e){this.props.update_search_state({search_field_value:e.target.value})}_handleClearSearch(){this.props.update_search_state({search_field_value:""})}_handleSearchMetadataChange(e){this.props.update_search_state({search_metadata_checked:e.target.checked})}_handleSearchInsideChange(e){this.props.update_search_state({search_inside_checked:e.target.checked})}_handleSubmit(e){e.preventDefault()}render(){return React.createElement(React.Fragment,null,React.createElement("div",{className:"d-flex flex-row mb-2 mt-2"},React.createElement(i.InputGroup,{type:"search",placeholder:"Search",leftIcon:"search",value:this.props.search_field_value,onChange:this._handleSearchFieldChange,style:{width:265},autoCapitalize:"none",autoCorrect:"off"}),React.createElement(i.Button,{onClick:this._handleClearSearch,className:"ml-2"},"clear"),this.props.allow_search_metadata&&React.createElement(i.Switch,{label:"metadata",className:"ml-2",large:!1,checked:this.props.search_metadata_checked,onChange:this._handleSearchMetadataChange}),this.props.allow_search_inside&&React.createElement(i.Switch,{label:"inside",className:"ml-2",large:!1,checked:this.props.search_inside_checked,onChange:this._handleSearchInsideChange})))}}c.propTypes={allow_search_inside:PropTypes.bool,allow_search_metadata:PropTypes.bool,update_search_state:PropTypes.func,search_field_value:PropTypes.string,search_inside_checked:PropTypes.bool,search_metadata_checked:PropTypes.bool};class p extends React.Component{constructor(e){super(e),doBinding(this),this.state={columnWidths:null}}componentDidMount(){this.computeColumnWidths()}computeColumnWidths(){if(0==this.props.data_list.length)return;let e=function(e,t){e.length;const s=_;let n,i,r,a=$($(".bp3-table-truncated-text")[0]).css("font"),o=document.getElementById("measure-canvas").getContext("2d"),l={},c=[];for(let t of e)l[t]=0,c.push(t);o.font=a;for(let e=0;e<t.length&&0!=c.length;++e){n=t[e];let a=[];for(let e of c)r=n[e],(i=o.measureText(r).width+15)>s&&(i=s,a.push(e)),i>l[e]&&(l[e]=i);for(let e of a){let t=c.indexOf(e);-1!==t&&c.splice(t,1)}}let p=[];for(let t of e)p.push(l[t]);return p}(Object.keys(this.props.columns),this.props.data_list);this.setState({columnWidths:e})}componentDidUpdate(){null==this.state.columnWidths&&this.computeColumnWidths()}_cellRendererCreator(e){let t=this;return s=>{let n;return n=Object.keys(t.props.data_list[s]).includes(e)?t.props.data_list[s][e]:"",React.createElement(a.Cell,{key:e,interactive:!0,truncated:!0,tabIndex:-1,wrapText:!0},React.createElement(React.Fragment,null,React.createElement("div",{onDoubleClick:()=>t.props.handleRowDoubleClick(t.props.data_list[s])},n)))}}_renderMenu(e){return React.createElement(i.Menu,null,React.createElement(i.MenuItem,{icon:"sort-asc",onClick:()=>{this.props.sortColumn(e,this.props.columns[e].sort_field,"ascending")},text:"Sort Asc"}),React.createElement(i.MenuItem,{icon:"sort-desc",onClick:()=>{this.props.sortColumn(e,this.props.columns[e].sort_field,"descending")},text:"Sort Desc"}))}render(){let e=this,t=Object.keys(this.props.columns).map(t=>{const s=e._cellRendererCreator(t);return React.createElement(a.Column,{cellRenderer:s,enableColumnReordering:!1,columnHeaderCellRenderer:()=>React.createElement(a.ColumnHeaderCell,{name:t,menuRenderer:()=>e._renderMenu(t)}),key:t,name:t})});return React.createElement(a.Table,{numRows:this.props.data_list.length,bodyContextMenuRenderer:e=>this.props.renderBodyContextMenu(e,this.props.data_list),enableColumnReordering:!1,enableMultipleSelection:!0,defaultRowHeight:23,selectedRegions:this.props.selectedRegions,enableRowHeader:!1,columnWidths:this.state.columnWidths,selectionModes:[a.RegionCardinality.FULL_ROWS,a.RegionCardinality.CELLS],onSelection:e=>this.props.onSelection(e,this.props.data_list)},t)}}p.propTypes={columns:PropTypes.object,selectedRegions:PropTypes.array,data_list:PropTypes.array,sortColumn:PropTypes.func,onSelection:PropTypes.func,handleRowDoubleClick:PropTypes.func,identifier_field:PropTypes.string,handleAddTag:PropTypes.func},p.defaultProps={columns:{name:{sort_field:"name",first_sort:"ascending"},created:{sort_field:"created_for_sort",first_sort:"descending"},updated:{sort_field:"updated_for_sort",first_sort:"ascending"},tags:{sort_field:"tags",first_sort:"ascending"}},identifier_field:"name",active_row:0,show_animations:!1,handleSpaceBarPress:null,draggable:!0};class h extends React.Component{constructor(e){super(e),this.state={default_list:[],failed_list:[],other_list:[]}}set_state_from_dict(e){this.setState({default_list:e.default_tiles,failed_list:e.failed_loads,other_list:e.nondefault_tiles})}componentDidMount(){let e=this;this.props.tsocket.socket.on("update-loaded-tile-list",t=>e.set_state_from_dict(t.tile_load_dict)),Object(n.b)("get_loaded_tile_lists",{},(function(t){let s=t.tile_load_dict;e.set_state_from_dict(s)}))}render(){let e=this.state.default_list.map(e=>React.createElement("p",{key:e},e)),t=this.state.failed_list.map(e=>React.createElement("p",{key:e},React.createElement("a",{style:{color:"red"}},e+"(failed)"))),s=this.state.other_list.map(e=>React.createElement("p",{key:e},e));return React.createElement("div",{id:"loaded_tile_widget",className:"d-flex flex-row"},React.createElement(i.Card,null,React.createElement("h6",null,"Loaded Default"),e,t),React.createElement(i.Card,{style:{marginLeft:10}},React.createElement("h6",null,"Loaded Other"),s))}}h.propTypes={tsocket:PropTypes.object};const _=300},,,,,,,,,,,,,,,,,function(e,t,s){"use strict";s.r(t);var n=s(10),i=s(8),r=s(2),a=s(1),o=s(7),l=s(0),c=s(15),p=s(9),h=s(3),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};let d=blueprint,u=bptable;class m extends React.Component{constructor(e){super(e),this.top_ref=React.createRef(),this.table_ref=React.createRef();let t=Object(h.d)().usable_height_no_bottom,s=Object(h.d)().usable_width-170;this.state={data_list:[],mounted:!1,available_height:t,available_width:s,top_pane_height:t/2-50,match_list:[]},doBinding(this),this.toolbarRef=null,null!=e.tsocket&&(e.tsocket.socket.on(`update-${e.res_type}-selector-row`,this._handleRowUpdate),e.tsocket.socket.on(`refresh-${e.res_type}-selector`,this._refresh_func))}_onTableSelection(e){if(0==e.length)return;let t=[],s=[];for(let n of e)if(n.hasOwnProperty("rows")){let e=n.rows[0];s.push(u.Regions.row(e));let i=n.rows[1];for(let n=e;n<=i;++n)t.push(this.state.data_list[n]),s.push(u.Regions.row(n))}this._handleRowSelection(t),this._updatePaneState({selectedRegions:s})}get_height_minus_top_offset(e){return this.state.mounted?this.props.usable_height-$(e.current).offset().top:this.props.usable_height-50}get_width_minus_left_offset(e){return this.state.mounted?this.props.usable_width-$(e.current).offset().left:this.props.usable_width-50}componentDidMount(){let e,t=this;this.setState({mounted:!0}),e="admin_list_with_metadata",Object(l.b)(`admin_list_with_metadata/${this.props.res_type}`,{},(function(e){t.setState({data_list:e.data_list},()=>{t._update_match_lists(),t._set_sort_state(t.props.sorting_column,t.props.sorting_field,t.props.sorting_direction)})}))}_handleRowUpdate(e){let t=e[this.props.id_field],s=this.get_data_list_index(t);if(-1==s)this._animation_phase(()=>{this._add_new_row(e)});else{let n=[...this.state.data_list],i=n[s];for(let t in e)i[t]=e[t];t==this.props.selected_resource[this.props.id_field]&&this.props.updatePaneState({selected_resource:i}),this.setState({data_list:n},()=>{this._update_match_lists()})}}_updatePaneState(e,t){this.props.updatePaneState(this.props.res_type,e,t)}set_in_data_list(e,t,s){let n=[];for(let i of s){if(e.includes(i[this.props.id_field]))for(let e in t)i[e]=t[e];n.push(i)}return n}get_data_list_index(e){return this.state.data_list.findIndex(t=>t[this.props.id_field]==e)}_delete_row(e){let t=this.get_data_list_index(e),s=[...this.state.data_list];s.splice(t,1),this.setState({data_list:s})}get_data_list_entry(e){for(let t of this.state.data_list)if(t[this.props.id_field]==e)return t;return null}_handleSplitResize(e,t,s){this._updatePaneState({left_width_fraction:s})}_handleRowClick(e,t=!1){this._updatePaneState({selected_resource:e,multi_select:!1,list_of_selected:[e[this.props.id_field]]})}_handleRowSelection(e){let t=e[0];this._updatePaneState({selected_resource:t,multi_select:!1,list_of_selected:[t.name]})}_filter_func(e,t){for(let s in e)if(-1!=e[s].toLowerCase().search(t))return!0;return-1!=e[this.props.id_field].toLowerCase().search(t)}get all_ids(){return this.state.data_list.map(e=>e[this.props.id_field])}match_all(){let e=this.all_ids;this.setState({match_list:e})}_update_search_state(e){e.search_from_field=!0,e.search_from_tags=!1,this._updatePaneState(e,this._update_match_lists)}_update_match_lists(){if(""==this.props.search_field_value)this.match_all();else{let e=[];for(let t of this.state.data_list)this._filter_func(t,this.props.search_field_value)&&e.push(t[this.props.id_field]);this.setState({match_list:e})}}_sort_data_list(){if(null==this.props.sorting_field)return this.state.data_list;let e=this.props.sorting_field,t=this.props.sorting_direction;let s=[...this.state.data_list];s.sort((function(s,n){let i;return i=s[e]<n[e]?-1:s[e]>n[e]?1:0,"descending"==t&&(i*=-1),i})),this._updatePaneState({selected_resource:s[0],list_of_selected:[s[0][this.props.id_field]],multi_select:!1}),this.setState({data_list:s})}_set_sort_state(e,t,s){this._updatePaneState({sorting_column:e,sorting_field:t,sorting_direction:s},this._sort_data_list)}_refresh_for_new_data_list(){this._update_match_lists(),this._sort_data_list()}_filter_on_match_list(e){return this.state.match_list.includes(e[this.props.id_field])}_add_new_row(e){let t=[...this.state.data_list];t.push(e),this.setState({data_list:t},this._refresh_for_new_data_list)}_animation_phase(e){this.setState({show_animations:!0}),e(),this.setState({show_animations:!1})}_refresh_func(){this.componentDidMount()}_setConsoleText(e){this._updatePaneState({console_text:e})}_handleResize(e){for(let t of e)if("pane-holder"==t.target.className)return void this.setState({available_width:t.contentRect.width-this.top_ref.current.offsetLeft,available_height:t.contentRect.height-this.top_ref.current.offsetTop})}_sendToolbarRef(e){this.toolbarRef=e}render(){let e=this.state.available_width*this.props.left_width_fraction;const t=["name","created","created_for_sort","updated","updated_for_sort","tags","notes"];let s={};for(let e in this.props.selected_resource)t.includes(e)||(s[e]=this.props.selected_resource[e]);0==Object.keys(s).length&&(s=null);let n,i,r=React.createElement("div",{className:"d-flex d-inline",style:{verticalAlign:"top",marginTop:120,marginLeft:10,width:"100%",height:412}},React.createElement("pre",null,React.createElement("small",null,this.props.console_text))),a=this.state.data_list.filter(this._filter_on_match_list),o=this.props.ToolbarClass,l={};for(let e of this.props.colnames)l[e]={sort_field:e,first_sort:"ascending"};if(this.table_ref&&this.table_ref.current)if(n=e-this.table_ref.current.offsetLeft,this.toolbarRef&&this.toolbarRef.current){let e=this.toolbarRef.current.getBoundingClientRect().width;(i=this.table_ref.current.offsetLeft+.5*n-.5*e)<0&&(i=0)}else i=175;else n=e-150,i=175;let h=React.createElement(React.Fragment,null,React.createElement("div",{className:"d-flex flex-row",style:{maxHeight:"100%"}},React.createElement("div",{ref:this.table_ref,className:"d-flex flex-column",style:{width:n,padding:15,marginTop:10,backgroundColor:"white"}},React.createElement(c.d,{allow_search_inside:!1,allow_search_metadata:!1,update_search_state:this._update_search_state,search_field_value:this.props.search_field_value}),React.createElement(c.a,{data_list:a,sortColumn:this._set_sort_state,selectedRegions:this.props.selectedRegions,onSelection:this._onTableSelection,columns:l,identifier_field:this.props.id_field}))));return React.createElement(d.ResizeSensor,{onResize:this._handleResize,observeParents:!0},React.createElement("div",{ref:this.top_ref,className:"d-flex flex-column mt-4"},React.createElement(o,_({selected_resource:this.props.selected_resource,list_of_selected:this.props.list_of_selected,setConsoleText:this._setConsoleText,animation_phase:this._animation_phase,delete_row:this._delete_row,refresh_func:this._refresh_func,startSpinner:this.props.startSpinner,stopSpinner:this.props.stopSpinner,clearStatusMessage:this.props.clearStatusMessage,left_position:i,sendRef:this._sendToolbarRef},this.props.errorDrawerFuncs)),React.createElement("div",{style:{width:this.state.available_width,height:this.state.available_height}},React.createElement(p.a,{left_pane:h,right_pane:r,available_width:this.state.available_width,available_height:this.state.available_height,initial_width_fraction:.65,handleSplitUpdate:this._handleSplitResize}))))}}m.propTypes={usable_height:PropTypes.number,usable_width:PropTypes.number,res_type:PropTypes.string,allow_search_inside:PropTypes.bool,allow_search_metadata:PropTypes.bool,search_inside_view:PropTypes.string,search_metadata_view:PropTypes.string,ToolbarClass:PropTypes.func,is_repository:PropTypes.bool,tsocket:PropTypes.object,colnames:PropTypes.array,id_field:PropTypes.string},m.defaultProps={is_repository:!1,tsocket:null};var f=s(6),g=s(11),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};let y=blueprint,w=bptable;let R;class T extends i.a{initialize_socket_stuff(){this.socket.emit("join",{user_id:window.user_id,library_id:window.library_id}),this.socket.on("window-open",e=>window.open(`${$SCRIPT_ROOT}/load_temp_page/${e.the_id}`)),this.socket.on("handle-callback",l.a),this.socket.on("close-user-windows",e=>{e.originator!=window.library_id&&window.close()}),this.socket.on("doflash",a.b)}}var S=["container","user"],P={container:["Id","Other_name","Name","Image","Owner","Status","Created"],user:["_id","username","full_name","last_login","email"]};function C(e,t){return e[t]="",e}class v extends React.Component{constructor(e){super(e);let t=Object(h.d)().usable_height_no_bottom,s=Object(h.d)().usable_width-170;this.state={selected_tab_id:"containers-pane",usable_width:s,usable_height:t,pane_states:{}};for(let e of S)this.state.pane_states[e]={left_width_fraction:.65,selected_resource:P[e].reduce(C,{}),tag_button_state:{expanded_tags:[],active_tag:"all",tree:[]},console_text:"",search_from_field:!1,search_from_tag:!1,sorting_column:"updated",sorting_field:"updated_for_sort",sorting_direction:"descending",multi_select:!1,list_of_selected:[],search_field_value:"",search_inside_checked:!1,search_metadata_checked:!1,selectedRegions:[w.Regions.row(0)]};this.state.pane_states.container.selected_resource=this.top_ref=React.createRef(),doBinding(this)}componentDidMount(){window.addEventListener("resize",this._update_window_dimensions),this.setState({mounted:!0}),this._update_window_dimensions(),this.props.stopSpinner()}_updatePaneState(e,t,s=null){let n=Object.assign({},this.state.pane_states[e]),i=Object.assign({},this.state.pane_states);i[e]=Object.assign(n,t),this.setState({pane_states:i},s)}_update_window_dimensions(){let e=window.innerWidth-2*h.b,t=window.innerHeight;this.top_ref&&this.top_ref.current?t-=this.top_ref.current.offsetTop:t-=h.c,this.setState({usable_height:t,usable_width:e})}_handleTabChange(e,t,s){this.setState({selected_tab_id:e},this._update_window_dimensions)}getIconColor(e){return e==this.state.selected_tab_id?"white":"#CED9E0"}render(){let e=React.createElement(m,b({},this.props,{res_type:"container",allow_search_inside:!1,allow_search_metadata:!1,ToolbarClass:x,updatePaneState:this._updatePaneState},this.state.pane_states.container,this.props.errorDrawerFuncs,{errorDrawerFuncs:this.props.errorDrawerFuncs,tsocket:R,colnames:P.container,id_field:"Id"})),t=React.createElement(m,b({},this.props,{res_type:"user",allow_search_inside:!1,allow_search_metadata:!1,ToolbarClass:E,updatePaneState:this._updatePaneState},this.state.pane_states.user,this.props.errorDrawerFuncs,{errorDrawerFuncs:this.props.errorDrawerFuncs,tsocket:R,colnames:P.user,id_field:"_id"})),s={width:this.state.usable_width,height:this.state.usable_height,paddingLeft:0};return React.createElement(f.a.Provider,{value:{readOnly:!1}},React.createElement("div",{className:"pane-holder",ref:this.top_ref,style:s},React.createElement(y.Tabs,{id:"the_container",style:{marginTop:100},selectedTabId:this.state.selected_tab_id,renderActiveTabPanelOnly:!0,vertical:!0,large:!0,onChange:this._handleTabChange},React.createElement(y.Tab,{id:"containers-pane",panel:e},React.createElement(y.Tooltip,{content:"Containers",position:y.Position.RIGHT},React.createElement(y.Icon,{icon:"box",iconSize:20,tabIndex:-1,color:this.getIconColor("collections-pane")}))),React.createElement(y.Tab,{id:"users-pane",panel:t},React.createElement(y.Tooltip,{content:"users",position:y.Position.RIGHT},React.createElement(y.Icon,{icon:"user",iconSize:20,tabIndex:-1,color:this.getIconColor("collections-pane")}))))))}}class O extends React.Component{prepare_button_groups(){let e,t,s=[];for(let n of this.props.button_groups){e=[];for(let s of n)this.props.multi_select&&!s[3]||(t={name_text:s[0],click_handler:s[1],icon_name:s[2],multi_select:s[3]},e.push(t));0!=e.length&&s.push(e)}return s}render(){let e={display:"flex",flexDirection:"row",position:"relative",left:this.props.left_position,marginBottom:10};return React.createElement(n.c,{button_groups:this.prepare_button_groups(),file_adders:null,alternate_outer_style:e,sendRef:this.props.sendRef,popup_buttons:null})}}O.propTypes={button_groups:PropTypes.array,left_position:PropTypes.number,sendRef:PropTypes.func};class x extends React.Component{constructor(e){super(e),doBinding(this)}_doFlashStopSpinner(e){this.props.stopSpinner(),Object(a.b)(e)}_container_logs(){let e=this.props.selected_resource.Id,t=this;$.getJSON($SCRIPT_ROOT+"/container_logs/"+e,(function(e){t.props.setConsoleText(e.log_text)}))}_clear_user_func(e){this.props.startSpinner(!0),$.getJSON($SCRIPT_ROOT+"/clear_user_containers/"+window.library_id,this._doFlashStopSpinner)}_reset_server_func(e){this.props.startSpinner(!0),$.getJSON($SCRIPT_ROOT+"/reset_server/"+library_id,this._doFlashStopSpinner)}_destroy_container(){this.props.startSpinner(!0);let e=this.props.selected_resource.Id,t=this;$.getJSON($SCRIPT_ROOT+"/kill_container/"+e,s=>{t._doFlashStopSpinner(s),s.success&&t.props.delete_row(e)}),this.props.stopSpinner()}get button_groups(){return[[["reset",this._reset_server_func,"reset",!1],["killall",this._clear_user_func,"clean",!1],["killone",this._destroy_container,"delete",!1]],[["log",this._container_logs,"console",!1],["refresh",this.props.refresh_func,"refresh",!1]]]}render(){return React.createElement(O,{button_groups:this.button_groups,left_position:this.props.left_position,sendRef:this.props.sendRef})}}x.propTypes={selected_resource:PropTypes.object,list_of_selected:PropTypes.array,setConsoleText:PropTypes.func,animation_phase:PropTypes.func,delete_row:PropTypes.func,refresh_func:PropTypes.func};class E extends React.Component{constructor(e){super(e),doBinding(this)}_delete_user(){let e=this.props.selected_resource._id;const t="Are you sure that you want to delete user "+String(e)+"?";Object(r.a)("Delete User",t,"do nothing","delete",(function(){$.getJSON($SCRIPT_ROOT+"/delete_user/"+e,a.b)}))}_update_user_starters(e){let t=this.props.selected_resource._id;const s="Are you sure that you want to update starter tiles for user "+String(t)+"?";Object(r.a)("Update User",s,"do nothing","update",(function(){$.getJSON($SCRIPT_ROOT+"/update_user_starter_tiles/"+t,a.b)}))}_migrate_user(e){let t=this.props.selected_resource._id;const s="Are you sure that you want to migrate user "+String(t)+"?";Object(r.a)("Migrate User",s,"do nothing","migrate",(function(){$.getJSON($SCRIPT_ROOT+"/migrate_user/"+t,a.b)}))}_create_user(e){window.open($SCRIPT_ROOT+"/register")}_duplicate_user(e){let t=this.props.selected_resource.username;window.open($SCRIPT_ROOT+"/user_duplicate/"+t)}_update_all_collections(e){window.open($SCRIPT_ROOT+"/update_all_collections")}get button_groups(){return[[["create",this._create_user,"new-object",!1],["duplicate",this._duplicate_user,"duplicate",!1],["delete",this._delete_user,"delete",!1],["update",this._update_user_starters,"automatic-updates",!1],["refresh",this.props.refresh_func,"refresh",!1]]]}render(){return React.createElement(O,{button_groups:this.button_groups,left_position:this.props.left_position,sendRef:this.props.sendRef})}}E.propTypes={selected_resource:PropTypes.object,list_of_selected:PropTypes.array,setConsoleText:PropTypes.func,animation_phase:PropTypes.func,delete_row:PropTypes.func,refresh_func:PropTypes.func},function(){Object(o.b)("library"),R=new T("library",5e3);let e=Object(g.a)(Object(a.d)(v,R),R),t=document.querySelector("#library-home-root");ReactDOM.render(React.createElement(e,null),t)}()}]);