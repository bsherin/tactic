## building for production or development
change again

### build all docker containers or any necessary:
In `tactic_app` directory:

`docker-compose build` or `docker-compose build tactic_main`

### build javascript bundles and css using webpack
from the `tactic` directory

note that scripts that can be run with `npm run`, as below are specified in package.json
The webpack configuration is in webpack.config.js

#### Develop

run either:
`webpack —env.mode=development`, or `npm run build`

#### production
run either:
`webpack —env.mode=production`
or
`npm run build-production`

note that the `npm run …` commands run a named script from package.json

### To push out a new version:

* Make sure that all files generated by webpack (for the production version) are marked as relevant by git.
* Push changes to github
    * note that the flask config file in `tactic_app/config.py` is no longer part of the repository.
    I think this shouldn't matter because I build my images locally.
* On github, pull changes onto master if necessary
* Push images to docker hub: `docker push bsherin/tactic -a` is all it takes, I think
* On github, Pull onto main branch, if necessary

Finally:
* run these scripts (They require a vpn connection

```
>/az_resdocker/  # actually I haven't been doing this lately
>/azdeploy/  # Just to change directories
>/azplay/
# alternatively, if I want to also update the nginx config:
# see discussion in readme.md in the tactic-azure-development project
> ansible-playbook -i staging deploy_with_nginxupdate.yml
```
